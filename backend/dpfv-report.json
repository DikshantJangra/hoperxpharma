{
  "runId": "dpfv-2026-01-07-1767801798678",
  "timestamp": "2026-01-07T16:00:53.198Z",
  "mode": "dev",
  "duration": 145477,
  "summary": {
    "total": 24,
    "passed": 16,
    "failed": 8,
    "blocked": 0,
    "skipped": 0
  },
  "scenarioMap": {
    "core.auth": "PASSED",
    "reports.sales": "FAILED",
    "audit.gdpr": "FAILED",
    "pos.draft": "PASSED",
    "pos.refund": "FAILED",
    "pos.credit": "FAILED",
    "documents.invoice-pdf": "FAILED",
    "procurement.consolidated": "FAILED",
    "core.onboarding": "PASSED",
    "admin.pin": "PASSED",
    "audit.access": "PASSED",
    "communication.email": "PASSED",
    "communication.whatsapp": "PASSED",
    "pos.quick-sale": "PASSED",
    "patients.create": "PASSED",
    "clinical.prescription": "PASSED",
    "admin.roles": "FAILED",
    "admin.features": "FAILED",
    "procurement.supplier": "PASSED",
    "billing.subscription": "PASSED",
    "clinical.dispense": "PASSED",
    "procurement.po": "PASSED",
    "pos.rx-sale": "PASSED",
    "procurement.grn": "PASSED"
  },
  "scenarios": [
    {
      "id": "core.auth",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk47glv2000014m8n68ceogg",
              "email": "dpfv-test-1767801653200@test.hoperx.com",
              "phoneNumber": "9801653200",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "isActive": true
            },
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2dsdjIwMDAwMTRtOG42OGNlb2dnIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2NzgwMTY1MywiZXhwIjoxNzY3ODA1MjUzfQ.Oj0ij-KzX0B5UP2G2YkAxhf2YAxyAR8gNJlsyi-5cRI",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2dsdjIwMDAwMTRtOG42OGNlb2dnIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJjMWJmZjg1ZS1jZjIyLTRlYTgtOThlZi1hYzk3MGYyZmMxOWUiLCJpYXQiOjE3Njc4MDE2NTMsImV4cCI6MTc2ODQwNjQ1M30.Ep2foBmHM2GRRWmc2tWshTz5aElCNMInh3RfaebbLI8"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "User object with id, email, firstName",
              "actual": {
                "id": "cmk47glv2000014m8n68ceogg",
                "email": "dpfv-test-1767801653200@test.hoperx.com"
              },
              "message": "Signup must return complete user object",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT access token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid access token",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT refresh token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid refresh token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 642
        },
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk47glv2000014m8n68ceogg",
              "email": "dpfv-test-1767801653200@test.hoperx.com",
              "phoneNumber": "9801653200",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "signatureUrl": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "preferences": null,
              "createdAt": "2026-01-07T16:00:53.678Z",
              "updatedAt": "2026-01-07T16:00:53.678Z",
              "deletedAt": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2dsdjIwMDAwMTRtOG42OGNlb2dnIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2NzgwMTY1NCwiZXhwIjoxNzY3ODA1MjU0fQ.Z9Od4XrKjG8dcWMEII662S5P5ruKI9bNfneI3YbtN78",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2dsdjIwMDAwMTRtOG42OGNlb2dnIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJkMGUwNTE0NC01NTY5LTRiOWItYmNiMy00NDI5ZTE5YTJhZDQiLCJpYXQiOjE3Njc4MDE2NTQsImV4cCI6MTc2ODQwNjQ1NH0.z3gCbuLP0hDBNc0HuD6DT-igsRY8_UYSdQTWd3Uk5OU"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "cmk47glv2000014m8n68ceogg",
              "actual": "cmk47glv2000014m8n68ceogg",
              "message": "Login must return same user as signup",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": true,
              "actual": true,
              "message": "Logged in user must be active",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 1505
        },
        {
          "success": true,
          "data": {
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2dsdjIwMDAwMTRtOG42OGNlb2dnIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2NzgwMTY1NSwiZXhwIjoxNzY3ODA1MjU1fQ.xOeRoYSnVFWnsFxt5o8WVaaxC2YDXSbzTVZ_70SB7-M",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2dsdjIwMDAwMTRtOG42OGNlb2dnIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJhOGY3NDkyMC01YjM4LTRiOWYtYWNiZC1kMTEyNTU5MDUyNDEiLCJpYXQiOjE3Njc4MDE2NTUsImV4cCI6MTc2ODQwNjQ1NX0.1LMZYbF-SvXAjKEi1hJCPkh1pauIA1mvET3YrW7IvWM"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "New access token different from original",
              "actual": "New token",
              "message": "Token refresh must generate new access token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 382
        },
        {
          "success": true,
          "data": {
            "id": "cmk47glv2000014m8n68ceogg",
            "email": "dpfv-test-1767801653200@test.hoperx.com",
            "phoneNumber": "9801653200",
            "firstName": "DPFV",
            "lastName": "TestUser",
            "role": "ADMIN",
            "isActive": true,
            "pinHash": null,
            "pinAttempts": 0,
            "pinLockedUntil": null,
            "lastLoginAt": null,
            "signatureUrl": null,
            "faceDataUrl": null,
            "hourlyRate": null,
            "monthlyRate": null,
            "shiftId": null,
            "joiningDate": null,
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "employeeId": null,
            "preferences": null,
            "createdAt": "2026-01-07T16:00:53.678Z",
            "updatedAt": "2026-01-07T16:00:53.678Z",
            "deletedAt": null,
            "storeUsers": []
          },
          "assertions": [
            {
              "passed": true,
              "expected": "dpfv-test-1767801653200@test.hoperx.com",
              "actual": "dpfv-test-1767801653200@test.hoperx.com",
              "message": "Profile email must match user email",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "No password in profile",
              "actual": "No password",
              "message": "Profile must not expose password hash",
              "invariant": "AUTH-002"
            }
          ],
          "duration": 163
        }
      ],
      "duration": 2697
    },
    {
      "id": "reports.sales",
      "status": "FAILED",
      "failedAtStep": "reports.get-today",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk47gnyf000414m84fztmw74",
              "name": "Report Test Pharmacy 1767801655896",
              "displayName": "Report Pharma 1767801655896",
              "email": "report-store-1767801655896@test.hoperx.com",
              "phoneNumber": "9801655896",
              "whatsapp": null,
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "isDemo": false,
              "featureOverrides": null,
              "gstin": null,
              "dlNumber": null,
              "pan": null,
              "addressLine1": "Test Address",
              "addressLine2": null,
              "landmark": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "signatureUrl": null,
              "bankDetails": null,
              "termsAndConditions": null,
              "jurisdiction": null,
              "is24x7": false,
              "homeDelivery": false,
              "whatsappMode": null,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-07T16:00:56.391Z",
              "updatedAt": "2026-01-07T16:00:56.391Z",
              "deletedAt": null
            },
            "message": "Onboarding completed successfully",
            "patient": {
              "id": "cmk47gp46000814m8wqgwki1g",
              "storeId": "cmk47gnyf000414m84fztmw74",
              "firstName": "Test",
              "middleName": null,
              "lastName": "Patient",
              "dateOfBirth": null,
              "gender": "Male",
              "photoUrl": null,
              "phoneNumber": "9801655896",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "currentBalance": "0",
              "creditLimit": "0",
              "createdAt": "2026-01-07T16:00:57.894Z",
              "updatedAt": "2026-01-07T16:00:57.894Z",
              "deletedAt": null,
              "deletedBy": null
            }
          },
          "assertions": [],
          "duration": 2160
        },
        {
          "success": true,
          "data": {
            "id": "cmk47gyul000q14m8nryl15vy",
            "storeId": "cmk47gnyf000414m84fztmw74",
            "invoiceNumber": "INV1767801669956",
            "invoiceType": "RECEIPT",
            "status": "COMPLETED",
            "patientId": "cmk47gp46000814m8wqgwki1g",
            "dispenseForPatientId": null,
            "subtotal": "200",
            "discountAmount": "0",
            "taxAmount": "24",
            "roundOff": "0",
            "total": "224",
            "buyerGstin": null,
            "placeOfSupply": null,
            "isIgst": false,
            "cgstAmount": "0",
            "sgstAmount": "0",
            "igstAmount": "0",
            "cessAmount": "0",
            "taxableAmount": "0",
            "gstrCategory": null,
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk47gntv000314m8geunsk2n",
            "attachments": null,
            "prescriptionId": "cmk47gqa0000d14m8vkh3byu2",
            "dispenseId": "cmk47gul2000o14m85jm7d7mh",
            "balance": "0",
            "paymentStatus": "PAID",
            "createdAt": "2026-01-07T16:01:10.509Z",
            "updatedAt": "2026-01-07T16:01:10.509Z",
            "deletedAt": null,
            "items": [],
            "paymentSplits": []
          },
          "assertions": [],
          "duration": 16915
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Get sales report for today\" timed out after 5000ms",
            "stack": "Error: Step \"Get sales report for today\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Get sales report for today\" timed out after 5000ms",
        "stack": "Error: Step \"Get sales report for today\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 24081
    },
    {
      "id": "audit.gdpr",
      "status": "FAILED",
      "failedAtStep": "gdpr.export-json",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2314
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'user')",
              "message": "Assertion \"Export contains user profile\" threw: Cannot read properties of null (reading 'user')",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'stores')",
              "message": "Assertion \"Export contains stores\" threw: Cannot read properties of null (reading 'stores')",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 503,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 2818
    },
    {
      "id": "pos.draft",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk47h8pt001414m8m1otljnu",
              "name": "Draft Test Store 1767801682795",
              "displayName": "Draft Store",
              "email": "draft-store-1767801682795@test.hoperx.com",
              "phoneNumber": "9801682795",
              "whatsapp": null,
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "isDemo": false,
              "featureOverrides": null,
              "gstin": null,
              "dlNumber": null,
              "pan": null,
              "addressLine1": "Draft Lane",
              "addressLine2": null,
              "landmark": null,
              "city": "Mumbai",
              "state": "MH",
              "pinCode": "400001",
              "signatureUrl": null,
              "bankDetails": null,
              "termsAndConditions": null,
              "jurisdiction": null,
              "is24x7": false,
              "homeDelivery": false,
              "whatsappMode": null,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-07T16:01:23.298Z",
              "updatedAt": "2026-01-07T16:01:23.298Z",
              "deletedAt": null
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [],
          "duration": 1411
        },
        {
          "success": true,
          "data": {
            "id": "cmk47haym001814m8540l242y",
            "storeId": "cmk47h8pt001414m8m1otljnu",
            "draftNumber": "DRF1767801686205",
            "customerName": null,
            "customerPhone": null,
            "customerId": null,
            "items": "[{\"drugId\":\"cmk3ve3ke000y148qncqimrqr\",\"batchId\":\"cmk40xxi30010142aeea0ynen\",\"quantity\":1,\"mrp\":50,\"discount\":0}]",
            "dispenseFor": null,
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "createdBy": "cmk47h8l5001314m8rr0kzgng",
            "expiresAt": "2026-01-14T16:01:24.709Z",
            "createdAt": "2026-01-07T16:01:26.207Z",
            "updatedAt": "2026-01-07T16:01:26.207Z"
          },
          "assertions": [],
          "duration": 2165
        }
      ],
      "duration": 3576
    },
    {
      "id": "pos.refund",
      "status": "FAILED",
      "failedAtStep": "refund.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2345
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5001
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7347
    },
    {
      "id": "pos.credit",
      "status": "FAILED",
      "failedAtStep": "credit.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 4073
        },
        {
          "success": true,
          "data": {
            "expected": 0,
            "actual": 0
          },
          "assertions": [],
          "duration": 171
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5009
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 9255
    },
    {
      "id": "documents.invoice-pdf",
      "status": "FAILED",
      "failedAtStep": "pdf.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 3505
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5001
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 8507
    },
    {
      "id": "procurement.consolidated",
      "status": "FAILED",
      "failedAtStep": "consolidated.create-grn-1",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2229
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create First GRN\" timed out after 5000ms",
            "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create First GRN\" timed out after 5000ms",
        "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7232
    },
    {
      "id": "core.onboarding",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk47i040004314m8lw4wrcuo",
              "name": "DPFV Test Pharmacy 1767801718714",
              "displayName": "Test Pharma 1767801718714",
              "email": "store-1767801718714@test.hoperx.com",
              "phoneNumber": "9801718714",
              "whatsapp": null,
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "isDemo": false,
              "featureOverrides": null,
              "gstin": null,
              "dlNumber": null,
              "pan": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "landmark": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "signatureUrl": null,
              "bankDetails": null,
              "termsAndConditions": null,
              "jurisdiction": null,
              "is24x7": false,
              "homeDelivery": false,
              "whatsappMode": null,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-07T16:01:58.801Z",
              "updatedAt": "2026-01-07T16:01:58.801Z",
              "deletedAt": null
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Store with ID",
              "actual": "cmk47i040004314m8lw4wrcuo",
              "message": "Onboarding must create store with ID",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "Store name contains \"DPFV Test Pharmacy\"",
              "actual": "DPFV Test Pharmacy 1767801718714",
              "message": "Store name must match input",
              "invariant": "INV-008"
            }
          ],
          "duration": 1028
        },
        {
          "success": true,
          "data": {
            "userId": "cmk47hush003j14m8rlvtq199",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "isPrimary": true,
            "assignedAt": "2026-01-07T16:01:58.886Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "StoreUser association",
              "actual": "Found",
              "message": "User must be associated with store",
              "invariant": "INV-008"
            }
          ],
          "duration": 171
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i0ia004714m8a12wiozj",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "TRIAL",
            "activeVerticals": [],
            "comboBundle": null,
            "monthlyAmount": null,
            "billingCycle": "monthly",
            "trialEndsAt": "2026-01-21T16:01:59.313Z",
            "currentPeriodStart": "2026-01-07T16:01:59.313Z",
            "currentPeriodEnd": "2026-01-21T16:01:59.313Z",
            "autoRenew": true,
            "createdAt": "2026-01-07T16:01:59.315Z",
            "updatedAt": "2026-01-07T16:01:59.315Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Subscription exists",
              "actual": "Found",
              "message": "Store must have subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "TRIAL",
              "actual": "TRIAL",
              "message": "New store must have TRIAL subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "trialEndsAt and currentPeriodStart set",
              "actual": {
                "trialEndsAt": "2026-01-21T16:01:59.313Z",
                "currentPeriodStart": "2026-01-07T16:01:59.313Z"
              },
              "message": "Trial dates must be configured",
              "invariant": "INV-008"
            }
          ],
          "duration": 176
        },
        {
          "success": true,
          "data": {},
          "assertions": [
            {
              "passed": true,
              "expected": {
                "hasStore": true,
                "hasSubscription": true
              },
              "actual": {
                "hasStore": true,
                "hasSubscription": true
              },
              "message": "Onboarding must create Store + StoreUser + Subscription atomically",
              "invariant": "INV-008"
            }
          ],
          "duration": 688
        }
      ],
      "duration": 2063
    },
    {
      "id": "admin.pin",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "success": true,
            "message": "Admin PIN set up successfully"
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN setup API returned success",
              "expected": "Success",
              "actual": "Success",
              "invariant": "INV-013"
            }
          ],
          "duration": 761
        },
        {
          "success": true,
          "data": {
            "valid": true
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN verification passed",
              "expected": true,
              "actual": true,
              "invariant": "SEC-001"
            }
          ],
          "duration": 596
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "SEC-002"
            }
          ],
          "duration": 437
        }
      ],
      "duration": 1796
    },
    {
      "id": "audit.access",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk47i3a8004h14m83hb1okth",
              "email": "dpfv-audit-admin@test.hoperx.com",
              "phoneNumber": "9998887776",
              "firstName": "Audit",
              "lastName": "Admin",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "signatureUrl": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "preferences": null,
              "createdAt": "2026-01-07T16:02:02.913Z",
              "updatedAt": "2026-01-07T16:02:02.913Z",
              "deletedAt": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2kzYTgwMDRoMTRtODNoYjFva3RoIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2NzgwMTcyMywiZXhwIjoxNzY3ODA1MzIzfQ.OsVB7rgmIYiymJk7G1LGkQVpaRJfxcrWbgu9qBaZ1jo",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs0N2kzYTgwMDRoMTRtODNoYjFva3RoIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiI0YzZlYzJjYi1jYjExLTRkY2UtODc3MC1iZmNhNjBlODUzYmYiLCJpYXQiOjE3Njc4MDE3MjMsImV4cCI6MTc2ODQwNjUyM30.cnbMKepLec8AIuvtkwnIYLWWQPngk2R2NuPhSGBXy28"
          },
          "assertions": [],
          "duration": 1965
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i40j004j14m80jzrdcyh",
            "userId": "cmk47i3a8004h14m83hb1okth",
            "eventType": "login_success",
            "loginMethod": "EMAIL_PASSWORD",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier",
            "deviceInfo": null,
            "geolocation": null,
            "createdAt": "2026-01-07T16:02:03.859Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_success",
              "actual": "login_success",
              "message": "Latest log should be login_success",
              "invariant": "AUDIT-001"
            },
            {
              "passed": true,
              "expected": "IP Address",
              "actual": "127.0.0.1",
              "message": "IP address must be recorded",
              "invariant": "AUDIT-002"
            }
          ],
          "duration": 272
        },
        {
          "success": true,
          "data": {
            "error": "Unauthorized"
          },
          "assertions": [],
          "duration": 1031
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i4y6004l14m8eyw1irgk",
            "userId": "cmk47i3a8004h14m83hb1okth",
            "eventType": "login_failure",
            "loginMethod": "Password",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier-Fail",
            "deviceInfo": null,
            "geolocation": null,
            "createdAt": "2026-01-07T16:02:05.071Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_failure",
              "actual": "login_failure",
              "message": "Latest log should be login_failure",
              "invariant": "AUDIT-001"
            }
          ],
          "duration": 192
        }
      ],
      "duration": 3460
    },
    {
      "id": "communication.email",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47i5tn004n14m8go6riyhc",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "email": "test@hoperx.com",
            "provider": "GMAIL",
            "authMethod": "OAUTH",
            "smtpHost": null,
            "smtpPort": null,
            "smtpUser": null,
            "smtpPasswordEncrypted": null,
            "useTLS": true,
            "gmailRefreshToken": "mock_refresh",
            "gmailAccessToken": "mock_token",
            "gmailTokenExpiry": "2026-01-07T17:02:06.201Z",
            "oauthConnectedAt": null,
            "isPrimary": true,
            "isVerified": true,
            "isActive": true,
            "lastTestedAt": null,
            "createdAt": "2026-01-07T16:02:06.203Z",
            "updatedAt": "2026-01-07T16:02:06.203Z",
            "store": {
              "id": "cmk47i040004314m8lw4wrcuo",
              "name": "DPFV Test Pharmacy 1767801718714",
              "email": "store-1767801718714@test.hoperx.com"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email account available",
              "expected": "Account ID",
              "actual": "cmk47i5tn004n14m8go6riyhc",
              "invariant": "DATA-001"
            }
          ],
          "duration": 882
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i6mv004p14m87n8vb4qf",
            "emailAccountId": "cmk47i5tn004n14m8go6riyhc",
            "to": [
              "recipient@hoperx.com"
            ],
            "cc": [],
            "bcc": [],
            "subject": "DPFV Test Email 1767801726914",
            "bodyHtml": "<p>Test Body</p>",
            "attachments": null,
            "status": "FAILED",
            "errorMessage": "Gmail not connected or token expired. Please reconnect.",
            "sentBy": "cmk47i3a8004h14m83hb1okth",
            "contextType": null,
            "contextId": null,
            "createdAt": "2026-01-07T16:02:07.255Z",
            "sentAt": null,
            "emailAccount": {
              "id": "cmk47i5tn004n14m8go6riyhc",
              "email": "test@hoperx.com",
              "provider": "GMAIL",
              "isActive": true
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email attempt logged",
              "expected": "Log entry",
              "actual": "Found",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": true,
              "message": "Log status resolved (SENT/FAILED)",
              "expected": "SENT/FAILED",
              "actual": "FAILED",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 1630
        }
      ],
      "duration": 2513
    },
    {
      "id": "communication.whatsapp",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "messageId": "wa_1767801728545"
          },
          "assertions": [],
          "duration": 0
        }
      ],
      "duration": 0
    },
    {
      "id": "pos.quick-sale",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47i81b004t14m8lfw1geni",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "drugId": "cmk47i7rt004r14m806zpuzpl",
            "batchNumber": "DPFV-1767801728898",
            "expiryDate": "2027-01-07T16:02:08.898Z",
            "quantityInStock": 100,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-07T16:02:09.072Z",
            "updatedAt": "2026-01-07T16:02:09.072Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk47i7rt004r14m806zpuzpl",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCodeId": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-07T16:02:08.729Z",
              "updatedAt": "2026-01-07T16:02:08.729Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "> 0",
              "actual": 100,
              "message": "Test batch must have positive stock",
              "invariant": "INV-001"
            },
            {
              "passed": true,
              "expected": "Future expiry date",
              "actual": "2027-01-07T16:02:08.898Z",
              "message": "Test batch must not be expired",
              "invariant": "INV-001"
            }
          ],
          "duration": 1120
        },
        {
          "success": true,
          "data": {
            "id": "cmk47ihr5005d14m82pjxlbxe",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "invoiceNumber": "INV1767801741067",
            "invoiceType": "RECEIPT",
            "status": "COMPLETED",
            "patientId": "cmk47i8hw004v14m86etar8lb",
            "dispenseForPatientId": null,
            "subtotal": "237.5",
            "discountAmount": "0",
            "taxAmount": "28.5",
            "roundOff": "0",
            "total": "266",
            "buyerGstin": null,
            "placeOfSupply": null,
            "isIgst": false,
            "cgstAmount": "0",
            "sgstAmount": "0",
            "igstAmount": "0",
            "cessAmount": "0",
            "taxableAmount": "0",
            "gstrCategory": null,
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk47i3a8004h14m83hb1okth",
            "attachments": null,
            "prescriptionId": "cmk47i8tp004w14m8h8by778z",
            "dispenseId": "cmk47id8v005b14m8xwrok4yd",
            "balance": "0",
            "paymentStatus": "PAID",
            "createdAt": "2026-01-07T16:02:21.665Z",
            "updatedAt": "2026-01-07T16:02:21.665Z",
            "deletedAt": null,
            "items": [],
            "paymentSplits": []
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Sale with ID",
              "actual": "cmk47ihr5005d14m82pjxlbxe",
              "message": "Sale must be created with ID",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "expected": "Invoice number present",
              "actual": "INV1767801741067",
              "message": "Invoice number must be generated",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "expected": 266,
              "actual": 266,
              "message": "Sum of payment splits must equal sale total",
              "invariant": "INV-002"
            }
          ],
          "duration": 17216
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i81b004t14m8lfw1geni",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "drugId": "cmk47i7rt004r14m806zpuzpl",
            "batchNumber": "DPFV-1767801728898",
            "expiryDate": "2027-01-07T16:02:08.898Z",
            "quantityInStock": 90,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-07T16:02:09.072Z",
            "updatedAt": "2026-01-07T16:02:22.518Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk47i7rt004r14m806zpuzpl",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCodeId": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-07T16:02:08.729Z",
              "updatedAt": "2026-01-07T16:02:08.729Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": 90,
              "actual": 90,
              "message": "Stock must be deducted by exact sold quantity",
              "invariant": "INV-001"
            },
            {
              "passed": true,
              "expected": ">= 0",
              "actual": 90,
              "message": "Stock quantity must never be negative",
              "invariant": "INV-001"
            }
          ],
          "duration": 340
        },
        {
          "success": true,
          "data": {
            "id": "cmk47ihr5005d14m82pjxlbxe",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "invoiceNumber": "INV1767801741067",
            "invoiceType": "RECEIPT",
            "status": "COMPLETED",
            "patientId": "cmk47i8hw004v14m86etar8lb",
            "dispenseForPatientId": null,
            "subtotal": "237.5",
            "discountAmount": "0",
            "taxAmount": "28.5",
            "roundOff": "0",
            "total": "266",
            "buyerGstin": null,
            "placeOfSupply": null,
            "isIgst": false,
            "cgstAmount": "0",
            "sgstAmount": "0",
            "igstAmount": "0",
            "cessAmount": "0",
            "taxableAmount": "0",
            "gstrCategory": null,
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk47i3a8004h14m83hb1okth",
            "attachments": null,
            "prescriptionId": "cmk47i8tp004w14m8h8by778z",
            "dispenseId": "cmk47id8v005b14m8xwrok4yd",
            "balance": "0",
            "paymentStatus": "PAID",
            "createdAt": "2026-01-07T16:02:21.665Z",
            "updatedAt": "2026-01-07T16:02:21.665Z",
            "deletedAt": null,
            "patient": {
              "id": "cmk47i8hw004v14m86etar8lb",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "firstName": "Walk-in",
              "middleName": null,
              "lastName": "Customer",
              "dateOfBirth": null,
              "gender": null,
              "photoUrl": null,
              "phoneNumber": "WALKIN-1767801729666",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "currentBalance": "0",
              "creditLimit": "0",
              "createdAt": "2026-01-07T16:02:09.667Z",
              "updatedAt": "2026-01-07T16:02:09.667Z",
              "deletedAt": null,
              "deletedBy": null
            },
            "dispenseForPatient": null,
            "store": {
              "id": "cmk47i040004314m8lw4wrcuo",
              "name": "DPFV Test Pharmacy 1767801718714",
              "displayName": "Test Pharma 1767801718714",
              "email": "store-1767801718714@test.hoperx.com",
              "phoneNumber": "9801718714",
              "whatsapp": null,
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "isDemo": false,
              "featureOverrides": null,
              "gstin": null,
              "dlNumber": null,
              "pan": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "landmark": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "signatureUrl": null,
              "bankDetails": null,
              "termsAndConditions": null,
              "jurisdiction": null,
              "is24x7": false,
              "homeDelivery": false,
              "whatsappMode": null,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-07T16:01:58.801Z",
              "updatedAt": "2026-01-07T16:01:58.801Z",
              "deletedAt": null,
              "settings": null
            },
            "items": [
              {
                "id": "cmk47ihvz005e14m8q6zazl8c",
                "saleId": "cmk47ihr5005d14m82pjxlbxe",
                "drugId": "cmk47i7rt004r14m806zpuzpl",
                "batchId": "cmk47i81b004t14m8lfw1geni",
                "quantity": 10,
                "mrp": "25",
                "discount": "5",
                "gstRate": "12",
                "lineTotal": "266",
                "hsnCode": null,
                "taxSlabId": null,
                "taxableAmount": "0",
                "cgstAmount": "0",
                "sgstAmount": "0",
                "igstAmount": "0",
                "cessAmount": "0",
                "drug": {
                  "id": "cmk47i7rt004r14m806zpuzpl",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "rxcui": null,
                  "name": "Paracetamol 500mg",
                  "genericName": "Paracetamol 500mg",
                  "strength": null,
                  "form": "Tablet",
                  "manufacturer": null,
                  "schedule": null,
                  "hsnCodeId": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-07T16:02:08.729Z",
                  "updatedAt": "2026-01-07T16:02:08.729Z"
                },
                "batch": {
                  "id": "cmk47i81b004t14m8lfw1geni",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "drugId": "cmk47i7rt004r14m806zpuzpl",
                  "batchNumber": "DPFV-1767801728898",
                  "expiryDate": "2027-01-07T16:02:08.898Z",
                  "quantityInStock": 90,
                  "mrp": "25",
                  "purchasePrice": "20",
                  "supplierId": null,
                  "location": null,
                  "createdAt": "2026-01-07T16:02:09.072Z",
                  "updatedAt": "2026-01-07T16:02:22.518Z",
                  "deletedAt": null
                }
              }
            ],
            "paymentSplits": [
              {
                "id": "cmk47ihvz005f14m8zgn3dz5m",
                "saleId": "cmk47ihr5005d14m82pjxlbxe",
                "paymentMethod": "CASH",
                "amount": "266",
                "cardLast4": null,
                "cardBrand": null,
                "cardAuthCode": null,
                "upiTransactionId": null,
                "upiVpa": null,
                "walletProvider": null,
                "walletTxnId": null,
                "createdAt": "2026-01-07T16:02:21.839Z"
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "expected": {
                "drugId": "cmk47i7rt004r14m806zpuzpl",
                "quantity": 10
              },
              "actual": [
                {
                  "drugId": "cmk47i7rt004r14m806zpuzpl",
                  "qty": 10
                }
              ],
              "message": "Sale items must match what was in cart",
              "invariant": "SALE-001"
            }
          ],
          "duration": 936
        }
      ],
      "duration": 19612
    },
    {
      "id": "patients.create",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47imwa005n14m87qq8g4b9",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "firstName": "John",
            "middleName": null,
            "lastName": "Doe",
            "dateOfBirth": "1990-01-15T00:00:00.000Z",
            "gender": "MALE",
            "photoUrl": null,
            "phoneNumber": "9801748158",
            "email": "john.doe.1767801748158@test.com",
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "currentBalance": "0",
            "creditLimit": "0",
            "createdAt": "2026-01-07T16:02:28.330Z",
            "updatedAt": "2026-01-07T16:02:28.330Z",
            "deletedAt": null,
            "deletedBy": null
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must be created",
              "expected": "Patient object",
              "actual": "Created",
              "invariant": "DATA-001"
            }
          ],
          "duration": 345
        },
        {
          "success": true,
          "data": {
            "patient": {
              "id": "cmk47imwa005n14m87qq8g4b9",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9801748158",
              "email": "john.doe.1767801748158@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "currentBalance": "0",
              "creditLimit": "0",
              "createdAt": "2026-01-07T16:02:28.330Z",
              "updatedAt": "2026-01-07T16:02:28.330Z",
              "deletedAt": null,
              "deletedBy": null
            },
            "issues": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient data is valid",
              "expected": "Valid data",
              "actual": "Valid data",
              "invariant": "DATA-002"
            }
          ],
          "duration": 0
        },
        {
          "success": true,
          "data": [],
          "assertions": [
            {
              "passed": true,
              "message": "Ledger check passed",
              "expected": "Ledger object or null",
              "actual": "Found",
              "invariant": "FIN-005"
            }
          ],
          "duration": 171
        }
      ],
      "duration": 517
    },
    {
      "id": "clinical.prescription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47imwa005n14m87qq8g4b9",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "firstName": "John",
            "middleName": null,
            "lastName": "Doe",
            "dateOfBirth": "1990-01-15T00:00:00.000Z",
            "gender": "MALE",
            "photoUrl": null,
            "phoneNumber": "9801748158",
            "email": "john.doe.1767801748158@test.com",
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "currentBalance": "0",
            "creditLimit": "0",
            "createdAt": "2026-01-07T16:02:28.330Z",
            "updatedAt": "2026-01-07T16:02:28.330Z",
            "deletedAt": null,
            "deletedBy": null
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must exist with ID",
              "expected": "Valid ID",
              "actual": "cmk47imwa005n14m87qq8g4b9",
              "invariant": "DATA-001"
            }
          ],
          "duration": 173
        },
        {
          "success": true,
          "data": {
            "id": "cmk47inao005p14m8l6tqol5p",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "rxcui": null,
            "name": "DPFV Test Drug 1767801748847",
            "genericName": "Test Generic",
            "strength": "500mg",
            "form": "Tablet",
            "manufacturer": "Test Pharma",
            "schedule": null,
            "hsnCodeId": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-07T16:02:28.849Z",
            "updatedAt": "2026-01-07T16:02:28.849Z"
          },
          "assertions": [],
          "duration": 172
        },
        {
          "success": true,
          "data": {
            "id": "cmk47ink8005q14m8ug9quuh7",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "prescriptionNumber": "RX000002",
            "patientId": "cmk47imwa005n14m87qq8g4b9",
            "prescriberId": null,
            "issueDate": "2026-01-07T16:02:29.191Z",
            "expiryDate": "2026-07-07T16:02:29.019Z",
            "totalRefills": 3,
            "status": "DRAFT",
            "type": "REGULAR",
            "source": "manual",
            "priority": "Normal",
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "uploadedImages": [],
            "ocrText": null,
            "ocrConfidence": null,
            "reminderSent": null,
            "nextRefillDue": null,
            "notes": null,
            "createdAt": "2026-01-07T16:02:29.192Z",
            "updatedAt": "2026-01-07T16:02:29.192Z",
            "deletedAt": null,
            "patient": {
              "id": "cmk47imwa005n14m87qq8g4b9",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9801748158",
              "email": "john.doe.1767801748158@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "currentBalance": "0",
              "creditLimit": "0",
              "createdAt": "2026-01-07T16:02:28.330Z",
              "updatedAt": "2026-01-07T16:02:28.330Z",
              "deletedAt": null,
              "deletedBy": null
            },
            "prescriber": null,
            "store": {
              "id": "cmk47i040004314m8lw4wrcuo",
              "name": "DPFV Test Pharmacy 1767801718714",
              "displayName": "Test Pharma 1767801718714",
              "email": "store-1767801718714@test.hoperx.com",
              "phoneNumber": "9801718714",
              "whatsapp": null,
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "isDemo": false,
              "featureOverrides": null,
              "gstin": null,
              "dlNumber": null,
              "pan": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "landmark": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "signatureUrl": null,
              "bankDetails": null,
              "termsAndConditions": null,
              "jurisdiction": null,
              "is24x7": false,
              "homeDelivery": false,
              "whatsappMode": null,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-07T16:01:58.801Z",
              "updatedAt": "2026-01-07T16:01:58.801Z",
              "deletedAt": null
            },
            "versions": [
              {
                "id": "cmk47intu005s14m8ub9iwkq1",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk47i3a8004h14m83hb1okth",
                "createdAt": "2026-01-07T16:02:29.539Z",
                "items": [
                  {
                    "id": "cmk47intv005u14m8bf3zbktc",
                    "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                    "drugId": "cmk47inao005p14m8l6tqol5p",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk47inao005p14m8l6tqol5p",
                      "storeId": "cmk47i040004314m8lw4wrcuo",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767801748847",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCodeId": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-07T16:02:28.849Z",
                      "updatedAt": "2026-01-07T16:02:28.849Z"
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk47io0y005v14m82m1syapv",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              },
              {
                "id": "cmk47io0y005w14m8doyq20y4",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              },
              {
                "id": "cmk47io0y005x14m8lz10v7fx",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              },
              {
                "id": "cmk47io0y005y14m8vamch8n6",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk47intv005u14m8bf3zbktc",
                "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                "drugId": "cmk47inao005p14m8l6tqol5p",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk47inao005p14m8l6tqol5p",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767801748847",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCodeId": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-07T16:02:28.849Z",
                  "updatedAt": "2026-01-07T16:02:28.849Z"
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk47io5o006014m8iodafp8i",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "userId": "cmk47i3a8004h14m83hb1okth",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk47ink8005q14m8ug9quuh7",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-07T16:02:29.964Z",
                "user": {
                  "id": "cmk47i3a8004h14m83hb1okth",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Prescription must be created",
              "expected": "Prescription object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Prescription status should be DRAFT",
              "invariant": "RX-001"
            }
          ],
          "duration": 2308
        },
        {
          "success": true,
          "data": {
            "id": "cmk47ink8005q14m8ug9quuh7",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "prescriptionNumber": "RX000002",
            "patientId": "cmk47imwa005n14m87qq8g4b9",
            "prescriberId": null,
            "issueDate": "2026-01-07T16:02:29.191Z",
            "expiryDate": "2026-07-07T16:02:29.019Z",
            "totalRefills": 3,
            "status": "ACTIVE",
            "type": "REGULAR",
            "source": "manual",
            "priority": "Normal",
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "uploadedImages": [],
            "ocrText": null,
            "ocrConfidence": null,
            "reminderSent": null,
            "nextRefillDue": null,
            "notes": null,
            "createdAt": "2026-01-07T16:02:29.192Z",
            "updatedAt": "2026-01-07T16:02:31.413Z",
            "deletedAt": null,
            "patient": {
              "id": "cmk47imwa005n14m87qq8g4b9",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9801748158",
              "email": "john.doe.1767801748158@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "currentBalance": "0",
              "creditLimit": "0",
              "createdAt": "2026-01-07T16:02:28.330Z",
              "updatedAt": "2026-01-07T16:02:28.330Z",
              "deletedAt": null,
              "deletedBy": null
            },
            "prescriber": null,
            "store": {
              "id": "cmk47i040004314m8lw4wrcuo",
              "name": "DPFV Test Pharmacy 1767801718714",
              "displayName": "Test Pharma 1767801718714",
              "email": "store-1767801718714@test.hoperx.com",
              "phoneNumber": "9801718714",
              "whatsapp": null,
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "isDemo": false,
              "featureOverrides": null,
              "gstin": null,
              "dlNumber": null,
              "pan": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "landmark": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "signatureUrl": null,
              "bankDetails": null,
              "termsAndConditions": null,
              "jurisdiction": null,
              "is24x7": false,
              "homeDelivery": false,
              "whatsappMode": null,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-07T16:01:58.801Z",
              "updatedAt": "2026-01-07T16:01:58.801Z",
              "deletedAt": null
            },
            "versions": [
              {
                "id": "cmk47intu005s14m8ub9iwkq1",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk47i3a8004h14m83hb1okth",
                "createdAt": "2026-01-07T16:02:29.539Z",
                "items": [
                  {
                    "id": "cmk47intv005u14m8bf3zbktc",
                    "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                    "drugId": "cmk47inao005p14m8l6tqol5p",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk47inao005p14m8l6tqol5p",
                      "storeId": "cmk47i040004314m8lw4wrcuo",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767801748847",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCodeId": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-07T16:02:28.849Z",
                      "updatedAt": "2026-01-07T16:02:28.849Z"
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk47io0y005v14m82m1syapv",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              },
              {
                "id": "cmk47io0y005w14m8doyq20y4",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              },
              {
                "id": "cmk47io0y005x14m8lz10v7fx",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              },
              {
                "id": "cmk47io0y005y14m8vamch8n6",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk47intv005u14m8bf3zbktc",
                "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                "drugId": "cmk47inao005p14m8l6tqol5p",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk47inao005p14m8l6tqol5p",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767801748847",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCodeId": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-07T16:02:28.849Z",
                  "updatedAt": "2026-01-07T16:02:28.849Z"
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk47ipeq006214m8uir9xkcf",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "userId": "cmk47i3a8004h14m83hb1okth",
                "action": "PRESCRIPTION_ACTIVATED",
                "entityType": "Prescription",
                "entityId": "cmk47ink8005q14m8ug9quuh7",
                "changes": {
                  "newStatus": "ACTIVE",
                  "previousStatus": "DRAFT"
                },
                "ipAddress": null,
                "createdAt": "2026-01-07T16:02:31.587Z",
                "user": {
                  "id": "cmk47i3a8004h14m83hb1okth",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              },
              {
                "id": "cmk47io5o006014m8iodafp8i",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "userId": "cmk47i3a8004h14m83hb1okth",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk47ink8005q14m8ug9quuh7",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-07T16:02:29.964Z",
                "user": {
                  "id": "cmk47i3a8004h14m83hb1okth",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "expected": "ACTIVE",
              "actual": "ACTIVE",
              "message": "Prescription status should be ACTIVE",
              "invariant": "RX-002"
            },
            {
              "passed": true,
              "message": "Total refills should be 3",
              "expected": 3,
              "actual": 3,
              "invariant": "RX-003"
            }
          ],
          "duration": 1374
        },
        {
          "success": true,
          "data": {
            "id": "cmk47io0y005v14m82m1syapv",
            "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
            "refillNumber": 0,
            "authorizedQty": 30,
            "dispensedQty": 0,
            "remainingQty": 30,
            "status": "AVAILABLE",
            "expiresAt": "2026-07-07T16:02:29.019Z",
            "notes": null,
            "createdAt": "2026-01-07T16:02:29.794Z",
            "updatedAt": "2026-01-07T16:02:29.794Z"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Refill must be available",
              "expected": "AVAILABLE",
              "actual": "AVAILABLE",
              "invariant": "RX-004"
            }
          ],
          "duration": 1018
        }
      ],
      "duration": 5045
    },
    {
      "id": "admin.roles",
      "status": "FAILED",
      "failedAtStep": "roles.create",
      "steps": [
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "message": "Role object must be returned",
              "expected": "Role",
              "actual": "Null",
              "invariant": "DATA-001"
            },
            {
              "passed": null,
              "message": "Custom role must not be built-in",
              "expected": false,
              "invariant": "INV-011"
            }
          ],
          "duration": 257,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 259
    },
    {
      "id": "admin.features",
      "status": "FAILED",
      "failedAtStep": "features.update",
      "steps": [
        {
          "success": true,
          "data": {
            "featureConfig": {
              "gst": "essential",
              "pos": "essential",
              "help": "essential",
              "team": "essential",
              "audit": "essential",
              "store": "essential",
              "claims": "optional",
              "engage": "essential",
              "orders": "essential",
              "finance": "essential",
              "reports": "essential",
              "dispense": "essential",
              "insights": "essential",
              "messages": "essential",
              "patients": "essential",
              "dashboard": "essential",
              "inventory": "essential",
              "knowledge": "essential",
              "suppliers": "essential",
              "multiStore": "hidden",
              "regulations": "essential",
              "integrations": "essential",
              "prescriptions": "essential"
            },
            "enabledSections": [
              "Operations",
              "Inventory & Supply",
              "Billing & Finance",
              "Analytics",
              "Communication",
              "Compliance",
              "Settings",
              "Support"
            ],
            "defaultPermissions": [
              "prescription.read",
              "prescription.create",
              "prescription.fulfill",
              "patient.read",
              "patient.create",
              "inventory.read",
              "po.read",
              "po.create",
              "sales.create",
              "sales.read",
              "communication.send",
              "marketing.loyalty"
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Feature config must exist",
              "expected": "Config object",
              "actual": "Found",
              "invariant": "DATA-001"
            }
          ],
          "duration": 341
        },
        {
          "success": false,
          "data": {
            "id": "cmk47i040004314m8lw4wrcuo",
            "businessType": "Retail Pharmacy",
            "featureOverrides": {
              "pos": "hidden"
            }
          },
          "assertions": [
            {
              "passed": false,
              "message": "POS should be hidden",
              "expected": "hidden",
              "actual": "undefined",
              "invariant": "CONF-001"
            }
          ],
          "duration": 263,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 606
    },
    {
      "id": "procurement.supplier",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47irx5006414m8v4tqezgr",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "name": "Alpha Pharma Distributors",
            "category": "Distributor",
            "status": "Active",
            "gstin": "27AABCU9603R1ZN",
            "dlNumber": null,
            "pan": null,
            "contactName": "Rahul Kumar",
            "phoneNumber": "9876543210",
            "email": "alpha@test.com",
            "whatsapp": null,
            "addressLine1": "Test Address 1",
            "addressLine2": null,
            "city": "Pune",
            "state": "Maharashtra",
            "pinCode": "411001",
            "paymentTerms": null,
            "creditLimit": null,
            "createdAt": "2026-01-07T16:02:34.842Z",
            "updatedAt": "2026-01-07T16:02:34.842Z",
            "deletedAt": null
          },
          "assertions": [
            {
              "passed": true,
              "message": "Supplier must have ID",
              "expected": "ID present",
              "actual": "cmk47irx5006414m8v4tqezgr",
              "invariant": "DATA-001"
            }
          ],
          "duration": 520
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "DATA-INTEGRITY"
            }
          ],
          "duration": 86
        }
      ],
      "duration": 606
    },
    {
      "id": "billing.subscription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk47i0ia004714m8a12wiozj",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "TRIAL",
              "activeVerticals": [],
              "comboBundle": null,
              "monthlyAmount": null,
              "billingCycle": "monthly",
              "trialEndsAt": "2026-01-21T16:01:59.313Z",
              "currentPeriodStart": "2026-01-07T16:01:59.313Z",
              "currentPeriodEnd": "2026-01-21T16:01:59.313Z",
              "autoRenew": true,
              "createdAt": "2026-01-07T16:01:59.315Z",
              "updatedAt": "2026-01-07T16:01:59.315Z",
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan is TRIAL",
              "expected": "TRIAL",
              "actual": "free_trial",
              "invariant": "SUB-001"
            }
          ],
          "duration": 513
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i0ia004714m8a12wiozj",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "EXPIRED",
            "activeVerticals": [],
            "comboBundle": null,
            "monthlyAmount": null,
            "billingCycle": "monthly",
            "trialEndsAt": "2026-01-21T16:01:59.313Z",
            "currentPeriodStart": "2026-01-07T16:01:59.313Z",
            "currentPeriodEnd": "2026-01-06T16:02:35.874Z",
            "autoRenew": true,
            "createdAt": "2026-01-07T16:01:59.315Z",
            "updatedAt": "2026-01-07T16:02:35.876Z",
            "plan": {
              "id": "cmiudhheo000014skldx27kfs",
              "name": "free_trial",
              "displayName": "Free Trial",
              "description": "14-day free trial with limited features",
              "price": "0",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 50,
              "prescriptionLimit": 100,
              "storageLimit": 100,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.160Z",
              "updatedAt": "2025-12-06T14:12:08.160Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "End date is in past",
              "expected": "Past Date",
              "actual": "2026-01-06T16:02:35.874Z",
              "invariant": "SUB-002"
            }
          ],
          "duration": 938
        },
        {
          "success": true,
          "data": {
            "isActive": false,
            "subscription": {
              "id": "cmk47i0ia004714m8a12wiozj",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "EXPIRED",
              "activeVerticals": [],
              "comboBundle": null,
              "monthlyAmount": null,
              "billingCycle": "monthly",
              "trialEndsAt": "2026-01-21T16:01:59.313Z",
              "currentPeriodStart": "2026-01-07T16:01:59.313Z",
              "currentPeriodEnd": "2026-01-06T16:02:35.874Z",
              "autoRenew": true,
              "createdAt": "2026-01-07T16:01:59.315Z",
              "updatedAt": "2026-01-07T16:02:35.876Z",
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription is inactive",
              "expected": false,
              "actual": false,
              "invariant": "SUB-003"
            }
          ],
          "duration": 346
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i0ia004714m8a12wiozj",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "planId": "cmiudhi1f000114sknt4k3mqx",
            "status": "ACTIVE",
            "activeVerticals": [],
            "comboBundle": null,
            "monthlyAmount": null,
            "billingCycle": "monthly",
            "trialEndsAt": null,
            "currentPeriodStart": "2026-01-07T16:02:37.501Z",
            "currentPeriodEnd": "2026-02-07T16:02:37.501Z",
            "autoRenew": true,
            "createdAt": "2026-01-07T16:01:59.315Z",
            "updatedAt": "2026-01-07T16:02:37.502Z",
            "plan": {
              "id": "cmiudhi1f000114sknt4k3mqx",
              "name": "basic",
              "displayName": "Basic Plan",
              "description": "Perfect for small pharmacies",
              "price": "999",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 500,
              "prescriptionLimit": null,
              "storageLimit": 1000,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.980Z",
              "updatedAt": "2025-12-06T14:12:08.980Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan upgraded to Basic",
              "expected": "basic",
              "actual": "basic",
              "invariant": "SUB-004"
            }
          ],
          "duration": 1193
        },
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk47i0ia004714m8a12wiozj",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "planId": "cmiudhi1f000114sknt4k3mqx",
              "status": "ACTIVE",
              "activeVerticals": [],
              "comboBundle": null,
              "monthlyAmount": null,
              "billingCycle": "monthly",
              "trialEndsAt": null,
              "currentPeriodStart": "2026-01-07T16:02:37.501Z",
              "currentPeriodEnd": "2026-02-07T16:02:37.501Z",
              "autoRenew": true,
              "createdAt": "2026-01-07T16:01:59.315Z",
              "updatedAt": "2026-01-07T16:02:37.502Z",
              "plan": {
                "id": "cmiudhi1f000114sknt4k3mqx",
                "name": "basic",
                "displayName": "Basic Plan",
                "description": "Perfect for small pharmacies",
                "price": "999",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 500,
                "prescriptionLimit": null,
                "storageLimit": 1000,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.980Z",
                "updatedAt": "2025-12-06T14:12:08.980Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription restored to active",
              "expected": true,
              "actual": true,
              "invariant": "SUB-005"
            }
          ],
          "duration": 425
        }
      ],
      "duration": 3416
    },
    {
      "id": "clinical.dispense",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47iuyn006614m89mox8hdr",
            "refillId": "cmk47io0y005v14m82m1syapv",
            "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
            "status": "QUEUED",
            "queuedAt": "2026-01-07T16:02:38.781Z",
            "verifyingAt": null,
            "fillingAt": null,
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk47i3a8004h14m83hb1okth",
            "verifiedBy": null,
            "filledBy": null,
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": null,
            "cancellationReason": null,
            "createdAt": "2026-01-07T16:02:38.783Z",
            "updatedAt": "2026-01-07T16:02:38.783Z",
            "refill": {
              "id": "cmk47io0y005v14m82m1syapv",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-07T16:02:29.019Z",
              "notes": null,
              "createdAt": "2026-01-07T16:02:29.794Z",
              "updatedAt": "2026-01-07T16:02:29.794Z",
              "prescription": {
                "id": "cmk47ink8005q14m8ug9quuh7",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "prescriptionNumber": "RX000002",
                "patientId": "cmk47imwa005n14m87qq8g4b9",
                "prescriberId": null,
                "issueDate": "2026-01-07T16:02:29.191Z",
                "expiryDate": "2026-07-07T16:02:29.019Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "type": "REGULAR",
                "source": "manual",
                "priority": "Normal",
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "uploadedImages": [],
                "ocrText": null,
                "ocrConfidence": null,
                "reminderSent": null,
                "nextRefillDue": null,
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.192Z",
                "updatedAt": "2026-01-07T16:02:31.413Z",
                "deletedAt": null,
                "patient": {
                  "id": "cmk47imwa005n14m87qq8g4b9",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9801748158",
                  "email": "john.doe.1767801748158@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "currentBalance": "0",
                  "creditLimit": "0",
                  "createdAt": "2026-01-07T16:02:28.330Z",
                  "updatedAt": "2026-01-07T16:02:28.330Z",
                  "deletedAt": null,
                  "deletedBy": null
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk47intu005s14m8ub9iwkq1",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk47i3a8004h14m83hb1okth",
              "createdAt": "2026-01-07T16:02:29.539Z",
              "items": [
                {
                  "id": "cmk47intv005u14m8bf3zbktc",
                  "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                  "drugId": "cmk47inao005p14m8l6tqol5p",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk47inao005p14m8l6tqol5p",
                    "storeId": "cmk47i040004314m8lw4wrcuo",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767801748847",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCodeId": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-07T16:02:28.849Z",
                    "updatedAt": "2026-01-07T16:02:28.849Z"
                  },
                  "batch": null
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense must be created",
              "expected": "Dispense object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "QUEUED",
              "actual": "QUEUED",
              "message": "Dispense status should be QUEUED",
              "invariant": "DISP-001"
            }
          ],
          "duration": 1113
        },
        {
          "success": true,
          "data": {
            "id": "cmk47iuyn006614m89mox8hdr",
            "refillId": "cmk47io0y005v14m82m1syapv",
            "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
            "status": "FILLING",
            "queuedAt": "2026-01-07T16:02:38.781Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-07T16:02:39.720Z",
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk47i3a8004h14m83hb1okth",
            "verifiedBy": null,
            "filledBy": "cmk47i3a8004h14m83hb1okth",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to FILLING",
            "cancellationReason": null,
            "createdAt": "2026-01-07T16:02:38.783Z",
            "updatedAt": "2026-01-07T16:02:39.722Z",
            "refill": {
              "id": "cmk47io0y005v14m82m1syapv",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-07T16:02:29.019Z",
              "notes": null,
              "createdAt": "2026-01-07T16:02:29.794Z",
              "updatedAt": "2026-01-07T16:02:29.794Z",
              "prescription": {
                "id": "cmk47ink8005q14m8ug9quuh7",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "prescriptionNumber": "RX000002",
                "patientId": "cmk47imwa005n14m87qq8g4b9",
                "prescriberId": null,
                "issueDate": "2026-01-07T16:02:29.191Z",
                "expiryDate": "2026-07-07T16:02:29.019Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "type": "REGULAR",
                "source": "manual",
                "priority": "Normal",
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "uploadedImages": [],
                "ocrText": null,
                "ocrConfidence": null,
                "reminderSent": null,
                "nextRefillDue": null,
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.192Z",
                "updatedAt": "2026-01-07T16:02:31.413Z",
                "deletedAt": null,
                "patient": {
                  "id": "cmk47imwa005n14m87qq8g4b9",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9801748158",
                  "email": "john.doe.1767801748158@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "currentBalance": "0",
                  "creditLimit": "0",
                  "createdAt": "2026-01-07T16:02:28.330Z",
                  "updatedAt": "2026-01-07T16:02:28.330Z",
                  "deletedAt": null,
                  "deletedBy": null
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk47intu005s14m8ub9iwkq1",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk47i3a8004h14m83hb1okth",
              "createdAt": "2026-01-07T16:02:29.539Z",
              "items": [
                {
                  "id": "cmk47intv005u14m8bf3zbktc",
                  "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                  "drugId": "cmk47inao005p14m8l6tqol5p",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk47inao005p14m8l6tqol5p",
                    "storeId": "cmk47i040004314m8lw4wrcuo",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767801748847",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCodeId": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-07T16:02:28.849Z",
                    "updatedAt": "2026-01-07T16:02:28.849Z"
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "FILLING",
              "actual": "FILLING",
              "message": "Dispense status should be FILLING",
              "invariant": "DISP-002"
            }
          ],
          "duration": 1405
        },
        {
          "success": true,
          "data": {
            "id": "cmk47iuyn006614m89mox8hdr",
            "refillId": "cmk47io0y005v14m82m1syapv",
            "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
            "status": "READY",
            "queuedAt": "2026-01-07T16:02:38.781Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-07T16:02:39.720Z",
            "checkingAt": null,
            "readyAt": "2026-01-07T16:02:41.125Z",
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk47i3a8004h14m83hb1okth",
            "verifiedBy": null,
            "filledBy": "cmk47i3a8004h14m83hb1okth",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to READY",
            "cancellationReason": null,
            "createdAt": "2026-01-07T16:02:38.783Z",
            "updatedAt": "2026-01-07T16:02:41.127Z",
            "refill": {
              "id": "cmk47io0y005v14m82m1syapv",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-07T16:02:29.019Z",
              "notes": null,
              "createdAt": "2026-01-07T16:02:29.794Z",
              "updatedAt": "2026-01-07T16:02:29.794Z",
              "prescription": {
                "id": "cmk47ink8005q14m8ug9quuh7",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "prescriptionNumber": "RX000002",
                "patientId": "cmk47imwa005n14m87qq8g4b9",
                "prescriberId": null,
                "issueDate": "2026-01-07T16:02:29.191Z",
                "expiryDate": "2026-07-07T16:02:29.019Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "type": "REGULAR",
                "source": "manual",
                "priority": "Normal",
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "uploadedImages": [],
                "ocrText": null,
                "ocrConfidence": null,
                "reminderSent": null,
                "nextRefillDue": null,
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.192Z",
                "updatedAt": "2026-01-07T16:02:31.413Z",
                "deletedAt": null,
                "patient": {
                  "id": "cmk47imwa005n14m87qq8g4b9",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9801748158",
                  "email": "john.doe.1767801748158@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "currentBalance": "0",
                  "creditLimit": "0",
                  "createdAt": "2026-01-07T16:02:28.330Z",
                  "updatedAt": "2026-01-07T16:02:28.330Z",
                  "deletedAt": null,
                  "deletedBy": null
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk47intu005s14m8ub9iwkq1",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk47i3a8004h14m83hb1okth",
              "createdAt": "2026-01-07T16:02:29.539Z",
              "items": [
                {
                  "id": "cmk47intv005u14m8bf3zbktc",
                  "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                  "drugId": "cmk47inao005p14m8l6tqol5p",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk47inao005p14m8l6tqol5p",
                    "storeId": "cmk47i040004314m8lw4wrcuo",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767801748847",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCodeId": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-07T16:02:28.849Z",
                    "updatedAt": "2026-01-07T16:02:28.849Z"
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "READY",
              "actual": "READY",
              "message": "Dispense status should be READY",
              "invariant": "DISP-003"
            }
          ],
          "duration": 1027
        },
        {
          "success": true,
          "data": [
            {
              "id": "cmk47iuyn006614m89mox8hdr",
              "refillId": "cmk47io0y005v14m82m1syapv",
              "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
              "status": "READY",
              "queuedAt": "2026-01-07T16:02:38.781Z",
              "verifyingAt": null,
              "fillingAt": "2026-01-07T16:02:39.720Z",
              "checkingAt": null,
              "readyAt": "2026-01-07T16:02:41.125Z",
              "completedAt": null,
              "cancelledAt": null,
              "queuedBy": "cmk47i3a8004h14m83hb1okth",
              "verifiedBy": null,
              "filledBy": "cmk47i3a8004h14m83hb1okth",
              "checkedBy": null,
              "dispensedBy": null,
              "quantityDispensed": null,
              "notes": "DPFV: Progressed to READY",
              "cancellationReason": null,
              "createdAt": "2026-01-07T16:02:38.783Z",
              "updatedAt": "2026-01-07T16:02:41.127Z",
              "refill": {
                "id": "cmk47io0y005v14m82m1syapv",
                "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-07T16:02:29.019Z",
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.794Z",
                "updatedAt": "2026-01-07T16:02:29.794Z",
                "prescription": {
                  "id": "cmk47ink8005q14m8ug9quuh7",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "prescriptionNumber": "RX000002",
                  "patientId": "cmk47imwa005n14m87qq8g4b9",
                  "prescriberId": null,
                  "issueDate": "2026-01-07T16:02:29.191Z",
                  "expiryDate": "2026-07-07T16:02:29.019Z",
                  "totalRefills": 3,
                  "status": "ACTIVE",
                  "type": "REGULAR",
                  "source": "manual",
                  "priority": "Normal",
                  "controlledFlag": false,
                  "eRxId": null,
                  "eRxMetadata": null,
                  "uploadedImages": [],
                  "ocrText": null,
                  "ocrConfidence": null,
                  "reminderSent": null,
                  "nextRefillDue": null,
                  "notes": null,
                  "createdAt": "2026-01-07T16:02:29.192Z",
                  "updatedAt": "2026-01-07T16:02:31.413Z",
                  "deletedAt": null,
                  "patient": {
                    "id": "cmk47imwa005n14m87qq8g4b9",
                    "storeId": "cmk47i040004314m8lw4wrcuo",
                    "firstName": "John",
                    "middleName": null,
                    "lastName": "Doe",
                    "dateOfBirth": "1990-01-15T00:00:00.000Z",
                    "gender": "MALE",
                    "photoUrl": null,
                    "phoneNumber": "9801748158",
                    "email": "john.doe.1767801748158@test.com",
                    "addressLine1": null,
                    "addressLine2": null,
                    "city": null,
                    "state": null,
                    "pinCode": null,
                    "bloodGroup": null,
                    "allergies": [],
                    "chronicConditions": [],
                    "emergencyContactName": null,
                    "emergencyContactPhone": null,
                    "currentBalance": "0",
                    "creditLimit": "0",
                    "createdAt": "2026-01-07T16:02:28.330Z",
                    "updatedAt": "2026-01-07T16:02:28.330Z",
                    "deletedAt": null,
                    "deletedBy": null
                  }
                }
              }
            }
          ],
          "assertions": [
            {
              "passed": true,
              "message": "Dispense visible",
              "expected": "Dispense in list",
              "actual": "Found",
              "invariant": "POS-001"
            }
          ],
          "duration": 429
        }
      ],
      "duration": 3974
    },
    {
      "id": "procurement.po",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47ixw7006814m84lnlx3a7",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "rxcui": null,
            "name": "PO Test Drug 1767801762582",
            "genericName": null,
            "strength": null,
            "form": null,
            "manufacturer": "Cipla",
            "schedule": null,
            "hsnCodeId": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-07T16:02:42.583Z",
            "updatedAt": "2026-01-07T16:02:42.583Z"
          },
          "assertions": [],
          "duration": 174
        },
        {
          "success": true,
          "data": {
            "id": "cmk47izh5006a14m8j7tbb9ja",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "supplierId": "cmk47irx5006414m8v4tqezgr",
            "poNumber": "PO202601764547",
            "status": "DRAFT",
            "orderDate": "2026-01-07T16:02:44.633Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "notes": null,
            "createdBy": "cmk47i3a8004h14m83hb1okth",
            "approvedBy": null,
            "approvedAt": null,
            "createdAt": "2026-01-07T16:02:44.633Z",
            "updatedAt": "2026-01-07T16:02:44.633Z",
            "deletedAt": null,
            "items": [
              {
                "id": "cmk47izqx006c14m8zdfdtb0y",
                "poId": "cmk47izh5006a14m8j7tbb9ja",
                "drugId": "cmk47ixw7006814m84lnlx3a7",
                "quantity": 100,
                "receivedQty": 0,
                "packSize": 1,
                "packUnit": "Strip",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "5600"
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "PO Total match",
              "expected": 5600,
              "actual": "5600",
              "invariant": "INV-007"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Initial status DRAFT",
              "invariant": "STATE-001"
            }
          ],
          "duration": 2490
        },
        {
          "success": true,
          "data": {
            "id": "cmk47izh5006a14m8j7tbb9ja",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "supplierId": "cmk47irx5006414m8v4tqezgr",
            "poNumber": "PO202601764547",
            "status": "APPROVED",
            "orderDate": "2026-01-07T16:02:44.633Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "notes": null,
            "createdBy": "cmk47i3a8004h14m83hb1okth",
            "approvedBy": "cmk47i3a8004h14m83hb1okth",
            "approvedAt": "2026-01-07T16:02:46.280Z",
            "createdAt": "2026-01-07T16:02:44.633Z",
            "updatedAt": "2026-01-07T16:02:46.281Z",
            "deletedAt": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "APPROVED",
              "actual": "APPROVED",
              "message": "Status -> APPROVED",
              "invariant": "STATE-002"
            }
          ],
          "duration": 1376
        },
        {
          "success": true,
          "data": {
            "id": "cmk47izh5006a14m8j7tbb9ja",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "supplierId": "cmk47irx5006414m8v4tqezgr",
            "poNumber": "PO202601764547",
            "status": "SENT",
            "orderDate": "2026-01-07T16:02:44.633Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "notes": null,
            "createdBy": "cmk47i3a8004h14m83hb1okth",
            "approvedBy": "cmk47i3a8004h14m83hb1okth",
            "approvedAt": "2026-01-07T16:02:46.280Z",
            "createdAt": "2026-01-07T16:02:44.633Z",
            "updatedAt": "2026-01-07T16:02:47.214Z",
            "deletedAt": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "SENT",
              "actual": "SENT",
              "message": "Status -> SENT",
              "invariant": "STATE-003"
            }
          ],
          "duration": 855
        }
      ],
      "duration": 4897
    },
    {
      "id": "pos.rx-sale",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47j95w006q14m820z4y059",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "invoiceNumber": "INV1767801776584",
            "invoiceType": "RECEIPT",
            "status": "COMPLETED",
            "patientId": "cmk47imwa005n14m87qq8g4b9",
            "dispenseForPatientId": null,
            "subtotal": "3000",
            "discountAmount": "0",
            "taxAmount": "360",
            "roundOff": "0",
            "total": "3360",
            "buyerGstin": null,
            "placeOfSupply": null,
            "isIgst": false,
            "cgstAmount": "0",
            "sgstAmount": "0",
            "igstAmount": "0",
            "cessAmount": "0",
            "taxableAmount": "0",
            "gstrCategory": null,
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk47i3a8004h14m83hb1okth",
            "attachments": null,
            "prescriptionId": "cmk47j1t0006d14m8kc360coi",
            "dispenseId": "cmk47j51m006o14m8i8u51kou",
            "balance": "0",
            "paymentStatus": "PAID",
            "createdAt": "2026-01-07T16:02:57.188Z",
            "updatedAt": "2026-01-07T16:02:57.188Z",
            "deletedAt": null,
            "items": [],
            "paymentSplits": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Sale must be created",
              "expected": "Sale object",
              "actual": "Created",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "message": "Invoice number generated",
              "expected": "Invoice number",
              "actual": "INV1767801776584",
              "invariant": "SALE-002"
            }
          ],
          "duration": 14520
        },
        {
          "success": true,
          "data": {
            "id": "cmk47iuyn006614m89mox8hdr",
            "refillId": "cmk47io0y005v14m82m1syapv",
            "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
            "status": "COMPLETED",
            "queuedAt": "2026-01-07T16:02:38.781Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-07T16:02:39.720Z",
            "checkingAt": null,
            "readyAt": "2026-01-07T16:02:41.125Z",
            "completedAt": "2026-01-07T16:03:01.999Z",
            "cancelledAt": null,
            "queuedBy": "cmk47i3a8004h14m83hb1okth",
            "verifiedBy": null,
            "filledBy": "cmk47i3a8004h14m83hb1okth",
            "checkedBy": null,
            "dispensedBy": "cmk47i3a8004h14m83hb1okth",
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to COMPLETED",
            "cancellationReason": null,
            "createdAt": "2026-01-07T16:02:38.783Z",
            "updatedAt": "2026-01-07T16:03:02.001Z",
            "refill": {
              "id": "cmk47io0y005v14m82m1syapv",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-07T16:02:29.019Z",
              "notes": null,
              "createdAt": "2026-01-07T16:02:29.794Z",
              "updatedAt": "2026-01-07T16:02:29.794Z",
              "prescription": {
                "id": "cmk47ink8005q14m8ug9quuh7",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "prescriptionNumber": "RX000002",
                "patientId": "cmk47imwa005n14m87qq8g4b9",
                "prescriberId": null,
                "issueDate": "2026-01-07T16:02:29.191Z",
                "expiryDate": "2026-07-07T16:02:29.019Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "type": "REGULAR",
                "source": "manual",
                "priority": "Normal",
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "uploadedImages": [],
                "ocrText": null,
                "ocrConfidence": null,
                "reminderSent": null,
                "nextRefillDue": null,
                "notes": null,
                "createdAt": "2026-01-07T16:02:29.192Z",
                "updatedAt": "2026-01-07T16:02:31.413Z",
                "deletedAt": null,
                "patient": {
                  "id": "cmk47imwa005n14m87qq8g4b9",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9801748158",
                  "email": "john.doe.1767801748158@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "currentBalance": "0",
                  "creditLimit": "0",
                  "createdAt": "2026-01-07T16:02:28.330Z",
                  "updatedAt": "2026-01-07T16:02:28.330Z",
                  "deletedAt": null,
                  "deletedBy": null
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk47intu005s14m8ub9iwkq1",
              "prescriptionId": "cmk47ink8005q14m8ug9quuh7",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk47i3a8004h14m83hb1okth",
              "createdAt": "2026-01-07T16:02:29.539Z",
              "items": [
                {
                  "id": "cmk47intv005u14m8bf3zbktc",
                  "prescriptionVersionId": "cmk47intu005s14m8ub9iwkq1",
                  "drugId": "cmk47inao005p14m8l6tqol5p",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk47inao005p14m8l6tqol5p",
                    "storeId": "cmk47i040004314m8lw4wrcuo",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767801748847",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCodeId": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-07T16:02:28.849Z",
                    "updatedAt": "2026-01-07T16:02:28.849Z"
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense status must be COMPLETED",
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "invariant": "DISP-004"
            }
          ],
          "duration": 940
        },
        {
          "success": true,
          "data": {
            "id": "cmk47i81b004t14m8lfw1geni",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "drugId": "cmk47i7rt004r14m806zpuzpl",
            "batchNumber": "DPFV-1767801728898",
            "expiryDate": "2027-01-07T16:02:08.898Z",
            "quantityInStock": 60,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-07T16:02:09.072Z",
            "updatedAt": "2026-01-07T16:02:58.040Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk47i7rt004r14m806zpuzpl",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCodeId": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-07T16:02:08.729Z",
              "updatedAt": "2026-01-07T16:02:08.729Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": ">= 0",
              "actual": 60,
              "message": "Stock quantity must never be negative",
              "invariant": "INV-001"
            }
          ],
          "duration": 340
        }
      ],
      "duration": 15803
    },
    {
      "id": "procurement.grn",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk47jfw7007014m8547s5l7a",
            "grnNumber": "GRN202601 785825 ",
            "poId": "cmk47izh5006a14m8j7tbb9ja",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "supplierId": "cmk47irx5006414m8v4tqezgr",
            "status": "DRAFT",
            "supplierInvoiceNo": null,
            "supplierInvoiceDate": null,
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-07T16:03:05.911Z",
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "notes": null,
            "completedAt": null,
            "createdAt": "2026-01-07T16:03:05.911Z",
            "updatedAt": "2026-01-07T16:03:05.911Z",
            "items": [
              {
                "id": "cmk47jg0w007114m8gnp5nzoq",
                "grnId": "cmk47jfw7007014m8547s5l7a",
                "poItemId": "cmk47izqx006c14m8zdfdtb0y",
                "drugId": "cmk47ixw7006814m84lnlx3a7",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "TBD",
                "expiryDate": null,
                "mrp": "0",
                "unitPrice": "50",
                "discountPercent": "0",
                "discountType": "BEFORE_GST",
                "gstPercent": "12",
                "lineTotal": "0",
                "location": null,
                "parentItemId": null,
                "isSplit": false,
                "drug": {
                  "id": "cmk47ixw7006814m84lnlx3a7",
                  "storeId": "cmk47i040004314m8lw4wrcuo",
                  "rxcui": null,
                  "name": "PO Test Drug 1767801762582",
                  "genericName": null,
                  "strength": null,
                  "form": null,
                  "manufacturer": "Cipla",
                  "schedule": null,
                  "hsnCodeId": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-07T16:02:42.583Z",
                  "updatedAt": "2026-01-07T16:02:42.583Z"
                }
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk47izh5006a14m8j7tbb9ja",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "supplierId": "cmk47irx5006414m8v4tqezgr",
              "poNumber": "PO202601764547",
              "status": "SENT",
              "orderDate": "2026-01-07T16:02:44.633Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "notes": null,
              "createdBy": "cmk47i3a8004h14m83hb1okth",
              "approvedBy": "cmk47i3a8004h14m83hb1okth",
              "approvedAt": "2026-01-07T16:02:46.280Z",
              "createdAt": "2026-01-07T16:02:44.633Z",
              "updatedAt": "2026-01-07T16:02:47.214Z",
              "deletedAt": null,
              "items": [
                {
                  "id": "cmk47izqx006c14m8zdfdtb0y",
                  "poId": "cmk47izh5006a14m8j7tbb9ja",
                  "drugId": "cmk47ixw7006814m84lnlx3a7",
                  "quantity": 100,
                  "receivedQty": 0,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600",
                  "drug": {
                    "id": "cmk47ixw7006814m84lnlx3a7",
                    "storeId": "cmk47i040004314m8lw4wrcuo",
                    "rxcui": null,
                    "name": "PO Test Drug 1767801762582",
                    "genericName": null,
                    "strength": null,
                    "form": null,
                    "manufacturer": "Cipla",
                    "schedule": null,
                    "hsnCodeId": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-07T16:02:42.583Z",
                    "updatedAt": "2026-01-07T16:02:42.583Z"
                  }
                }
              ],
              "supplier": {
                "id": "cmk47irx5006414m8v4tqezgr",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-07T16:02:34.842Z",
                "updatedAt": "2026-01-07T16:02:34.842Z",
                "deletedAt": null
              }
            },
            "attachments": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "GRN object created",
              "expected": "GRN ID",
              "actual": "cmk47jfw7007014m8547s5l7a",
              "invariant": "DATA-001"
            }
          ],
          "duration": 4258
        },
        {
          "success": true,
          "data": {
            "id": "cmk47jg0w007114m8gnp5nzoq",
            "grnId": "cmk47jfw7007014m8547s5l7a",
            "poItemId": "cmk47izqx006c14m8zdfdtb0y",
            "drugId": "cmk47ixw7006814m84lnlx3a7",
            "orderedQty": 100,
            "receivedQty": 100,
            "freeQty": 0,
            "rejectedQty": 0,
            "batchNumber": "BATCH-1767801787539",
            "expiryDate": "2027-01-07T16:03:07.539Z",
            "mrp": "100",
            "unitPrice": "50",
            "discountPercent": "0",
            "discountType": "BEFORE_GST",
            "gstPercent": "12",
            "lineTotal": "5600",
            "location": null,
            "parentItemId": null,
            "isSplit": false
          },
          "assertions": [
            {
              "passed": true,
              "message": "Update successful",
              "expected": true,
              "actual": true,
              "invariant": "DATA-002"
            }
          ],
          "duration": 3324
        },
        {
          "success": true,
          "data": {
            "id": "cmk47jfw7007014m8547s5l7a",
            "grnNumber": "GRN202601 785825 ",
            "poId": "cmk47izh5006a14m8j7tbb9ja",
            "storeId": "cmk47i040004314m8lw4wrcuo",
            "supplierId": "cmk47irx5006414m8v4tqezgr",
            "status": "COMPLETED",
            "supplierInvoiceNo": "INV-1767801790863",
            "supplierInvoiceDate": "2026-01-07T16:03:10.863Z",
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-07T16:03:05.911Z",
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "notes": null,
            "completedAt": "2026-01-07T16:03:17.469Z",
            "createdAt": "2026-01-07T16:03:05.911Z",
            "updatedAt": "2026-01-07T16:03:17.471Z",
            "items": [
              {
                "id": "cmk47jg0w007114m8gnp5nzoq",
                "grnId": "cmk47jfw7007014m8547s5l7a",
                "poItemId": "cmk47izqx006c14m8zdfdtb0y",
                "drugId": "cmk47ixw7006814m84lnlx3a7",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "BATCH-1767801787539",
                "expiryDate": "2027-01-07T16:03:07.539Z",
                "mrp": "100",
                "unitPrice": "50",
                "discountPercent": "0",
                "discountType": "BEFORE_GST",
                "gstPercent": "12",
                "lineTotal": "5600",
                "location": null,
                "parentItemId": null,
                "isSplit": false
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk47izh5006a14m8j7tbb9ja",
              "storeId": "cmk47i040004314m8lw4wrcuo",
              "supplierId": "cmk47irx5006414m8v4tqezgr",
              "poNumber": "PO202601764547",
              "status": "RECEIVED",
              "orderDate": "2026-01-07T16:02:44.633Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "notes": null,
              "createdBy": "cmk47i3a8004h14m83hb1okth",
              "approvedBy": "cmk47i3a8004h14m83hb1okth",
              "approvedAt": "2026-01-07T16:02:46.280Z",
              "createdAt": "2026-01-07T16:02:44.633Z",
              "updatedAt": "2026-01-07T16:03:17.299Z",
              "deletedAt": null,
              "items": [
                {
                  "id": "cmk47izqx006c14m8zdfdtb0y",
                  "poId": "cmk47izh5006a14m8j7tbb9ja",
                  "drugId": "cmk47ixw7006814m84lnlx3a7",
                  "quantity": 100,
                  "receivedQty": 100,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600"
                }
              ],
              "supplier": {
                "id": "cmk47irx5006414m8v4tqezgr",
                "storeId": "cmk47i040004314m8lw4wrcuo",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-07T16:02:34.842Z",
                "updatedAt": "2026-01-07T16:02:34.842Z",
                "deletedAt": null
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "message": "Status -> COMPLETED",
              "invariant": "STATE-001"
            }
          ],
          "duration": 7731
        },
        {
          "success": true,
          "data": {
            "mismatches": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Verification step passed",
              "expected": true,
              "actual": true,
              "invariant": "INV-004"
            }
          ],
          "duration": 81
        }
      ],
      "duration": 15394
    }
  ],
  "failures": [
    {
      "scenarioId": "reports.sales",
      "scenarioName": "Sales Reporting & Analytics",
      "stepId": "reports.get-today",
      "stepName": "Get sales report for today",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "audit.gdpr",
      "scenarioName": "GDPR Data Export",
      "stepId": "gdpr.export-json",
      "stepName": "Export User Data (JSON)",
      "invariant": "INV-AUDIT",
      "expected": "No error",
      "actual": "Cannot read properties of null (reading 'user')",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.refund",
      "scenarioName": "Sale Refund Flow",
      "stepId": "refund.create-sale",
      "stepName": "Create Sale to Refund",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.credit",
      "scenarioName": "Credit Sale Flow",
      "stepId": "credit.create-sale",
      "stepName": "Create Sale on Credit",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "documents.invoice-pdf",
      "scenarioName": "Invoice PDF Generation Flow",
      "stepId": "pdf.create-sale",
      "stepName": "Create Sale for Invoice",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "procurement.consolidated",
      "scenarioName": "Consolidated Invoice Flow",
      "stepId": "consolidated.create-grn-1",
      "stepName": "Create First GRN",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.roles",
      "scenarioName": "Roles & Permissions Flow",
      "stepId": "roles.create",
      "stepName": "Create custom role",
      "invariant": "DATA-001",
      "expected": "Role",
      "actual": "Null",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.features",
      "scenarioName": "Feature Toggles Flow",
      "stepId": "features.update",
      "stepName": "Override feature (Disable POS)",
      "invariant": "CONF-001",
      "expected": "hidden",
      "actual": "undefined",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    }
  ],
  "impactAnalysis": {
    "affectedFeatures": [
      "reports",
      "analytics",
      "kpi",
      "gdpr",
      "compliance",
      "audit",
      "pos",
      "refund",
      "inventory",
      "credit",
      "ledger",
      "patient",
      "pdf",
      "documents",
      "procurement",
      "grn",
      "billing",
      "admin",
      "roles",
      "permissions",
      "features"
    ],
    "totalBlocked": 0,
    "criticalBlocked": 0
  }
}
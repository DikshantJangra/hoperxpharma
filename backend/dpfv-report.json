{
  "runId": "dpfv-2026-01-09-1767964464924",
  "timestamp": "2026-01-09T13:11:59.302Z",
  "mode": "dev",
  "duration": 145621,
  "summary": {
    "total": 24,
    "passed": 17,
    "failed": 7,
    "blocked": 0,
    "skipped": 0
  },
  "scenarioMap": {
    "core.auth": "PASSED",
    "reports.sales": "PASSED",
    "audit.gdpr": "FAILED",
    "pos.draft": "PASSED",
    "pos.refund": "FAILED",
    "pos.credit": "FAILED",
    "documents.invoice-pdf": "FAILED",
    "procurement.consolidated": "FAILED",
    "core.onboarding": "PASSED",
    "admin.pin": "PASSED",
    "audit.access": "PASSED",
    "communication.email": "PASSED",
    "communication.whatsapp": "PASSED",
    "pos.quick-sale": "PASSED",
    "patients.create": "PASSED",
    "clinical.prescription": "PASSED",
    "admin.roles": "FAILED",
    "admin.features": "FAILED",
    "procurement.supplier": "PASSED",
    "billing.subscription": "PASSED",
    "clinical.dispense": "PASSED",
    "procurement.po": "PASSED",
    "pos.rx-sale": "PASSED",
    "procurement.grn": "PASSED"
  },
  "scenarios": [
    {
      "id": "core.auth",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6wb41x0000140rqwjnd87f",
              "email": "dpfv-test-1767964319302@test.hoperx.com",
              "phoneNumber": "9964319302",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "isActive": true
            },
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2I0MXgwMDAwMTQwcnF3am5kODdmIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NDMyMCwiZXhwIjoxNzY3OTY3OTIwfQ.XNfOYZe5gY4gEemzFZbF7SIFlcbbPKZFbYqoTNzUjKg",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2I0MXgwMDAwMTQwcnF3am5kODdmIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiIxNzIzMTQwNS0wMWY4LTQwM2ItYTFkOS04NDUxYjQ2NGQxMDQiLCJpYXQiOjE3Njc5NjQzMjAsImV4cCI6MTc2ODU2OTEyMH0.8ChpVIMp0w8H6E9lnAopDOst0x_9pCpZd8uLafBBOUw"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "User object with id, email, firstName",
              "actual": {
                "id": "cmk6wb41x0000140rqwjnd87f",
                "email": "dpfv-test-1767964319302@test.hoperx.com"
              },
              "message": "Signup must return complete user object",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT access token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid access token",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT refresh token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid refresh token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 996
        },
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6wb41x0000140rqwjnd87f",
              "email": "dpfv-test-1767964319302@test.hoperx.com",
              "phoneNumber": "9964319302",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "createdAt": "2026-01-09T13:12:00.070Z",
              "updatedAt": "2026-01-09T13:12:00.070Z",
              "deletedAt": null,
              "signatureUrl": null,
              "preferences": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2I0MXgwMDAwMTQwcnF3am5kODdmIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NDMyMCwiZXhwIjoxNzY3OTY3OTIwfQ.XNfOYZe5gY4gEemzFZbF7SIFlcbbPKZFbYqoTNzUjKg",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2I0MXgwMDAwMTQwcnF3am5kODdmIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJkMGMzZWU4NS1iNmQ5LTQ4NjMtOTU2Zi1lZjBjYmI5OWI3OTciLCJpYXQiOjE3Njc5NjQzMjAsImV4cCI6MTc2ODU2OTEyMH0.HKiHJ_ilBtb1KY6gdPStk_G1aPmXea5rLyHhjBbtZD0"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "cmk6wb41x0000140rqwjnd87f",
              "actual": "cmk6wb41x0000140rqwjnd87f",
              "message": "Login must return same user as signup",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": true,
              "actual": true,
              "message": "Logged in user must be active",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 2183
        },
        {
          "success": true,
          "data": {
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2I0MXgwMDAwMTQwcnF3am5kODdmIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NDMyMiwiZXhwIjoxNzY3OTY3OTIyfQ.ko-jvgmWbZ2ezJ-QZ-O-PNUr_alkOU9xCetEhhPG9s0",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2I0MXgwMDAwMTQwcnF3am5kODdmIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiIzY2NmNDQ1MS05NzNiLTQ1YTItYWU0NC02NDc4YTMyZTExNTQiLCJpYXQiOjE3Njc5NjQzMjIsImV4cCI6MTc2ODU2OTEyMn0.RR9fUd-rt3oCp8eqA09a3a09F1IemxBov5NT6hiQZFA"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "New access token different from original",
              "actual": "New token",
              "message": "Token refresh must generate new access token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 313
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wb41x0000140rqwjnd87f",
            "email": "dpfv-test-1767964319302@test.hoperx.com",
            "phoneNumber": "9964319302",
            "firstName": "DPFV",
            "lastName": "TestUser",
            "role": "ADMIN",
            "isActive": true,
            "pinHash": null,
            "pinAttempts": 0,
            "pinLockedUntil": null,
            "lastLoginAt": null,
            "faceDataUrl": null,
            "hourlyRate": null,
            "monthlyRate": null,
            "shiftId": null,
            "joiningDate": null,
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "employeeId": null,
            "createdAt": "2026-01-09T13:12:00.070Z",
            "updatedAt": "2026-01-09T13:12:00.070Z",
            "deletedAt": null,
            "signatureUrl": null,
            "preferences": null,
            "storeUsers": []
          },
          "assertions": [
            {
              "passed": true,
              "expected": "dpfv-test-1767964319302@test.hoperx.com",
              "actual": "dpfv-test-1767964319302@test.hoperx.com",
              "message": "Profile email must match user email",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "No password in profile",
              "actual": "No password",
              "message": "Profile must not expose password hash",
              "invariant": "AUTH-002"
            }
          ],
          "duration": 180
        }
      ],
      "duration": 3673
    },
    {
      "id": "reports.sales",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6wb6t90004140ra7kkz2nl",
              "name": "Report Test Pharmacy 1767964322975",
              "displayName": "Report Pharma 1767964322975",
              "email": "report-store-1767964322975@test.hoperx.com",
              "phoneNumber": "9964322975",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "Test Address",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:12:03.645Z",
              "updatedAt": "2026-01-09T13:12:03.645Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully",
            "patient": {
              "id": "cmk6wb8e20008140r6ta9m13n",
              "storeId": "cmk6wb6t90004140ra7kkz2nl",
              "firstName": "Test",
              "middleName": null,
              "lastName": "Patient",
              "dateOfBirth": null,
              "gender": "Male",
              "photoUrl": null,
              "phoneNumber": "9964322975",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T13:12:05.690Z",
              "updatedAt": "2026-01-09T13:12:05.690Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            }
          },
          "assertions": [],
          "duration": 2892
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wbhvd000o140rc92jv9on",
            "storeId": "cmk6wb6t90004140ra7kkz2nl",
            "invoiceNumber": "INV1767964337180",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6wb8e20008140r6ta9m13n",
            "subtotal": "200",
            "discountAmount": "0",
            "taxAmount": "24",
            "roundOff": "0",
            "total": "224",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6wb6l70003140rbjsw205y",
            "createdAt": "2026-01-09T13:12:17.978Z",
            "updatedAt": "2026-01-09T13:12:17.978Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6wb9u6000d140r86tcru06",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6wbe31000m140r7fbknpi4",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [],
          "duration": 18233
        },
        {
          "success": true,
          "data": {
            "kpis": {
              "revenue": 224,
              "orders": 1,
              "aov": 224,
              "customers": 1,
              "newCustomers": 1,
              "returningCustomers": 0,
              "refunds": 0,
              "returnRate": 0,
              "delta": {
                "revenue": 0,
                "orders": 0,
                "aov": 0
              },
              "avgOrdersPerDay": 1,
              "avgOrdersPerHour": 0.041666666666666664,
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z",
                "preset": "today"
              }
            },
            "trends": {
              "current": [
                {
                  "date": "2026-01-09",
                  "revenue": 224,
                  "orders": 1,
                  "items": 2,
                  "aov": 224
                }
              ],
              "previous": [],
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z"
              }
            },
            "breakdown": {
              "byCategory": [
                {
                  "category": "Tablet",
                  "revenue": 224,
                  "orders": 1,
                  "revenueShare": 100,
                  "margin": 89.29
                }
              ],
              "byPaymentMethod": [
                {
                  "method": "CASH",
                  "amount": 224,
                  "count": 1,
                  "percentage": 100
                }
              ],
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z"
              }
            },
            "performance": {
              "topProducts": [
                {
                  "drugId": "cmk6wb8og000a140rk04m0j36",
                  "drugName": "Report Test Drug",
                  "manufacturer": "-",
                  "category": "Tablet",
                  "revenue": 224,
                  "quantity": 2,
                  "orders": 1,
                  "avgPrice": 112,
                  "stockLeft": 48,
                  "trend": "stable"
                }
              ],
              "topCustomers": [
                {
                  "customerId": "cmk6wb8e20008140r6ta9m13n",
                  "customerName": "Test Patient",
                  "phoneNumber": "9964322975",
                  "totalSpend": 224,
                  "orders": 1,
                  "lastVisit": "2026-01-09T13:12:17.978Z",
                  "loyaltyStatus": "NEW",
                  "avgOrderValue": 224
                }
              ],
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z"
              }
            },
            "insights": [],
            "generatedAt": "2026-01-09T13:12:26.906Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": ">= 224",
              "actual": 224,
              "message": "Report revenue must include the tracked sale",
              "invariant": "RPT-001"
            },
            {
              "passed": true,
              "expected": "> 0",
              "actual": 1,
              "message": "Order count must be positive",
              "invariant": "RPT-002"
            }
          ],
          "duration": 2805
        },
        {
          "success": true,
          "data": {
            "data": {
              "metadata": {
                "storeName": "Store",
                "reportType": "Sales Analytics",
                "period": {
                  "start": "2026-01-08T18:30:00.000Z",
                  "end": "2026-01-09T18:29:59.999Z",
                  "preset": "today"
                },
                "generatedAt": "2026-01-09T13:12:28.355Z"
              },
              "summary": {
                "revenue": 224,
                "orders": 1,
                "aov": 224,
                "customers": 1,
                "refunds": 0
              },
              "trends": [
                {
                  "date": "2026-01-09",
                  "revenue": 224,
                  "orders": 1,
                  "items": 2,
                  "aov": 224
                }
              ],
              "topProducts": [
                {
                  "drugId": "cmk6wb8og000a140rk04m0j36",
                  "drugName": "Report Test Drug",
                  "manufacturer": "-",
                  "category": "Tablet",
                  "revenue": 224,
                  "quantity": 2,
                  "orders": 1,
                  "avgPrice": 112,
                  "stockLeft": 48,
                  "trend": "stable"
                }
              ],
              "topCustomers": [
                {
                  "customerId": "cmk6wb8e20008140r6ta9m13n",
                  "customerName": "Test Patient",
                  "phoneNumber": "9964322975",
                  "totalSpend": 224,
                  "orders": 1,
                  "lastVisit": "2026-01-09T13:12:17.978Z",
                  "loyaltyStatus": "NEW",
                  "avgOrderValue": 224
                }
              ],
              "categoryBreakdown": [
                {
                  "category": "Tablet",
                  "revenue": 224,
                  "orders": 1,
                  "revenueShare": 100,
                  "margin": 89.29
                }
              ],
              "paymentBreakdown": [
                {
                  "method": "CASH",
                  "amount": 224,
                  "count": 1,
                  "percentage": 100
                }
              ]
            },
            "format": "csv",
            "filename": "sales-report-today-2026-01-09.csv"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Valid export object",
              "actual": [
                "data",
                "format",
                "filename"
              ],
              "message": "Export must return data and filename",
              "invariant": "RPT-003"
            }
          ],
          "duration": 1449
        }
      ],
      "duration": 25380
    },
    {
      "id": "audit.gdpr",
      "status": "FAILED",
      "failedAtStep": "gdpr.export-json",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 3168
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'user')",
              "message": "Assertion \"Export contains user profile\" threw: Cannot read properties of null (reading 'user')",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'stores')",
              "message": "Assertion \"Export contains stores\" threw: Cannot read properties of null (reading 'stores')",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 541,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 3711
    },
    {
      "id": "pos.draft",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6wbt6q0016140rquma7xsz",
              "name": "Draft Test Store 1767964352066",
              "displayName": "Draft Store",
              "email": "draft-store-1767964352066@test.hoperx.com",
              "phoneNumber": "9964352066",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "Draft Lane",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "MH",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:12:32.642Z",
              "updatedAt": "2026-01-09T13:12:32.642Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [],
          "duration": 1517
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wbvuc001a140r8txa62qv",
            "storeId": "cmk6wbt6q0016140rquma7xsz",
            "draftNumber": "DRF1767964356083",
            "customerName": null,
            "customerPhone": null,
            "customerId": null,
            "items": "[{\"drugId\":\"cmk3ve3ke000y148qncqimrqr\",\"batchId\":\"cmk40xxi30010142aeea0ynen\",\"quantity\":1,\"mrp\":50,\"discount\":0}]",
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "createdBy": "cmk6wbt1q0015140resrwghql",
            "expiresAt": "2026-01-16T13:12:34.271Z",
            "createdAt": "2026-01-09T13:12:36.084Z",
            "updatedAt": "2026-01-09T13:12:36.084Z",
            "dispenseFor": null
          },
          "assertions": [],
          "duration": 2827
        }
      ],
      "duration": 4344
    },
    {
      "id": "pos.refund",
      "status": "FAILED",
      "failedAtStep": "refund.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2727
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7730
    },
    {
      "id": "pos.credit",
      "status": "FAILED",
      "failedAtStep": "credit.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2598
        },
        {
          "success": true,
          "data": {
            "expected": 0,
            "actual": 0
          },
          "assertions": [],
          "duration": 202
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7803
    },
    {
      "id": "documents.invoice-pdf",
      "status": "FAILED",
      "failedAtStep": "pdf.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2255
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5001
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7256
    },
    {
      "id": "procurement.consolidated",
      "status": "FAILED",
      "failedAtStep": "consolidated.create-grn-1",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 4263
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create First GRN\" timed out after 5000ms",
            "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create First GRN\" timed out after 5000ms",
        "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 9266
    },
    {
      "id": "core.onboarding",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6wcl38004f140r4229fbc5",
              "name": "DPFV Test Pharmacy 1767964388466",
              "displayName": "Test Pharma 1767964388466",
              "email": "store-1767964388466@test.hoperx.com",
              "phoneNumber": "9964388466",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:13:08.805Z",
              "updatedAt": "2026-01-09T13:13:08.805Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Store with ID",
              "actual": "cmk6wcl38004f140r4229fbc5",
              "message": "Onboarding must create store with ID",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "Store name contains \"DPFV Test Pharmacy\"",
              "actual": "DPFV Test Pharmacy 1767964388466",
              "message": "Store name must match input",
              "invariant": "INV-008"
            }
          ],
          "duration": 2765
        },
        {
          "success": true,
          "data": {
            "userId": "cmk6wce2h003n140rgrqrjro8",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "isPrimary": true,
            "assignedAt": "2026-01-09T13:13:09.179Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "StoreUser association",
              "actual": "Found",
              "message": "User must be associated with store",
              "invariant": "INV-008"
            }
          ],
          "duration": 556
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcmbt004j140rjedaztop",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "TRIAL",
            "trialEndsAt": "2026-01-23T13:13:10.408Z",
            "currentPeriodStart": "2026-01-09T13:13:10.408Z",
            "currentPeriodEnd": "2026-01-23T13:13:10.408Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T13:13:10.409Z",
            "updatedAt": "2026-01-09T13:13:10.409Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Subscription exists",
              "actual": "Found",
              "message": "Store must have subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "TRIAL",
              "actual": "TRIAL",
              "message": "New store must have TRIAL subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "trialEndsAt and currentPeriodStart set",
              "actual": {
                "trialEndsAt": "2026-01-23T13:13:10.408Z",
                "currentPeriodStart": "2026-01-09T13:13:10.408Z"
              },
              "message": "Trial dates must be configured",
              "invariant": "INV-008"
            }
          ],
          "duration": 218
        },
        {
          "success": true,
          "data": {},
          "assertions": [
            {
              "passed": true,
              "expected": {
                "hasStore": true,
                "hasSubscription": true
              },
              "actual": {
                "hasStore": true,
                "hasSubscription": true
              },
              "message": "Onboarding must create Store + StoreUser + Subscription atomically",
              "invariant": "INV-008"
            }
          ],
          "duration": 846
        }
      ],
      "duration": 4385
    },
    {
      "id": "admin.pin",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "success": true,
            "message": "Admin PIN set up successfully"
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN setup API returned success",
              "expected": "Success",
              "actual": "Success",
              "invariant": "INV-013"
            }
          ],
          "duration": 987
        },
        {
          "success": true,
          "data": {
            "valid": true
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN verification passed",
              "expected": true,
              "actual": true,
              "invariant": "SEC-001"
            }
          ],
          "duration": 742
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "SEC-002"
            }
          ],
          "duration": 444
        }
      ],
      "duration": 2174
    },
    {
      "id": "audit.access",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6wcqcd004p140rnl0vxsh6",
              "email": "dpfv-audit-admin@test.hoperx.com",
              "phoneNumber": "9998887776",
              "firstName": "Audit",
              "lastName": "Admin",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "createdAt": "2026-01-09T13:13:15.613Z",
              "updatedAt": "2026-01-09T13:13:15.613Z",
              "deletedAt": null,
              "signatureUrl": null,
              "preferences": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2NxY2QwMDRwMTQwcm5sMHZ4c2g2Iiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NDM5NiwiZXhwIjoxNzY3OTY3OTk2fQ.-_sIdBZAZUXJG_5ZUiV-x2wAiQOHD3rXGLJ9opnZ_54",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2d2NxY2QwMDRwMTQwcm5sMHZ4c2g2IiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJmYjM3ODU1Yy0yZmJiLTRjZjItOTNhOS1jNjY4ZjQ0MjUyYjQiLCJpYXQiOjE3Njc5NjQzOTYsImV4cCI6MTc2ODU2OTE5Nn0.9MYvEjIQoU-CGhiFuAMWxCo2dl24lQHAujVbA6818LM"
          },
          "assertions": [],
          "duration": 2645
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcrbv004r140r4oid3au7",
            "userId": "cmk6wcqcd004p140rnl0vxsh6",
            "eventType": "login_success",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier",
            "deviceInfo": null,
            "createdAt": "2026-01-09T13:13:16.892Z",
            "geolocation": null,
            "loginMethod": "EMAIL_PASSWORD"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_success",
              "actual": "login_success",
              "message": "Latest log should be login_success",
              "invariant": "AUDIT-001"
            },
            {
              "passed": true,
              "expected": "IP Address",
              "actual": "127.0.0.1",
              "message": "IP address must be recorded",
              "invariant": "AUDIT-002"
            }
          ],
          "duration": 310
        },
        {
          "success": true,
          "data": {
            "error": "Unauthorized"
          },
          "assertions": [],
          "duration": 1438
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcsd4004t140rn6f1m2i3",
            "userId": "cmk6wcqcd004p140rnl0vxsh6",
            "eventType": "login_failure",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier-Fail",
            "deviceInfo": null,
            "createdAt": "2026-01-09T13:13:18.232Z",
            "geolocation": null,
            "loginMethod": "Password"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_failure",
              "actual": "login_failure",
              "message": "Latest log should be login_failure",
              "invariant": "AUDIT-001"
            }
          ],
          "duration": 296
        }
      ],
      "duration": 4691
    },
    {
      "id": "communication.email",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wctny004v140r5coam47z",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "email": "test@hoperx.com",
            "provider": "GMAIL",
            "smtpHost": null,
            "smtpPort": null,
            "smtpUser": null,
            "smtpPasswordEncrypted": null,
            "useTLS": true,
            "isVerified": true,
            "isActive": true,
            "lastTestedAt": null,
            "createdAt": "2026-01-09T13:13:19.918Z",
            "updatedAt": "2026-01-09T13:13:19.918Z",
            "isPrimary": true,
            "authMethod": "OAUTH",
            "gmailAccessToken": "mock_token",
            "gmailRefreshToken": "mock_refresh",
            "gmailTokenExpiry": "2026-01-09T14:13:19.917Z",
            "oauthConnectedAt": null,
            "store": {
              "id": "cmk6wcl38004f140r4229fbc5",
              "name": "DPFV Test Pharmacy 1767964388466",
              "email": "store-1767964388466@test.hoperx.com"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email account available",
              "expected": "Account ID",
              "actual": "cmk6wctny004v140r5coam47z",
              "invariant": "DATA-001"
            }
          ],
          "duration": 947
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcuh1004x140rtxor3b7k",
            "emailAccountId": "cmk6wctny004v140r5coam47z",
            "to": [
              "recipient@hoperx.com"
            ],
            "cc": [],
            "bcc": [],
            "subject": "DPFV Test Email 1767964400663",
            "bodyHtml": "<p>Test Body</p>",
            "attachments": null,
            "status": "FAILED",
            "errorMessage": "Gmail not connected or token expired. Please reconnect.",
            "sentBy": "cmk6wcqcd004p140rnl0vxsh6",
            "contextType": null,
            "contextId": null,
            "createdAt": "2026-01-09T13:13:20.965Z",
            "sentAt": null,
            "emailAccount": {
              "id": "cmk6wctny004v140r5coam47z",
              "email": "test@hoperx.com",
              "provider": "GMAIL",
              "isActive": true
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email attempt logged",
              "expected": "Log entry",
              "actual": "Found",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": true,
              "message": "Log status resolved (SENT/FAILED)",
              "expected": "SENT/FAILED",
              "actual": "FAILED",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 1832
        }
      ],
      "duration": 2781
    },
    {
      "id": "communication.whatsapp",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "messageId": "wa_1767964402496"
          },
          "assertions": [],
          "duration": 0
        }
      ],
      "duration": 0
    },
    {
      "id": "pos.quick-sale",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wcw7w0051140ryr9ct5u9",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "drugId": "cmk6wcvvv004z140rxxlthcpb",
            "batchNumber": "DPFV-1767964402996",
            "expiryDate": "2027-01-09T13:13:22.996Z",
            "quantityInStock": 100,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T13:13:23.228Z",
            "updatedAt": "2026-01-09T13:13:23.228Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6wcvvv004z140rxxlthcpb",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T13:13:22.795Z",
              "updatedAt": "2026-01-09T13:13:22.795Z",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "> 0",
              "actual": 100,
              "message": "Test batch must have positive stock",
              "invariant": "INV-001"
            },
            {
              "passed": true,
              "expected": "Future expiry date",
              "actual": "2027-01-09T13:13:22.996Z",
              "message": "Test batch must not be expired",
              "invariant": "INV-001"
            }
          ],
          "duration": 1483
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wd3ek005j140rgapok4p3",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "invoiceNumber": "INV1767964412073",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6wcwxe0053140r4hriio4w",
            "subtotal": "237.5",
            "discountAmount": "0",
            "taxAmount": "28.5",
            "roundOff": "0",
            "total": "266",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6wcqcd004p140rnl0vxsh6",
            "createdAt": "2026-01-09T13:13:32.541Z",
            "updatedAt": "2026-01-09T13:13:32.541Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6wcxe00054140r90wborm5",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6wd0qq005h140rnm9gakku",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Sale with ID",
              "actual": "cmk6wd3ek005j140rgapok4p3",
              "message": "Sale must be created with ID",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "expected": "Invoice number present",
              "actual": "INV1767964412073",
              "message": "Invoice number must be generated",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "expected": 266,
              "actual": 266,
              "message": "Sum of payment splits must equal sale total",
              "invariant": "INV-002"
            }
          ],
          "duration": 12514
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcw7w0051140ryr9ct5u9",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "drugId": "cmk6wcvvv004z140rxxlthcpb",
            "batchNumber": "DPFV-1767964402996",
            "expiryDate": "2027-01-09T13:13:22.996Z",
            "quantityInStock": 90,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T13:13:23.228Z",
            "updatedAt": "2026-01-09T13:13:33.006Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6wcvvv004z140rxxlthcpb",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T13:13:22.795Z",
              "updatedAt": "2026-01-09T13:13:22.795Z",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": 90,
              "actual": 90,
              "message": "Stock must be deducted by exact sold quantity",
              "invariant": "INV-001"
            },
            {
              "passed": true,
              "expected": ">= 0",
              "actual": 90,
              "message": "Stock quantity must never be negative",
              "invariant": "INV-001"
            }
          ],
          "duration": 369
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wd3ek005j140rgapok4p3",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "invoiceNumber": "INV1767964412073",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6wcwxe0053140r4hriio4w",
            "subtotal": "237.5",
            "discountAmount": "0",
            "taxAmount": "28.5",
            "roundOff": "0",
            "total": "266",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6wcqcd004p140rnl0vxsh6",
            "createdAt": "2026-01-09T13:13:32.541Z",
            "updatedAt": "2026-01-09T13:13:32.541Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6wcxe00054140r90wborm5",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6wd0qq005h140rnm9gakku",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "patient": {
              "id": "cmk6wcwxe0053140r4hriio4w",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "firstName": "Walk-in",
              "middleName": null,
              "lastName": "Customer",
              "dateOfBirth": null,
              "gender": null,
              "photoUrl": null,
              "phoneNumber": "WALKIN-1767964403982",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T13:13:23.983Z",
              "updatedAt": "2026-01-09T13:13:23.983Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "dispenseForPatient": null,
            "store": {
              "id": "cmk6wcl38004f140r4229fbc5",
              "name": "DPFV Test Pharmacy 1767964388466",
              "displayName": "Test Pharma 1767964388466",
              "email": "store-1767964388466@test.hoperx.com",
              "phoneNumber": "9964388466",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:13:08.805Z",
              "updatedAt": "2026-01-09T13:13:08.805Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false,
              "settings": null
            },
            "items": [
              {
                "id": "cmk6wd3ha005k140rog5tpdiw",
                "saleId": "cmk6wd3ek005j140rgapok4p3",
                "drugId": "cmk6wcvvv004z140rxxlthcpb",
                "batchId": "cmk6wcw7w0051140ryr9ct5u9",
                "quantity": 10,
                "mrp": "25",
                "discount": "5",
                "gstRate": "12",
                "lineTotal": "266",
                "cessAmount": "0",
                "cgstAmount": "0",
                "hsnCode": null,
                "igstAmount": "0",
                "sgstAmount": "0",
                "taxSlabId": null,
                "taxableAmount": "0",
                "drug": {
                  "id": "cmk6wcvvv004z140rxxlthcpb",
                  "rxcui": null,
                  "name": "Paracetamol 500mg",
                  "genericName": "Paracetamol 500mg",
                  "strength": null,
                  "form": "Tablet",
                  "manufacturer": null,
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T13:13:22.795Z",
                  "updatedAt": "2026-01-09T13:13:22.795Z",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "hsnCodeId": null
                },
                "batch": {
                  "id": "cmk6wcw7w0051140ryr9ct5u9",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "drugId": "cmk6wcvvv004z140rxxlthcpb",
                  "batchNumber": "DPFV-1767964402996",
                  "expiryDate": "2027-01-09T13:13:22.996Z",
                  "quantityInStock": 90,
                  "mrp": "25",
                  "purchasePrice": "20",
                  "supplierId": null,
                  "location": null,
                  "createdAt": "2026-01-09T13:13:23.228Z",
                  "updatedAt": "2026-01-09T13:13:33.006Z",
                  "deletedAt": null
                }
              }
            ],
            "paymentSplits": [
              {
                "id": "cmk6wd3ha005l140rho1s4ugt",
                "saleId": "cmk6wd3ek005j140rgapok4p3",
                "paymentMethod": "CASH",
                "amount": "266",
                "cardLast4": null,
                "cardBrand": null,
                "cardAuthCode": null,
                "upiTransactionId": null,
                "upiVpa": null,
                "walletProvider": null,
                "walletTxnId": null,
                "createdAt": "2026-01-09T13:13:32.638Z"
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "expected": {
                "drugId": "cmk6wcvvv004z140rxxlthcpb",
                "quantity": 10
              },
              "actual": [
                {
                  "drugId": "cmk6wcvvv004z140rxxlthcpb",
                  "qty": 10
                }
              ],
              "message": "Sale items must match what was in cart",
              "invariant": "SALE-001"
            }
          ],
          "duration": 985
        }
      ],
      "duration": 15354
    },
    {
      "id": "patients.create",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wd7n9005x140rnsfe11ox",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "firstName": "John",
            "middleName": null,
            "lastName": "Doe",
            "dateOfBirth": "1990-01-15T00:00:00.000Z",
            "gender": "MALE",
            "photoUrl": null,
            "phoneNumber": "9964417851",
            "email": "john.doe.1767964417851@test.com",
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "createdAt": "2026-01-09T13:13:38.037Z",
            "updatedAt": "2026-01-09T13:13:38.037Z",
            "deletedAt": null,
            "deletedBy": null,
            "creditLimit": "0",
            "currentBalance": "0"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must be created",
              "expected": "Patient object",
              "actual": "Created",
              "invariant": "DATA-001"
            }
          ],
          "duration": 372
        },
        {
          "success": true,
          "data": {
            "patient": {
              "id": "cmk6wd7n9005x140rnsfe11ox",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9964417851",
              "email": "john.doe.1767964417851@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T13:13:38.037Z",
              "updatedAt": "2026-01-09T13:13:38.037Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "issues": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient data is valid",
              "expected": "Valid data",
              "actual": "Valid data",
              "invariant": "DATA-002"
            }
          ],
          "duration": 1
        },
        {
          "success": true,
          "data": [],
          "assertions": [
            {
              "passed": true,
              "message": "Ledger check passed",
              "expected": "Ledger object or null",
              "actual": "Found",
              "invariant": "FIN-005"
            }
          ],
          "duration": 185
        }
      ],
      "duration": 558
    },
    {
      "id": "clinical.prescription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wcwxe0053140r4hriio4w",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "firstName": "Walk-in",
            "middleName": null,
            "lastName": "Customer",
            "dateOfBirth": null,
            "gender": null,
            "photoUrl": null,
            "phoneNumber": "WALKIN-1767964403982",
            "email": null,
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "createdAt": "2026-01-09T13:13:23.983Z",
            "updatedAt": "2026-01-09T13:13:23.983Z",
            "deletedAt": null,
            "deletedBy": null,
            "creditLimit": "0",
            "currentBalance": "0"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must exist with ID",
              "expected": "Valid ID",
              "actual": "cmk6wcwxe0053140r4hriio4w",
              "invariant": "DATA-001"
            }
          ],
          "duration": 185
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wd82t005z140rvyhk501e",
            "rxcui": null,
            "name": "DPFV Test Drug 1767964418595",
            "genericName": "Test Generic",
            "strength": "500mg",
            "form": "Tablet",
            "manufacturer": "Test Pharma",
            "schedule": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-09T13:13:38.597Z",
            "updatedAt": "2026-01-09T13:13:38.597Z",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "hsnCodeId": null
          },
          "assertions": [],
          "duration": 94
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wd8dk0060140rfze1jvvy",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "patientId": "cmk6wcwxe0053140r4hriio4w",
            "prescriberId": null,
            "source": "manual",
            "priority": "Normal",
            "createdAt": "2026-01-09T13:13:38.984Z",
            "updatedAt": "2026-01-09T13:13:38.984Z",
            "deletedAt": null,
            "notes": null,
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "nextRefillDue": null,
            "ocrConfidence": null,
            "ocrText": null,
            "reminderSent": null,
            "uploadedImages": [],
            "prescriptionNumber": "RX000002",
            "type": "REGULAR",
            "issueDate": "2026-01-09T13:13:38.983Z",
            "expiryDate": "2026-07-09T13:13:38.690Z",
            "totalRefills": 3,
            "status": "DRAFT",
            "patient": {
              "id": "cmk6wcwxe0053140r4hriio4w",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "firstName": "Walk-in",
              "middleName": null,
              "lastName": "Customer",
              "dateOfBirth": null,
              "gender": null,
              "photoUrl": null,
              "phoneNumber": "WALKIN-1767964403982",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T13:13:23.983Z",
              "updatedAt": "2026-01-09T13:13:23.983Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "prescriber": null,
            "store": {
              "id": "cmk6wcl38004f140r4229fbc5",
              "name": "DPFV Test Pharmacy 1767964388466",
              "displayName": "Test Pharma 1767964388466",
              "email": "store-1767964388466@test.hoperx.com",
              "phoneNumber": "9964388466",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:13:08.805Z",
              "updatedAt": "2026-01-09T13:13:08.805Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "versions": [
              {
                "id": "cmk6wd8yo0062140rf3zqhkxk",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
                "createdAt": "2026-01-09T13:13:39.744Z",
                "items": [
                  {
                    "id": "cmk6wd8yo0064140rmqtx23p1",
                    "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                    "drugId": "cmk6wd82t005z140rvyhk501e",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk6wd82t005z140rvyhk501e",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767964418595",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-09T13:13:38.597Z",
                      "updatedAt": "2026-01-09T13:13:38.597Z",
                      "storeId": "cmk6wcl38004f140r4229fbc5",
                      "hsnCodeId": null
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk6wd9gm0065140rghqbohld",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              },
              {
                "id": "cmk6wd9gm0066140rub5gqugj",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              },
              {
                "id": "cmk6wd9gm0067140rdlxflrwx",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              },
              {
                "id": "cmk6wd9gm0068140rxysze277",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk6wd8yo0064140rmqtx23p1",
                "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                "drugId": "cmk6wd82t005z140rvyhk501e",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk6wd82t005z140rvyhk501e",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767964418595",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T13:13:38.597Z",
                  "updatedAt": "2026-01-09T13:13:38.597Z",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "hsnCodeId": null
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk6wd9lt006a140rq2uyzeyg",
                "storeId": "cmk6wcl38004f140r4229fbc5",
                "userId": "cmk6wcqcd004p140rnl0vxsh6",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk6wd8dk0060140rfze1jvvy",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T13:13:40.578Z",
                "user": {
                  "id": "cmk6wcqcd004p140rnl0vxsh6",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Prescription must be created",
              "expected": "Prescription object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Prescription status should be DRAFT",
              "invariant": "RX-001"
            }
          ],
          "duration": 3769
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wd8dk0060140rfze1jvvy",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "patientId": "cmk6wcwxe0053140r4hriio4w",
            "prescriberId": null,
            "source": "manual",
            "priority": "Normal",
            "createdAt": "2026-01-09T13:13:38.984Z",
            "updatedAt": "2026-01-09T13:13:42.553Z",
            "deletedAt": null,
            "notes": null,
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "nextRefillDue": null,
            "ocrConfidence": null,
            "ocrText": null,
            "reminderSent": null,
            "uploadedImages": [],
            "prescriptionNumber": "RX000002",
            "type": "REGULAR",
            "issueDate": "2026-01-09T13:13:38.983Z",
            "expiryDate": "2026-07-09T13:13:38.690Z",
            "totalRefills": 3,
            "status": "ACTIVE",
            "patient": {
              "id": "cmk6wcwxe0053140r4hriio4w",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "firstName": "Walk-in",
              "middleName": null,
              "lastName": "Customer",
              "dateOfBirth": null,
              "gender": null,
              "photoUrl": null,
              "phoneNumber": "WALKIN-1767964403982",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T13:13:23.983Z",
              "updatedAt": "2026-01-09T13:13:23.983Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "prescriber": null,
            "store": {
              "id": "cmk6wcl38004f140r4229fbc5",
              "name": "DPFV Test Pharmacy 1767964388466",
              "displayName": "Test Pharma 1767964388466",
              "email": "store-1767964388466@test.hoperx.com",
              "phoneNumber": "9964388466",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:13:08.805Z",
              "updatedAt": "2026-01-09T13:13:08.805Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "versions": [
              {
                "id": "cmk6wd8yo0062140rf3zqhkxk",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
                "createdAt": "2026-01-09T13:13:39.744Z",
                "items": [
                  {
                    "id": "cmk6wd8yo0064140rmqtx23p1",
                    "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                    "drugId": "cmk6wd82t005z140rvyhk501e",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk6wd82t005z140rvyhk501e",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767964418595",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-09T13:13:38.597Z",
                      "updatedAt": "2026-01-09T13:13:38.597Z",
                      "storeId": "cmk6wcl38004f140r4229fbc5",
                      "hsnCodeId": null
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk6wd9gm0065140rghqbohld",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              },
              {
                "id": "cmk6wd9gm0066140rub5gqugj",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              },
              {
                "id": "cmk6wd9gm0067140rdlxflrwx",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              },
              {
                "id": "cmk6wd9gm0068140rxysze277",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk6wd8yo0064140rmqtx23p1",
                "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                "drugId": "cmk6wd82t005z140rvyhk501e",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk6wd82t005z140rvyhk501e",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767964418595",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T13:13:38.597Z",
                  "updatedAt": "2026-01-09T13:13:38.597Z",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "hsnCodeId": null
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk6wdbap006c140r1s816bia",
                "storeId": "cmk6wcl38004f140r4229fbc5",
                "userId": "cmk6wcqcd004p140rnl0vxsh6",
                "action": "PRESCRIPTION_ACTIVATED",
                "entityType": "Prescription",
                "entityId": "cmk6wd8dk0060140rfze1jvvy",
                "changes": {
                  "newStatus": "ACTIVE",
                  "previousStatus": "DRAFT"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T13:13:42.769Z",
                "user": {
                  "id": "cmk6wcqcd004p140rnl0vxsh6",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              },
              {
                "id": "cmk6wd9lt006a140rq2uyzeyg",
                "storeId": "cmk6wcl38004f140r4229fbc5",
                "userId": "cmk6wcqcd004p140rnl0vxsh6",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk6wd8dk0060140rfze1jvvy",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T13:13:40.578Z",
                "user": {
                  "id": "cmk6wcqcd004p140rnl0vxsh6",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "expected": "ACTIVE",
              "actual": "ACTIVE",
              "message": "Prescription status should be ACTIVE",
              "invariant": "RX-002"
            },
            {
              "passed": true,
              "message": "Total refills should be 3",
              "expected": 3,
              "actual": 3,
              "invariant": "RX-003"
            }
          ],
          "duration": 1715
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wd9gm0065140rghqbohld",
            "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
            "refillNumber": 0,
            "authorizedQty": 30,
            "dispensedQty": 0,
            "remainingQty": 30,
            "status": "AVAILABLE",
            "expiresAt": "2026-07-09T13:13:38.690Z",
            "notes": null,
            "createdAt": "2026-01-09T13:13:40.390Z",
            "updatedAt": "2026-01-09T13:13:40.390Z"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Refill must be available",
              "expected": "AVAILABLE",
              "actual": "AVAILABLE",
              "invariant": "RX-004"
            }
          ],
          "duration": 1295
        }
      ],
      "duration": 7058
    },
    {
      "id": "admin.roles",
      "status": "FAILED",
      "failedAtStep": "roles.create",
      "steps": [
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "message": "Role object must be returned",
              "expected": "Role",
              "actual": "Null",
              "invariant": "DATA-001"
            },
            {
              "passed": null,
              "message": "Custom role must not be built-in",
              "expected": false,
              "invariant": "INV-011"
            }
          ],
          "duration": 376,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 377
    },
    {
      "id": "admin.features",
      "status": "FAILED",
      "failedAtStep": "features.update",
      "steps": [
        {
          "success": true,
          "data": {
            "featureConfig": {
              "gst": "essential",
              "pos": "essential",
              "help": "essential",
              "team": "essential",
              "audit": "essential",
              "store": "essential",
              "claims": "optional",
              "engage": "essential",
              "orders": "essential",
              "finance": "essential",
              "reports": "essential",
              "dispense": "essential",
              "insights": "essential",
              "messages": "essential",
              "patients": "essential",
              "dashboard": "essential",
              "inventory": "essential",
              "knowledge": "essential",
              "suppliers": "essential",
              "multiStore": "hidden",
              "regulations": "essential",
              "integrations": "essential",
              "prescriptions": "essential"
            },
            "enabledSections": [
              "Operations",
              "Inventory & Supply",
              "Billing & Finance",
              "Analytics",
              "Communication",
              "Compliance",
              "Settings",
              "Support"
            ],
            "defaultPermissions": [
              "prescription.read",
              "prescription.create",
              "prescription.fulfill",
              "patient.read",
              "patient.create",
              "inventory.read",
              "po.read",
              "po.create",
              "sales.create",
              "sales.read",
              "communication.send",
              "marketing.loyalty"
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Feature config must exist",
              "expected": "Config object",
              "actual": "Found",
              "invariant": "DATA-001"
            }
          ],
          "duration": 696
        },
        {
          "success": false,
          "data": {
            "id": "cmk6wcl38004f140r4229fbc5",
            "businessType": "Retail Pharmacy",
            "featureOverrides": {
              "pos": "hidden"
            }
          },
          "assertions": [
            {
              "passed": false,
              "message": "POS should be hidden",
              "expected": "hidden",
              "actual": "undefined",
              "invariant": "CONF-001"
            }
          ],
          "duration": 298,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 995
    },
    {
      "id": "procurement.supplier",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wdela006e140ro690r6h9",
            "name": "Alpha Pharma Distributors",
            "category": "Distributor",
            "status": "Active",
            "gstin": "27AABCU9603R1ZN",
            "dlNumber": null,
            "pan": null,
            "contactName": "Rahul Kumar",
            "phoneNumber": "9876543210",
            "email": "alpha@test.com",
            "whatsapp": null,
            "addressLine1": "Test Address 1",
            "addressLine2": null,
            "city": "Pune",
            "state": "Maharashtra",
            "pinCode": "411001",
            "paymentTerms": null,
            "creditLimit": null,
            "createdAt": "2026-01-09T13:13:47.038Z",
            "updatedAt": "2026-01-09T13:13:47.038Z",
            "deletedAt": null,
            "storeId": "cmk6wcl38004f140r4229fbc5"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Supplier must have ID",
              "expected": "ID present",
              "actual": "cmk6wdela006e140ro690r6h9",
              "invariant": "DATA-001"
            }
          ],
          "duration": 494
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "DATA-INTEGRITY"
            }
          ],
          "duration": 92
        }
      ],
      "duration": 586
    },
    {
      "id": "billing.subscription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk6wcmbt004j140rjedaztop",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "TRIAL",
              "trialEndsAt": "2026-01-23T13:13:10.408Z",
              "currentPeriodStart": "2026-01-09T13:13:10.408Z",
              "currentPeriodEnd": "2026-01-23T13:13:10.408Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T13:13:10.409Z",
              "updatedAt": "2026-01-09T13:13:10.409Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan is TRIAL",
              "expected": "TRIAL",
              "actual": "free_trial",
              "invariant": "SUB-001"
            }
          ],
          "duration": 379
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcmbt004j140rjedaztop",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "EXPIRED",
            "trialEndsAt": "2026-01-23T13:13:10.408Z",
            "currentPeriodStart": "2026-01-09T13:13:10.408Z",
            "currentPeriodEnd": "2026-01-08T13:13:47.989Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T13:13:10.409Z",
            "updatedAt": "2026-01-09T13:13:47.990Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null,
            "plan": {
              "id": "cmiudhheo000014skldx27kfs",
              "name": "free_trial",
              "displayName": "Free Trial",
              "description": "14-day free trial with limited features",
              "price": "0",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 50,
              "prescriptionLimit": 100,
              "storageLimit": 100,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.160Z",
              "updatedAt": "2025-12-06T14:12:08.160Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "End date is in past",
              "expected": "Past Date",
              "actual": "2026-01-08T13:13:47.989Z",
              "invariant": "SUB-002"
            }
          ],
          "duration": 926
        },
        {
          "success": true,
          "data": {
            "isActive": false,
            "subscription": {
              "id": "cmk6wcmbt004j140rjedaztop",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "EXPIRED",
              "trialEndsAt": "2026-01-23T13:13:10.408Z",
              "currentPeriodStart": "2026-01-09T13:13:10.408Z",
              "currentPeriodEnd": "2026-01-08T13:13:47.989Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T13:13:10.409Z",
              "updatedAt": "2026-01-09T13:13:47.990Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription is inactive",
              "expected": false,
              "actual": false,
              "invariant": "SUB-003"
            }
          ],
          "duration": 370
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcmbt004j140rjedaztop",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "planId": "cmiudhi1f000114sknt4k3mqx",
            "status": "ACTIVE",
            "trialEndsAt": null,
            "currentPeriodStart": "2026-01-09T13:13:49.572Z",
            "currentPeriodEnd": "2026-02-09T13:13:49.572Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T13:13:10.409Z",
            "updatedAt": "2026-01-09T13:13:49.573Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null,
            "plan": {
              "id": "cmiudhi1f000114sknt4k3mqx",
              "name": "basic",
              "displayName": "Basic Plan",
              "description": "Perfect for small pharmacies",
              "price": "999",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 500,
              "prescriptionLimit": null,
              "storageLimit": 1000,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.980Z",
              "updatedAt": "2025-12-06T14:12:08.980Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan upgraded to Basic",
              "expected": "basic",
              "actual": "basic",
              "invariant": "SUB-004"
            }
          ],
          "duration": 1118
        },
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk6wcmbt004j140rjedaztop",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "planId": "cmiudhi1f000114sknt4k3mqx",
              "status": "ACTIVE",
              "trialEndsAt": null,
              "currentPeriodStart": "2026-01-09T13:13:49.572Z",
              "currentPeriodEnd": "2026-02-09T13:13:49.572Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T13:13:10.409Z",
              "updatedAt": "2026-01-09T13:13:49.573Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhi1f000114sknt4k3mqx",
                "name": "basic",
                "displayName": "Basic Plan",
                "description": "Perfect for small pharmacies",
                "price": "999",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 500,
                "prescriptionLimit": null,
                "storageLimit": 1000,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.980Z",
                "updatedAt": "2025-12-06T14:12:08.980Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription restored to active",
              "expected": true,
              "actual": true,
              "invariant": "SUB-005"
            }
          ],
          "duration": 376
        }
      ],
      "duration": 3172
    },
    {
      "id": "clinical.dispense",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wdhhk006g140rkw0or3j0",
            "refillId": "cmk6wd9gm0065140rghqbohld",
            "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
            "status": "QUEUED",
            "queuedAt": "2026-01-09T13:13:50.791Z",
            "verifyingAt": null,
            "fillingAt": null,
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6wcqcd004p140rnl0vxsh6",
            "verifiedBy": null,
            "filledBy": null,
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": null,
            "cancellationReason": null,
            "createdAt": "2026-01-09T13:13:50.793Z",
            "updatedAt": "2026-01-09T13:13:50.793Z",
            "refill": {
              "id": "cmk6wd9gm0065140rghqbohld",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T13:13:38.690Z",
              "notes": null,
              "createdAt": "2026-01-09T13:13:40.390Z",
              "updatedAt": "2026-01-09T13:13:40.390Z",
              "prescription": {
                "id": "cmk6wd8dk0060140rfze1jvvy",
                "storeId": "cmk6wcl38004f140r4229fbc5",
                "patientId": "cmk6wcwxe0053140r4hriio4w",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T13:13:38.984Z",
                "updatedAt": "2026-01-09T13:13:42.553Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T13:13:38.983Z",
                "expiryDate": "2026-07-09T13:13:38.690Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6wcwxe0053140r4hriio4w",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767964403982",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T13:13:23.983Z",
                  "updatedAt": "2026-01-09T13:13:23.983Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6wd8yo0062140rf3zqhkxk",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
              "createdAt": "2026-01-09T13:13:39.744Z",
              "items": [
                {
                  "id": "cmk6wd8yo0064140rmqtx23p1",
                  "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                  "drugId": "cmk6wd82t005z140rvyhk501e",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6wd82t005z140rvyhk501e",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767964418595",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T13:13:38.597Z",
                    "updatedAt": "2026-01-09T13:13:38.597Z",
                    "storeId": "cmk6wcl38004f140r4229fbc5",
                    "hsnCodeId": null
                  },
                  "batch": null
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense must be created",
              "expected": "Dispense object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "QUEUED",
              "actual": "QUEUED",
              "message": "Dispense status should be QUEUED",
              "invariant": "DISP-001"
            }
          ],
          "duration": 1396
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdhhk006g140rkw0or3j0",
            "refillId": "cmk6wd9gm0065140rghqbohld",
            "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
            "status": "FILLING",
            "queuedAt": "2026-01-09T13:13:50.791Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T13:13:51.996Z",
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6wcqcd004p140rnl0vxsh6",
            "verifiedBy": null,
            "filledBy": "cmk6wcqcd004p140rnl0vxsh6",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to FILLING",
            "cancellationReason": null,
            "createdAt": "2026-01-09T13:13:50.793Z",
            "updatedAt": "2026-01-09T13:13:51.997Z",
            "refill": {
              "id": "cmk6wd9gm0065140rghqbohld",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T13:13:38.690Z",
              "notes": null,
              "createdAt": "2026-01-09T13:13:40.390Z",
              "updatedAt": "2026-01-09T13:13:40.390Z",
              "prescription": {
                "id": "cmk6wd8dk0060140rfze1jvvy",
                "storeId": "cmk6wcl38004f140r4229fbc5",
                "patientId": "cmk6wcwxe0053140r4hriio4w",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T13:13:38.984Z",
                "updatedAt": "2026-01-09T13:13:42.553Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T13:13:38.983Z",
                "expiryDate": "2026-07-09T13:13:38.690Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6wcwxe0053140r4hriio4w",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767964403982",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T13:13:23.983Z",
                  "updatedAt": "2026-01-09T13:13:23.983Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6wd8yo0062140rf3zqhkxk",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
              "createdAt": "2026-01-09T13:13:39.744Z",
              "items": [
                {
                  "id": "cmk6wd8yo0064140rmqtx23p1",
                  "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                  "drugId": "cmk6wd82t005z140rvyhk501e",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6wd82t005z140rvyhk501e",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767964418595",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T13:13:38.597Z",
                    "updatedAt": "2026-01-09T13:13:38.597Z",
                    "storeId": "cmk6wcl38004f140r4229fbc5",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "FILLING",
              "actual": "FILLING",
              "message": "Dispense status should be FILLING",
              "invariant": "DISP-002"
            }
          ],
          "duration": 1243
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdhhk006g140rkw0or3j0",
            "refillId": "cmk6wd9gm0065140rghqbohld",
            "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
            "status": "READY",
            "queuedAt": "2026-01-09T13:13:50.791Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T13:13:51.996Z",
            "checkingAt": null,
            "readyAt": "2026-01-09T13:13:53.239Z",
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6wcqcd004p140rnl0vxsh6",
            "verifiedBy": null,
            "filledBy": "cmk6wcqcd004p140rnl0vxsh6",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to READY",
            "cancellationReason": null,
            "createdAt": "2026-01-09T13:13:50.793Z",
            "updatedAt": "2026-01-09T13:13:53.241Z",
            "refill": {
              "id": "cmk6wd9gm0065140rghqbohld",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T13:13:38.690Z",
              "notes": null,
              "createdAt": "2026-01-09T13:13:40.390Z",
              "updatedAt": "2026-01-09T13:13:40.390Z",
              "prescription": {
                "id": "cmk6wd8dk0060140rfze1jvvy",
                "storeId": "cmk6wcl38004f140r4229fbc5",
                "patientId": "cmk6wcwxe0053140r4hriio4w",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T13:13:38.984Z",
                "updatedAt": "2026-01-09T13:13:42.553Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T13:13:38.983Z",
                "expiryDate": "2026-07-09T13:13:38.690Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6wcwxe0053140r4hriio4w",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767964403982",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T13:13:23.983Z",
                  "updatedAt": "2026-01-09T13:13:23.983Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6wd8yo0062140rf3zqhkxk",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
              "createdAt": "2026-01-09T13:13:39.744Z",
              "items": [
                {
                  "id": "cmk6wd8yo0064140rmqtx23p1",
                  "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                  "drugId": "cmk6wd82t005z140rvyhk501e",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6wd82t005z140rvyhk501e",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767964418595",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T13:13:38.597Z",
                    "updatedAt": "2026-01-09T13:13:38.597Z",
                    "storeId": "cmk6wcl38004f140r4229fbc5",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "READY",
              "actual": "READY",
              "message": "Dispense status should be READY",
              "invariant": "DISP-003"
            }
          ],
          "duration": 1217
        },
        {
          "success": true,
          "data": [
            {
              "id": "cmk6wdhhk006g140rkw0or3j0",
              "refillId": "cmk6wd9gm0065140rghqbohld",
              "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
              "status": "READY",
              "queuedAt": "2026-01-09T13:13:50.791Z",
              "verifyingAt": null,
              "fillingAt": "2026-01-09T13:13:51.996Z",
              "checkingAt": null,
              "readyAt": "2026-01-09T13:13:53.239Z",
              "completedAt": null,
              "cancelledAt": null,
              "queuedBy": "cmk6wcqcd004p140rnl0vxsh6",
              "verifiedBy": null,
              "filledBy": "cmk6wcqcd004p140rnl0vxsh6",
              "checkedBy": null,
              "dispensedBy": null,
              "quantityDispensed": null,
              "notes": "DPFV: Progressed to READY",
              "cancellationReason": null,
              "createdAt": "2026-01-09T13:13:50.793Z",
              "updatedAt": "2026-01-09T13:13:53.241Z",
              "refill": {
                "id": "cmk6wd9gm0065140rghqbohld",
                "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T13:13:38.690Z",
                "notes": null,
                "createdAt": "2026-01-09T13:13:40.390Z",
                "updatedAt": "2026-01-09T13:13:40.390Z",
                "prescription": {
                  "id": "cmk6wd8dk0060140rfze1jvvy",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "patientId": "cmk6wcwxe0053140r4hriio4w",
                  "prescriberId": null,
                  "source": "manual",
                  "priority": "Normal",
                  "createdAt": "2026-01-09T13:13:38.984Z",
                  "updatedAt": "2026-01-09T13:13:42.553Z",
                  "deletedAt": null,
                  "notes": null,
                  "controlledFlag": false,
                  "eRxId": null,
                  "eRxMetadata": null,
                  "nextRefillDue": null,
                  "ocrConfidence": null,
                  "ocrText": null,
                  "reminderSent": null,
                  "uploadedImages": [],
                  "prescriptionNumber": "RX000002",
                  "type": "REGULAR",
                  "issueDate": "2026-01-09T13:13:38.983Z",
                  "expiryDate": "2026-07-09T13:13:38.690Z",
                  "totalRefills": 3,
                  "status": "ACTIVE",
                  "patient": {
                    "id": "cmk6wcwxe0053140r4hriio4w",
                    "storeId": "cmk6wcl38004f140r4229fbc5",
                    "firstName": "Walk-in",
                    "middleName": null,
                    "lastName": "Customer",
                    "dateOfBirth": null,
                    "gender": null,
                    "photoUrl": null,
                    "phoneNumber": "WALKIN-1767964403982",
                    "email": null,
                    "addressLine1": null,
                    "addressLine2": null,
                    "city": null,
                    "state": null,
                    "pinCode": null,
                    "bloodGroup": null,
                    "allergies": [],
                    "chronicConditions": [],
                    "emergencyContactName": null,
                    "emergencyContactPhone": null,
                    "createdAt": "2026-01-09T13:13:23.983Z",
                    "updatedAt": "2026-01-09T13:13:23.983Z",
                    "deletedAt": null,
                    "deletedBy": null,
                    "creditLimit": "0",
                    "currentBalance": "0"
                  }
                }
              }
            }
          ],
          "assertions": [
            {
              "passed": true,
              "message": "Dispense visible",
              "expected": "Dispense in list",
              "actual": "Found",
              "invariant": "POS-001"
            }
          ],
          "duration": 473
        }
      ],
      "duration": 4330
    },
    {
      "id": "procurement.po",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wdkoi006i140rri0l30zo",
            "rxcui": null,
            "name": "PO Test Drug 1767964434930",
            "genericName": null,
            "strength": null,
            "form": null,
            "manufacturer": "Cipla",
            "schedule": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-09T13:13:54.931Z",
            "updatedAt": "2026-01-09T13:13:54.931Z",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "hsnCodeId": null
          },
          "assertions": [],
          "duration": 187
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdm7s006k140rujquiv29",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "supplierId": "cmk6wdela006e140ro690r6h9",
            "poNumber": "PO202601436813",
            "status": "DRAFT",
            "orderDate": "2026-01-09T13:13:56.920Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
            "approvedBy": null,
            "approvedAt": null,
            "createdAt": "2026-01-09T13:13:56.920Z",
            "updatedAt": "2026-01-09T13:13:56.920Z",
            "deletedAt": null,
            "notes": null,
            "items": [
              {
                "id": "cmk6wdmd0006m140rw387zu59",
                "poId": "cmk6wdm7s006k140rujquiv29",
                "drugId": "cmk6wdkoi006i140rri0l30zo",
                "quantity": 100,
                "receivedQty": 0,
                "packSize": 1,
                "packUnit": "Strip",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "5600"
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "PO Total match",
              "expected": 5600,
              "actual": "5600",
              "invariant": "INV-007"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Initial status DRAFT",
              "invariant": "STATE-001"
            }
          ],
          "duration": 2192
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdm7s006k140rujquiv29",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "supplierId": "cmk6wdela006e140ro690r6h9",
            "poNumber": "PO202601436813",
            "status": "APPROVED",
            "orderDate": "2026-01-09T13:13:56.920Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
            "approvedBy": "cmk6wcqcd004p140rnl0vxsh6",
            "approvedAt": "2026-01-09T13:13:57.990Z",
            "createdAt": "2026-01-09T13:13:56.920Z",
            "updatedAt": "2026-01-09T13:13:57.991Z",
            "deletedAt": null,
            "notes": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "APPROVED",
              "actual": "APPROVED",
              "message": "Status -> APPROVED",
              "invariant": "STATE-002"
            }
          ],
          "duration": 1064
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdm7s006k140rujquiv29",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "supplierId": "cmk6wdela006e140ro690r6h9",
            "poNumber": "PO202601436813",
            "status": "SENT",
            "orderDate": "2026-01-09T13:13:56.920Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
            "approvedBy": "cmk6wcqcd004p140rnl0vxsh6",
            "approvedAt": "2026-01-09T13:13:57.990Z",
            "createdAt": "2026-01-09T13:13:56.920Z",
            "updatedAt": "2026-01-09T13:13:59.093Z",
            "deletedAt": null,
            "notes": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "SENT",
              "actual": "SENT",
              "message": "Status -> SENT",
              "invariant": "STATE-003"
            }
          ],
          "duration": 1213
        }
      ],
      "duration": 4656
    },
    {
      "id": "pos.rx-sale",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wdtgc006y140rnqtcgvmy",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "invoiceNumber": "INV1767964445867",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6wcwxe0053140r4hriio4w",
            "subtotal": "3000",
            "discountAmount": "0",
            "taxAmount": "360",
            "roundOff": "0",
            "total": "3360",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6wcqcd004p140rnl0vxsh6",
            "createdAt": "2026-01-09T13:14:06.300Z",
            "updatedAt": "2026-01-09T13:14:06.300Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6wdofh006n140r203sivvh",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6wdqxs006w140r60zzuld0",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Sale must be created",
              "expected": "Sale object",
              "actual": "Created",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "message": "Invoice number generated",
              "expected": "Invoice number",
              "actual": "INV1767964445867",
              "invariant": "SALE-002"
            }
          ],
          "duration": 10803
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdhhk006g140rkw0or3j0",
            "refillId": "cmk6wd9gm0065140rghqbohld",
            "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
            "status": "COMPLETED",
            "queuedAt": "2026-01-09T13:13:50.791Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T13:13:51.996Z",
            "checkingAt": null,
            "readyAt": "2026-01-09T13:13:53.239Z",
            "completedAt": "2026-01-09T13:14:10.390Z",
            "cancelledAt": null,
            "queuedBy": "cmk6wcqcd004p140rnl0vxsh6",
            "verifiedBy": null,
            "filledBy": "cmk6wcqcd004p140rnl0vxsh6",
            "checkedBy": null,
            "dispensedBy": "cmk6wcqcd004p140rnl0vxsh6",
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to COMPLETED",
            "cancellationReason": null,
            "createdAt": "2026-01-09T13:13:50.793Z",
            "updatedAt": "2026-01-09T13:14:10.391Z",
            "refill": {
              "id": "cmk6wd9gm0065140rghqbohld",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T13:13:38.690Z",
              "notes": null,
              "createdAt": "2026-01-09T13:13:40.390Z",
              "updatedAt": "2026-01-09T13:13:40.390Z",
              "prescription": {
                "id": "cmk6wd8dk0060140rfze1jvvy",
                "storeId": "cmk6wcl38004f140r4229fbc5",
                "patientId": "cmk6wcwxe0053140r4hriio4w",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T13:13:38.984Z",
                "updatedAt": "2026-01-09T13:13:42.553Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T13:13:38.983Z",
                "expiryDate": "2026-07-09T13:13:38.690Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6wcwxe0053140r4hriio4w",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767964403982",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T13:13:23.983Z",
                  "updatedAt": "2026-01-09T13:13:23.983Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6wd8yo0062140rf3zqhkxk",
              "prescriptionId": "cmk6wd8dk0060140rfze1jvvy",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
              "createdAt": "2026-01-09T13:13:39.744Z",
              "items": [
                {
                  "id": "cmk6wd8yo0064140rmqtx23p1",
                  "prescriptionVersionId": "cmk6wd8yo0062140rf3zqhkxk",
                  "drugId": "cmk6wd82t005z140rvyhk501e",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6wd82t005z140rvyhk501e",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767964418595",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T13:13:38.597Z",
                    "updatedAt": "2026-01-09T13:13:38.597Z",
                    "storeId": "cmk6wcl38004f140r4229fbc5",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense status must be COMPLETED",
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "invariant": "DISP-004"
            }
          ],
          "duration": 1087
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wcw7w0051140ryr9ct5u9",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "drugId": "cmk6wcvvv004z140rxxlthcpb",
            "batchNumber": "DPFV-1767964402996",
            "expiryDate": "2027-01-09T13:13:22.996Z",
            "quantityInStock": 60,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T13:13:23.228Z",
            "updatedAt": "2026-01-09T13:14:06.731Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6wcvvv004z140rxxlthcpb",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T13:13:22.795Z",
              "updatedAt": "2026-01-09T13:13:22.795Z",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": ">= 0",
              "actual": 60,
              "message": "Stock quantity must never be negative",
              "invariant": "INV-001"
            }
          ],
          "duration": 369
        }
      ],
      "duration": 12262
    },
    {
      "id": "procurement.grn",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6wdznv007a140rlzz59zhb",
            "grnNumber": "GRN202601 454230 ",
            "poId": "cmk6wdm7s006k140rujquiv29",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "supplierId": "cmk6wdela006e140ro690r6h9",
            "status": "DRAFT",
            "supplierInvoiceNo": null,
            "supplierInvoiceDate": null,
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-09T13:14:14.347Z",
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "notes": null,
            "completedAt": null,
            "createdAt": "2026-01-09T13:14:14.347Z",
            "updatedAt": "2026-01-09T13:14:14.347Z",
            "items": [
              {
                "id": "cmk6wdzqe007b140r3qtjv5va",
                "grnId": "cmk6wdznv007a140rlzz59zhb",
                "poItemId": "cmk6wdmd0006m140rw387zu59",
                "drugId": "cmk6wdkoi006i140rri0l30zo",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "TBD",
                "expiryDate": null,
                "mrp": "0",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "0",
                "discountType": "BEFORE_GST",
                "location": null,
                "isSplit": false,
                "parentItemId": null,
                "drug": {
                  "id": "cmk6wdkoi006i140rri0l30zo",
                  "rxcui": null,
                  "name": "PO Test Drug 1767964434930",
                  "genericName": null,
                  "strength": null,
                  "form": null,
                  "manufacturer": "Cipla",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T13:13:54.931Z",
                  "updatedAt": "2026-01-09T13:13:54.931Z",
                  "storeId": "cmk6wcl38004f140r4229fbc5",
                  "hsnCodeId": null
                }
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk6wdm7s006k140rujquiv29",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "supplierId": "cmk6wdela006e140ro690r6h9",
              "poNumber": "PO202601436813",
              "status": "SENT",
              "orderDate": "2026-01-09T13:13:56.920Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
              "approvedBy": "cmk6wcqcd004p140rnl0vxsh6",
              "approvedAt": "2026-01-09T13:13:57.990Z",
              "createdAt": "2026-01-09T13:13:56.920Z",
              "updatedAt": "2026-01-09T13:13:59.093Z",
              "deletedAt": null,
              "notes": null,
              "items": [
                {
                  "id": "cmk6wdmd0006m140rw387zu59",
                  "poId": "cmk6wdm7s006k140rujquiv29",
                  "drugId": "cmk6wdkoi006i140rri0l30zo",
                  "quantity": 100,
                  "receivedQty": 0,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600",
                  "drug": {
                    "id": "cmk6wdkoi006i140rri0l30zo",
                    "rxcui": null,
                    "name": "PO Test Drug 1767964434930",
                    "genericName": null,
                    "strength": null,
                    "form": null,
                    "manufacturer": "Cipla",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T13:13:54.931Z",
                    "updatedAt": "2026-01-09T13:13:54.931Z",
                    "storeId": "cmk6wcl38004f140r4229fbc5",
                    "hsnCodeId": null
                  }
                }
              ],
              "supplier": {
                "id": "cmk6wdela006e140ro690r6h9",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-09T13:13:47.038Z",
                "updatedAt": "2026-01-09T13:13:47.038Z",
                "deletedAt": null,
                "storeId": "cmk6wcl38004f140r4229fbc5"
              }
            },
            "attachments": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "GRN object created",
              "expected": "GRN ID",
              "actual": "cmk6wdznv007a140rlzz59zhb",
              "invariant": "DATA-001"
            }
          ],
          "duration": 3539
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdzqe007b140r3qtjv5va",
            "grnId": "cmk6wdznv007a140rlzz59zhb",
            "poItemId": "cmk6wdmd0006m140rw387zu59",
            "drugId": "cmk6wdkoi006i140rri0l30zo",
            "orderedQty": 100,
            "receivedQty": 100,
            "freeQty": 0,
            "rejectedQty": 0,
            "batchNumber": "BATCH-1767964455387",
            "expiryDate": "2027-01-09T13:14:15.387Z",
            "mrp": "100",
            "unitPrice": "50",
            "discountPercent": "0",
            "gstPercent": "12",
            "lineTotal": "5600",
            "discountType": "BEFORE_GST",
            "location": null,
            "isSplit": false,
            "parentItemId": null
          },
          "assertions": [
            {
              "passed": true,
              "message": "Update successful",
              "expected": true,
              "actual": true,
              "invariant": "DATA-002"
            }
          ],
          "duration": 2601
        },
        {
          "success": true,
          "data": {
            "id": "cmk6wdznv007a140rlzz59zhb",
            "grnNumber": "GRN202601 454230 ",
            "poId": "cmk6wdm7s006k140rujquiv29",
            "storeId": "cmk6wcl38004f140r4229fbc5",
            "supplierId": "cmk6wdela006e140ro690r6h9",
            "status": "COMPLETED",
            "supplierInvoiceNo": "INV-1767964457989",
            "supplierInvoiceDate": "2026-01-09T13:14:17.989Z",
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-09T13:14:14.347Z",
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "notes": null,
            "completedAt": "2026-01-09T13:14:24.065Z",
            "createdAt": "2026-01-09T13:14:14.347Z",
            "updatedAt": "2026-01-09T13:14:24.066Z",
            "items": [
              {
                "id": "cmk6wdzqe007b140r3qtjv5va",
                "grnId": "cmk6wdznv007a140rlzz59zhb",
                "poItemId": "cmk6wdmd0006m140rw387zu59",
                "drugId": "cmk6wdkoi006i140rri0l30zo",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "BATCH-1767964455387",
                "expiryDate": "2027-01-09T13:14:15.387Z",
                "mrp": "100",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "5600",
                "discountType": "BEFORE_GST",
                "location": null,
                "isSplit": false,
                "parentItemId": null
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk6wdm7s006k140rujquiv29",
              "storeId": "cmk6wcl38004f140r4229fbc5",
              "supplierId": "cmk6wdela006e140ro690r6h9",
              "poNumber": "PO202601436813",
              "status": "RECEIVED",
              "orderDate": "2026-01-09T13:13:56.920Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "createdBy": "cmk6wcqcd004p140rnl0vxsh6",
              "approvedBy": "cmk6wcqcd004p140rnl0vxsh6",
              "approvedAt": "2026-01-09T13:13:57.990Z",
              "createdAt": "2026-01-09T13:13:56.920Z",
              "updatedAt": "2026-01-09T13:14:23.880Z",
              "deletedAt": null,
              "notes": null,
              "items": [
                {
                  "id": "cmk6wdmd0006m140rw387zu59",
                  "poId": "cmk6wdm7s006k140rujquiv29",
                  "drugId": "cmk6wdkoi006i140rri0l30zo",
                  "quantity": 100,
                  "receivedQty": 100,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600"
                }
              ],
              "supplier": {
                "id": "cmk6wdela006e140ro690r6h9",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-09T13:13:47.038Z",
                "updatedAt": "2026-01-09T13:13:47.038Z",
                "deletedAt": null,
                "storeId": "cmk6wcl38004f140r4229fbc5"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "message": "Status -> COMPLETED",
              "invariant": "STATE-001"
            }
          ],
          "duration": 6849
        },
        {
          "success": true,
          "data": {
            "mismatches": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Verification step passed",
              "expected": true,
              "actual": true,
              "invariant": "INV-004"
            }
          ],
          "duration": 85
        }
      ],
      "duration": 13075
    }
  ],
  "failures": [
    {
      "scenarioId": "audit.gdpr",
      "scenarioName": "GDPR Data Export",
      "stepId": "gdpr.export-json",
      "stepName": "Export User Data (JSON)",
      "invariant": "INV-AUDIT",
      "expected": "No error",
      "actual": "Cannot read properties of null (reading 'user')",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.refund",
      "scenarioName": "Sale Refund Flow",
      "stepId": "refund.create-sale",
      "stepName": "Create Sale to Refund",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.credit",
      "scenarioName": "Credit Sale Flow",
      "stepId": "credit.create-sale",
      "stepName": "Create Sale on Credit",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "documents.invoice-pdf",
      "scenarioName": "Invoice PDF Generation Flow",
      "stepId": "pdf.create-sale",
      "stepName": "Create Sale for Invoice",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "procurement.consolidated",
      "scenarioName": "Consolidated Invoice Flow",
      "stepId": "consolidated.create-grn-1",
      "stepName": "Create First GRN",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.roles",
      "scenarioName": "Roles & Permissions Flow",
      "stepId": "roles.create",
      "stepName": "Create custom role",
      "invariant": "DATA-001",
      "expected": "Role",
      "actual": "Null",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.features",
      "scenarioName": "Feature Toggles Flow",
      "stepId": "features.update",
      "stepName": "Override feature (Disable POS)",
      "invariant": "CONF-001",
      "expected": "hidden",
      "actual": "undefined",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    }
  ],
  "impactAnalysis": {
    "affectedFeatures": [
      "gdpr",
      "compliance",
      "audit",
      "pos",
      "refund",
      "inventory",
      "credit",
      "ledger",
      "patient",
      "pdf",
      "documents",
      "procurement",
      "grn",
      "billing",
      "admin",
      "roles",
      "permissions",
      "features"
    ],
    "totalBlocked": 0,
    "criticalBlocked": 0
  }
}
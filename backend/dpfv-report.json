{
  "runId": "dpfv-2026-01-09-1767960008993",
  "timestamp": "2026-01-09T11:57:23.981Z",
  "mode": "dev",
  "duration": 165011,
  "summary": {
    "total": 24,
    "passed": 15,
    "failed": 9,
    "blocked": 0,
    "skipped": 0
  },
  "scenarioMap": {
    "core.auth": "PASSED",
    "reports.sales": "FAILED",
    "audit.gdpr": "FAILED",
    "pos.draft": "PASSED",
    "pos.refund": "FAILED",
    "pos.credit": "FAILED",
    "documents.invoice-pdf": "FAILED",
    "procurement.consolidated": "FAILED",
    "core.onboarding": "PASSED",
    "admin.pin": "PASSED",
    "audit.access": "PASSED",
    "communication.email": "PASSED",
    "communication.whatsapp": "PASSED",
    "pos.quick-sale": "FAILED",
    "patients.create": "PASSED",
    "clinical.prescription": "PASSED",
    "admin.roles": "FAILED",
    "admin.features": "FAILED",
    "procurement.supplier": "PASSED",
    "billing.subscription": "PASSED",
    "clinical.dispense": "PASSED",
    "procurement.po": "PASSED",
    "pos.rx-sale": "PASSED",
    "procurement.grn": "PASSED"
  },
  "scenarios": [
    {
      "id": "core.auth",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6tn6oj000014pcs572f14p",
              "email": "dpfv-test-1767959843982@test.hoperx.com",
              "phoneNumber": "9959843982",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "isActive": true
            },
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG42b2owMDAwMTRwY3M1NzJmMTRwIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk1OTg0NCwiZXhwIjoxNzY3OTYzNDQ0fQ.7FB_axRX5O94R3iPBaCR7RIpZO8YmDkmzSCaPU7KTi4",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG42b2owMDAwMTRwY3M1NzJmMTRwIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiI4ZDM5ZWY0YS1hOWVmLTQ3NDMtYjkyZi1hYTBiY2RhNjVlOTUiLCJpYXQiOjE3Njc5NTk4NDQsImV4cCI6MTc2ODU2NDY0NH0.lJ8V16gDiefYnUnx3459f0FDFfpcDWjAD5hUDs5FMJ0"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "User object with id, email, firstName",
              "actual": {
                "id": "cmk6tn6oj000014pcs572f14p",
                "email": "dpfv-test-1767959843982@test.hoperx.com"
              },
              "message": "Signup must return complete user object",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT access token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid access token",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT refresh token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid refresh token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 724
        },
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6tn6oj000014pcs572f14p",
              "email": "dpfv-test-1767959843982@test.hoperx.com",
              "phoneNumber": "9959843982",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "createdAt": "2026-01-09T11:57:24.500Z",
              "updatedAt": "2026-01-09T11:57:24.500Z",
              "deletedAt": null,
              "signatureUrl": null,
              "preferences": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG42b2owMDAwMTRwY3M1NzJmMTRwIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk1OTg0NSwiZXhwIjoxNzY3OTYzNDQ1fQ.ateBeE_mATPS2dUH-nnusTqaFoFrcSc8wFPOrOtW2JE",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG42b2owMDAwMTRwY3M1NzJmMTRwIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJhZjQ3ZmMyNy1iOTQ5LTQ3YjctODgyNC03OTQwMWE1ZmJhOTgiLCJpYXQiOjE3Njc5NTk4NDUsImV4cCI6MTc2ODU2NDY0NX0.PsH3bTXB_cu5zKGIHiaX4Vp6FpQRnYXvj302wL0hC_c"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "cmk6tn6oj000014pcs572f14p",
              "actual": "cmk6tn6oj000014pcs572f14p",
              "message": "Login must return same user as signup",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": true,
              "actual": true,
              "message": "Logged in user must be active",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 1700
        },
        {
          "success": true,
          "data": {
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG42b2owMDAwMTRwY3M1NzJmMTRwIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk1OTg0NiwiZXhwIjoxNzY3OTYzNDQ2fQ.N5iyLOU-L-aG-ZW7D_RF2ASSncgbbKPxuw6nlt8Z1q4",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG42b2owMDAwMTRwY3M1NzJmMTRwIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiIzMzg0Y2U1Zi0yNjcwLTQ3NDctODRhMy1mMTBjMThiM2ExODIiLCJpYXQiOjE3Njc5NTk4NDYsImV4cCI6MTc2ODU2NDY0Nn0.PuV68QF7Jq_SkP0ojkyRlPwuT6jtidFOUi7PX_qJDuQ"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "New access token different from original",
              "actual": "New token",
              "message": "Token refresh must generate new access token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 275
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tn6oj000014pcs572f14p",
            "email": "dpfv-test-1767959843982@test.hoperx.com",
            "phoneNumber": "9959843982",
            "firstName": "DPFV",
            "lastName": "TestUser",
            "role": "ADMIN",
            "isActive": true,
            "pinHash": null,
            "pinAttempts": 0,
            "pinLockedUntil": null,
            "lastLoginAt": null,
            "faceDataUrl": null,
            "hourlyRate": null,
            "monthlyRate": null,
            "shiftId": null,
            "joiningDate": null,
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "employeeId": null,
            "createdAt": "2026-01-09T11:57:24.500Z",
            "updatedAt": "2026-01-09T11:57:24.500Z",
            "deletedAt": null,
            "signatureUrl": null,
            "preferences": null,
            "storeUsers": []
          },
          "assertions": [
            {
              "passed": true,
              "expected": "dpfv-test-1767959843982@test.hoperx.com",
              "actual": "dpfv-test-1767959843982@test.hoperx.com",
              "message": "Profile email must match user email",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "No password in profile",
              "actual": "No password",
              "message": "Profile must not expose password hash",
              "invariant": "AUTH-002"
            }
          ],
          "duration": 179
        }
      ],
      "duration": 2880
    },
    {
      "id": "reports.sales",
      "status": "FAILED",
      "failedAtStep": "reports.get-today",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6tn8wv000414pcnrmz6mv5",
              "name": "Report Test Pharmacy 1767959846862",
              "displayName": "Report Pharma 1767959846862",
              "email": "report-store-1767959846862@test.hoperx.com",
              "phoneNumber": "9959846862",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "Test Address",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T11:57:27.392Z",
              "updatedAt": "2026-01-09T11:57:27.392Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully",
            "patient": {
              "id": "cmk6tnagq000814pcdaqt7r97",
              "storeId": "cmk6tn8wv000414pcnrmz6mv5",
              "firstName": "Test",
              "middleName": null,
              "lastName": "Patient",
              "dateOfBirth": null,
              "gender": "Male",
              "photoUrl": null,
              "phoneNumber": "9959846862",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T11:57:29.402Z",
              "updatedAt": "2026-01-09T11:57:29.402Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            }
          },
          "assertions": [],
          "duration": 2756
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tnm42000q14pc4bxnl3mp",
            "storeId": "cmk6tn8wv000414pcnrmz6mv5",
            "invoiceNumber": "INV1767959863824",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6tnagq000814pcdaqt7r97",
            "subtotal": "200",
            "discountAmount": "0",
            "taxAmount": "24",
            "roundOff": "0",
            "total": "224",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6tn8rp000314pcu3tkstft",
            "createdAt": "2026-01-09T11:57:44.498Z",
            "updatedAt": "2026-01-09T11:57:44.498Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6tnc1h000d14pckbm15p5n",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6tnh5x000o14pczhqg3rp0",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [],
          "duration": 21227
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Get sales report for today\" timed out after 5000ms",
            "stack": "Error: Step \"Get sales report for today\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5003
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Get sales report for today\" timed out after 5000ms",
        "stack": "Error: Step \"Get sales report for today\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 28991
    },
    {
      "id": "audit.gdpr",
      "status": "FAILED",
      "failedAtStep": "gdpr.export-json",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 3000
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'user')",
              "message": "Assertion \"Export contains user profile\" threw: Cannot read properties of null (reading 'user')",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'stores')",
              "message": "Assertion \"Export contains stores\" threw: Cannot read properties of null (reading 'stores')",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 666,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 3668
    },
    {
      "id": "pos.draft",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6tny5p001814pcqaig9ye6",
              "name": "Draft Test Store 1767959879522",
              "displayName": "Draft Store",
              "email": "draft-store-1767959879522@test.hoperx.com",
              "phoneNumber": "9959879522",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "Draft Lane",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "MH",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T11:58:00.109Z",
              "updatedAt": "2026-01-09T11:58:00.109Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [],
          "duration": 2148
        },
        {
          "success": true,
          "data": {
            "id": "cmk6to17f001c14pc4wk4u1p1",
            "storeId": "cmk6tny5p001814pcqaig9ye6",
            "draftNumber": "DRF1767959884057",
            "customerName": null,
            "customerPhone": null,
            "customerId": null,
            "items": "[{\"drugId\":\"cmk3ve3ke000y148qncqimrqr\",\"batchId\":\"cmk40xxi30010142aeea0ynen\",\"quantity\":1,\"mrp\":50,\"discount\":0}]",
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "createdBy": "cmk6tnxzq001714pc35gyaox1",
            "expiresAt": "2026-01-16T11:58:02.290Z",
            "createdAt": "2026-01-09T11:58:04.059Z",
            "updatedAt": "2026-01-09T11:58:04.059Z",
            "dispenseFor": null
          },
          "assertions": [],
          "duration": 2571
        }
      ],
      "duration": 4720
    },
    {
      "id": "pos.refund",
      "status": "FAILED",
      "failedAtStep": "refund.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2881
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5005
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7888
    },
    {
      "id": "pos.credit",
      "status": "FAILED",
      "failedAtStep": "credit.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 5087
        },
        {
          "success": true,
          "data": {
            "expected": 0,
            "actual": 0
          },
          "assertions": [],
          "duration": 235
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5001
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 10324
    },
    {
      "id": "documents.invoice-pdf",
      "status": "FAILED",
      "failedAtStep": "pdf.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 6425
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 11428
    },
    {
      "id": "procurement.consolidated",
      "status": "FAILED",
      "failedAtStep": "consolidated.create-grn-1",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2414
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create First GRN\" timed out after 5000ms",
            "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5004
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create First GRN\" timed out after 5000ms",
        "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7419
    },
    {
      "id": "core.onboarding",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6tou1b004b14pc60zohqfx",
              "name": "DPFV Test Pharmacy 1767959921301",
              "displayName": "Test Pharma 1767959921301",
              "email": "store-1767959921301@test.hoperx.com",
              "phoneNumber": "9959921301",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T11:58:41.422Z",
              "updatedAt": "2026-01-09T11:58:41.422Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Store with ID",
              "actual": "cmk6tou1b004b14pc60zohqfx",
              "message": "Onboarding must create store with ID",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "Store name contains \"DPFV Test Pharmacy\"",
              "actual": "DPFV Test Pharmacy 1767959921301",
              "message": "Store name must match input",
              "invariant": "INV-008"
            }
          ],
          "duration": 1388
        },
        {
          "success": true,
          "data": {
            "userId": "cmk6toohe003n14pct57ejdmm",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "isPrimary": true,
            "assignedAt": "2026-01-09T11:58:41.527Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "StoreUser association",
              "actual": "Found",
              "message": "User must be associated with store",
              "invariant": "INV-008"
            }
          ],
          "duration": 205
        },
        {
          "success": true,
          "data": {
            "id": "cmk6toulb004d14pcxf5ykc8v",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "TRIAL",
            "trialEndsAt": "2026-01-23T11:58:42.142Z",
            "currentPeriodStart": "2026-01-09T11:58:42.142Z",
            "currentPeriodEnd": "2026-01-23T11:58:42.142Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T11:58:42.143Z",
            "updatedAt": "2026-01-09T11:58:42.143Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Subscription exists",
              "actual": "Found",
              "message": "Store must have subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "TRIAL",
              "actual": "TRIAL",
              "message": "New store must have TRIAL subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "trialEndsAt and currentPeriodStart set",
              "actual": {
                "trialEndsAt": "2026-01-23T11:58:42.142Z",
                "currentPeriodStart": "2026-01-09T11:58:42.142Z"
              },
              "message": "Trial dates must be configured",
              "invariant": "INV-008"
            }
          ],
          "duration": 207
        },
        {
          "success": true,
          "data": {},
          "assertions": [
            {
              "passed": true,
              "expected": {
                "hasStore": true,
                "hasSubscription": true
              },
              "actual": {
                "hasStore": true,
                "hasSubscription": true
              },
              "message": "Onboarding must create Store + StoreUser + Subscription atomically",
              "invariant": "INV-008"
            }
          ],
          "duration": 833
        }
      ],
      "duration": 2635
    },
    {
      "id": "admin.pin",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "success": true,
            "message": "Admin PIN set up successfully"
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN setup API returned success",
              "expected": "Success",
              "actual": "Success",
              "invariant": "INV-013"
            }
          ],
          "duration": 1049
        },
        {
          "success": true,
          "data": {
            "valid": true
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN verification passed",
              "expected": true,
              "actual": true,
              "invariant": "SEC-001"
            }
          ],
          "duration": 678
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "SEC-002"
            }
          ],
          "duration": 523
        }
      ],
      "duration": 2251
    },
    {
      "id": "audit.access",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6toy1c004j14pc3zt08h0i",
              "email": "dpfv-audit-admin@test.hoperx.com",
              "phoneNumber": "9998887776",
              "firstName": "Audit",
              "lastName": "Admin",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "createdAt": "2026-01-09T11:58:46.608Z",
              "updatedAt": "2026-01-09T11:58:46.608Z",
              "deletedAt": null,
              "signatureUrl": null,
              "preferences": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG95MWMwMDRqMTRwYzN6dDA4aDBpIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk1OTkyNywiZXhwIjoxNzY3OTYzNTI3fQ.LwG1VtqtruUrH84iXkJHUuEzduFmk7C5fQ19F06M_20",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2dG95MWMwMDRqMTRwYzN6dDA4aDBpIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJhNWIzZDUwOS1lMDNiLTRmY2ItYmZjZC0wOGNjODhjYzgwYzIiLCJpYXQiOjE3Njc5NTk5MjcsImV4cCI6MTc2ODU2NDcyN30.xzvV1595Luq0tdozBXM58GIcPiWmCO8MbJ3L7mvwhoM"
          },
          "assertions": [],
          "duration": 2693
        },
        {
          "success": true,
          "data": {
            "id": "cmk6toz2q004l14pcovfnel7w",
            "userId": "cmk6toy1c004j14pc3zt08h0i",
            "eventType": "login_success",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier",
            "deviceInfo": null,
            "createdAt": "2026-01-09T11:58:47.954Z",
            "geolocation": null,
            "loginMethod": "EMAIL_PASSWORD"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_success",
              "actual": "login_success",
              "message": "Latest log should be login_success",
              "invariant": "AUDIT-001"
            },
            {
              "passed": true,
              "expected": "IP Address",
              "actual": "127.0.0.1",
              "message": "IP address must be recorded",
              "invariant": "AUDIT-002"
            }
          ],
          "duration": 309
        },
        {
          "success": true,
          "data": {
            "error": "Unauthorized"
          },
          "assertions": [],
          "duration": 1206
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tp08r004t14pcfx54jh7r",
            "userId": "cmk6toy1c004j14pc3zt08h0i",
            "eventType": "login_failure",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier-Fail",
            "deviceInfo": null,
            "createdAt": "2026-01-09T11:58:49.467Z",
            "geolocation": null,
            "loginMethod": "Password"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_failure",
              "actual": "login_failure",
              "message": "Latest log should be login_failure",
              "invariant": "AUDIT-001"
            }
          ],
          "duration": 206
        }
      ],
      "duration": 4414
    },
    {
      "id": "communication.email",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tp1a1004v14pcnnzgqlmh",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "email": "test@hoperx.com",
            "provider": "GMAIL",
            "smtpHost": null,
            "smtpPort": null,
            "smtpUser": null,
            "smtpPasswordEncrypted": null,
            "useTLS": true,
            "isVerified": true,
            "isActive": true,
            "lastTestedAt": null,
            "createdAt": "2026-01-09T11:58:50.809Z",
            "updatedAt": "2026-01-09T11:58:50.809Z",
            "isPrimary": true,
            "authMethod": "OAUTH",
            "gmailAccessToken": "mock_token",
            "gmailRefreshToken": "mock_refresh",
            "gmailTokenExpiry": "2026-01-09T12:58:50.808Z",
            "oauthConnectedAt": null,
            "store": {
              "id": "cmk6tou1b004b14pc60zohqfx",
              "name": "DPFV Test Pharmacy 1767959921301",
              "email": "store-1767959921301@test.hoperx.com"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email account available",
              "expected": "Account ID",
              "actual": "cmk6tp1a1004v14pcnnzgqlmh",
              "invariant": "DATA-001"
            }
          ],
          "duration": 1047
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tp28x004x14pchj9wi3qw",
            "emailAccountId": "cmk6tp1a1004v14pcnnzgqlmh",
            "to": [
              "recipient@hoperx.com"
            ],
            "cc": [],
            "bcc": [],
            "subject": "DPFV Test Email 1767959931648",
            "bodyHtml": "<p>Test Body</p>",
            "attachments": null,
            "status": "FAILED",
            "errorMessage": "Gmail not connected or token expired. Please reconnect.",
            "sentBy": "cmk6toy1c004j14pc3zt08h0i",
            "contextType": null,
            "contextId": null,
            "createdAt": "2026-01-09T11:58:52.066Z",
            "sentAt": null,
            "emailAccount": {
              "id": "cmk6tp1a1004v14pcnnzgqlmh",
              "email": "test@hoperx.com",
              "provider": "GMAIL",
              "isActive": true
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email attempt logged",
              "expected": "Log entry",
              "actual": "Found",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": true,
              "message": "Log status resolved (SENT/FAILED)",
              "expected": "SENT/FAILED",
              "actual": "FAILED",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 1989
        }
      ],
      "duration": 3036
    },
    {
      "id": "communication.whatsapp",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "messageId": "wa_1767959933637"
          },
          "assertions": [],
          "duration": 0
        }
      ],
      "duration": 0
    },
    {
      "id": "pos.quick-sale",
      "status": "FAILED",
      "failedAtStep": "quick-sale.create-sale",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tp3xy005714pccfldt1fw",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "drugId": "cmk6tp3mf005314pcd802u6is",
            "batchNumber": "DPFV-1767959934052",
            "expiryDate": "2027-01-09T11:58:54.052Z",
            "quantityInStock": 100,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T11:58:54.262Z",
            "updatedAt": "2026-01-09T11:58:54.262Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6tp3mf005314pcd802u6is",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T11:58:53.848Z",
              "updatedAt": "2026-01-09T11:58:53.848Z",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "> 0",
              "actual": 100,
              "message": "Test batch must have positive stock",
              "invariant": "INV-001"
            },
            {
              "passed": true,
              "expected": "Future expiry date",
              "actual": "2027-01-09T11:58:54.052Z",
              "message": "Test batch must not be expired",
              "invariant": "INV-001"
            }
          ],
          "duration": 1354
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create quick sale with payment\" timed out after 20000ms",
            "stack": "Error: Step \"Create quick sale with payment\" timed out after 20000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 20002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create quick sale with payment\" timed out after 20000ms",
        "stack": "Error: Step \"Create quick sale with payment\" timed out after 20000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 21358
    },
    {
      "id": "patients.create",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tpk5b006714pc72duz8nq",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "firstName": "John",
            "middleName": null,
            "lastName": "Doe",
            "dateOfBirth": "1990-01-15T00:00:00.000Z",
            "gender": "MALE",
            "photoUrl": null,
            "phoneNumber": "9959954996",
            "email": "john.doe.1767959954996@test.com",
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "createdAt": "2026-01-09T11:59:15.263Z",
            "updatedAt": "2026-01-09T11:59:15.263Z",
            "deletedAt": null,
            "deletedBy": null,
            "creditLimit": "0",
            "currentBalance": "0"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must be created",
              "expected": "Patient object",
              "actual": "Created",
              "invariant": "DATA-001"
            }
          ],
          "duration": 443
        },
        {
          "success": true,
          "data": {
            "patient": {
              "id": "cmk6tpk5b006714pc72duz8nq",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9959954996",
              "email": "john.doe.1767959954996@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T11:59:15.263Z",
              "updatedAt": "2026-01-09T11:59:15.263Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "issues": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient data is valid",
              "expected": "Valid data",
              "actual": "Valid data",
              "invariant": "DATA-002"
            }
          ],
          "duration": 0
        },
        {
          "success": true,
          "data": [],
          "assertions": [
            {
              "passed": true,
              "message": "Ledger check passed",
              "expected": "Ledger object or null",
              "actual": "Found",
              "invariant": "FIN-005"
            }
          ],
          "duration": 180
        }
      ],
      "duration": 623
    },
    {
      "id": "clinical.prescription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tp4ia005d14pcv73yw2yl",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "firstName": "Walk-in",
            "middleName": null,
            "lastName": "Customer",
            "dateOfBirth": null,
            "gender": null,
            "photoUrl": null,
            "phoneNumber": "WALKIN-1767959934993",
            "email": null,
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "createdAt": "2026-01-09T11:58:54.994Z",
            "updatedAt": "2026-01-09T11:58:54.994Z",
            "deletedAt": null,
            "deletedBy": null,
            "creditLimit": "0",
            "currentBalance": "0"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must exist with ID",
              "expected": "Valid ID",
              "actual": "cmk6tp4ia005d14pcv73yw2yl",
              "invariant": "DATA-001"
            }
          ],
          "duration": 277
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpkmx006914pcw3prtw1j",
            "rxcui": null,
            "name": "DPFV Test Drug 1767959955896",
            "genericName": "Test Generic",
            "strength": "500mg",
            "form": "Tablet",
            "manufacturer": "Test Pharma",
            "schedule": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-09T11:59:15.897Z",
            "updatedAt": "2026-01-09T11:59:15.897Z",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "hsnCodeId": null
          },
          "assertions": [],
          "duration": 89
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpkwo006a14pckmxgcv1j",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "patientId": "cmk6tp4ia005d14pcv73yw2yl",
            "prescriberId": null,
            "source": "manual",
            "priority": "Normal",
            "createdAt": "2026-01-09T11:59:16.249Z",
            "updatedAt": "2026-01-09T11:59:16.249Z",
            "deletedAt": null,
            "notes": null,
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "nextRefillDue": null,
            "ocrConfidence": null,
            "ocrText": null,
            "reminderSent": null,
            "uploadedImages": [],
            "prescriptionNumber": "RX000002",
            "type": "REGULAR",
            "issueDate": "2026-01-09T11:59:16.247Z",
            "expiryDate": "2026-07-09T11:59:15.986Z",
            "totalRefills": 3,
            "status": "DRAFT",
            "patient": {
              "id": "cmk6tp4ia005d14pcv73yw2yl",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "firstName": "Walk-in",
              "middleName": null,
              "lastName": "Customer",
              "dateOfBirth": null,
              "gender": null,
              "photoUrl": null,
              "phoneNumber": "WALKIN-1767959934993",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T11:58:54.994Z",
              "updatedAt": "2026-01-09T11:58:54.994Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "prescriber": null,
            "store": {
              "id": "cmk6tou1b004b14pc60zohqfx",
              "name": "DPFV Test Pharmacy 1767959921301",
              "displayName": "Test Pharma 1767959921301",
              "email": "store-1767959921301@test.hoperx.com",
              "phoneNumber": "9959921301",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T11:58:41.422Z",
              "updatedAt": "2026-01-09T11:58:41.422Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "versions": [
              {
                "id": "cmk6tplgi006c14pci0knkidz",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk6toy1c004j14pc3zt08h0i",
                "createdAt": "2026-01-09T11:59:16.962Z",
                "items": [
                  {
                    "id": "cmk6tplgi006e14pc0csgydmj",
                    "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                    "drugId": "cmk6tpkmx006914pcw3prtw1j",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk6tpkmx006914pcw3prtw1j",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767959955896",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-09T11:59:15.897Z",
                      "updatedAt": "2026-01-09T11:59:15.897Z",
                      "storeId": "cmk6tou1b004b14pc60zohqfx",
                      "hsnCodeId": null
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk6tplv8006f14pc4z3j5vlo",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              },
              {
                "id": "cmk6tplv8006g14pcw1k3uvxg",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              },
              {
                "id": "cmk6tplv8006h14pceis1jcg6",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              },
              {
                "id": "cmk6tplv8006i14pcx59iholm",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk6tplgi006e14pc0csgydmj",
                "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                "drugId": "cmk6tpkmx006914pcw3prtw1j",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk6tpkmx006914pcw3prtw1j",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767959955896",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T11:59:15.897Z",
                  "updatedAt": "2026-01-09T11:59:15.897Z",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "hsnCodeId": null
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk6tpm04006k14pc9sbw5kna",
                "storeId": "cmk6tou1b004b14pc60zohqfx",
                "userId": "cmk6toy1c004j14pc3zt08h0i",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk6tpkwo006a14pckmxgcv1j",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T11:59:17.668Z",
                "user": {
                  "id": "cmk6toy1c004j14pc3zt08h0i",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Prescription must be created",
              "expected": "Prescription object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Prescription status should be DRAFT",
              "invariant": "RX-001"
            }
          ],
          "duration": 3455
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpkwo006a14pckmxgcv1j",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "patientId": "cmk6tp4ia005d14pcv73yw2yl",
            "prescriberId": null,
            "source": "manual",
            "priority": "Normal",
            "createdAt": "2026-01-09T11:59:16.249Z",
            "updatedAt": "2026-01-09T11:59:19.529Z",
            "deletedAt": null,
            "notes": null,
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "nextRefillDue": null,
            "ocrConfidence": null,
            "ocrText": null,
            "reminderSent": null,
            "uploadedImages": [],
            "prescriptionNumber": "RX000002",
            "type": "REGULAR",
            "issueDate": "2026-01-09T11:59:16.247Z",
            "expiryDate": "2026-07-09T11:59:15.986Z",
            "totalRefills": 3,
            "status": "ACTIVE",
            "patient": {
              "id": "cmk6tp4ia005d14pcv73yw2yl",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "firstName": "Walk-in",
              "middleName": null,
              "lastName": "Customer",
              "dateOfBirth": null,
              "gender": null,
              "photoUrl": null,
              "phoneNumber": "WALKIN-1767959934993",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T11:58:54.994Z",
              "updatedAt": "2026-01-09T11:58:54.994Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "prescriber": null,
            "store": {
              "id": "cmk6tou1b004b14pc60zohqfx",
              "name": "DPFV Test Pharmacy 1767959921301",
              "displayName": "Test Pharma 1767959921301",
              "email": "store-1767959921301@test.hoperx.com",
              "phoneNumber": "9959921301",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T11:58:41.422Z",
              "updatedAt": "2026-01-09T11:58:41.422Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "versions": [
              {
                "id": "cmk6tplgi006c14pci0knkidz",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk6toy1c004j14pc3zt08h0i",
                "createdAt": "2026-01-09T11:59:16.962Z",
                "items": [
                  {
                    "id": "cmk6tplgi006e14pc0csgydmj",
                    "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                    "drugId": "cmk6tpkmx006914pcw3prtw1j",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk6tpkmx006914pcw3prtw1j",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767959955896",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-09T11:59:15.897Z",
                      "updatedAt": "2026-01-09T11:59:15.897Z",
                      "storeId": "cmk6tou1b004b14pc60zohqfx",
                      "hsnCodeId": null
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk6tplv8006f14pc4z3j5vlo",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              },
              {
                "id": "cmk6tplv8006g14pcw1k3uvxg",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              },
              {
                "id": "cmk6tplv8006h14pceis1jcg6",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              },
              {
                "id": "cmk6tplv8006i14pcx59iholm",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk6tplgi006e14pc0csgydmj",
                "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                "drugId": "cmk6tpkmx006914pcw3prtw1j",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk6tpkmx006914pcw3prtw1j",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767959955896",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T11:59:15.897Z",
                  "updatedAt": "2026-01-09T11:59:15.897Z",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "hsnCodeId": null
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk6tpnks006m14pc6ymkyl4b",
                "storeId": "cmk6tou1b004b14pc60zohqfx",
                "userId": "cmk6toy1c004j14pc3zt08h0i",
                "action": "PRESCRIPTION_ACTIVATED",
                "entityType": "Prescription",
                "entityId": "cmk6tpkwo006a14pckmxgcv1j",
                "changes": {
                  "newStatus": "ACTIVE",
                  "previousStatus": "DRAFT"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T11:59:19.709Z",
                "user": {
                  "id": "cmk6toy1c004j14pc3zt08h0i",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              },
              {
                "id": "cmk6tpm04006k14pc9sbw5kna",
                "storeId": "cmk6tou1b004b14pc60zohqfx",
                "userId": "cmk6toy1c004j14pc3zt08h0i",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk6tpkwo006a14pckmxgcv1j",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T11:59:17.668Z",
                "user": {
                  "id": "cmk6toy1c004j14pc3zt08h0i",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "expected": "ACTIVE",
              "actual": "ACTIVE",
              "message": "Prescription status should be ACTIVE",
              "invariant": "RX-002"
            },
            {
              "passed": true,
              "message": "Total refills should be 3",
              "expected": 3,
              "actual": 3,
              "invariant": "RX-003"
            }
          ],
          "duration": 1407
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tplv8006f14pc4z3j5vlo",
            "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
            "refillNumber": 0,
            "authorizedQty": 30,
            "dispensedQty": 0,
            "remainingQty": 30,
            "status": "AVAILABLE",
            "expiresAt": "2026-07-09T11:59:15.986Z",
            "notes": null,
            "createdAt": "2026-01-09T11:59:17.493Z",
            "updatedAt": "2026-01-09T11:59:17.493Z"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Refill must be available",
              "expected": "AVAILABLE",
              "actual": "AVAILABLE",
              "invariant": "RX-004"
            }
          ],
          "duration": 1159
        }
      ],
      "duration": 6389
    },
    {
      "id": "admin.roles",
      "status": "FAILED",
      "failedAtStep": "roles.create",
      "steps": [
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "message": "Role object must be returned",
              "expected": "Role",
              "actual": "Null",
              "invariant": "DATA-001"
            },
            {
              "passed": null,
              "message": "Custom role must not be built-in",
              "expected": false,
              "invariant": "INV-011"
            }
          ],
          "duration": 352,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 353
    },
    {
      "id": "admin.features",
      "status": "FAILED",
      "failedAtStep": "features.update",
      "steps": [
        {
          "success": true,
          "data": {
            "featureConfig": {
              "gst": "essential",
              "pos": "essential",
              "help": "essential",
              "team": "essential",
              "audit": "essential",
              "store": "essential",
              "claims": "optional",
              "engage": "essential",
              "orders": "essential",
              "finance": "essential",
              "reports": "essential",
              "dispense": "essential",
              "insights": "essential",
              "messages": "essential",
              "patients": "essential",
              "dashboard": "essential",
              "inventory": "essential",
              "knowledge": "essential",
              "suppliers": "essential",
              "multiStore": "hidden",
              "regulations": "essential",
              "integrations": "essential",
              "prescriptions": "essential"
            },
            "enabledSections": [
              "Operations",
              "Inventory & Supply",
              "Billing & Finance",
              "Analytics",
              "Communication",
              "Compliance",
              "Settings",
              "Support"
            ],
            "defaultPermissions": [
              "prescription.read",
              "prescription.create",
              "prescription.fulfill",
              "patient.read",
              "patient.create",
              "inventory.read",
              "po.read",
              "po.create",
              "sales.create",
              "sales.read",
              "communication.send",
              "marketing.loyalty"
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Feature config must exist",
              "expected": "Config object",
              "actual": "Found",
              "invariant": "DATA-001"
            }
          ],
          "duration": 365
        },
        {
          "success": false,
          "data": {
            "id": "cmk6tou1b004b14pc60zohqfx",
            "businessType": "Retail Pharmacy",
            "featureOverrides": {
              "pos": "hidden"
            }
          },
          "assertions": [
            {
              "passed": false,
              "message": "POS should be hidden",
              "expected": "hidden",
              "actual": "undefined",
              "invariant": "CONF-001"
            }
          ],
          "duration": 336,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 701
    },
    {
      "id": "procurement.supplier",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tpqas006o14pc5s9d4jga",
            "name": "Alpha Pharma Distributors",
            "category": "Distributor",
            "status": "Active",
            "gstin": "27AABCU9603R1ZN",
            "dlNumber": null,
            "pan": null,
            "contactName": "Rahul Kumar",
            "phoneNumber": "9876543210",
            "email": "alpha@test.com",
            "whatsapp": null,
            "addressLine1": "Test Address 1",
            "addressLine2": null,
            "city": "Pune",
            "state": "Maharashtra",
            "pinCode": "411001",
            "paymentTerms": null,
            "creditLimit": null,
            "createdAt": "2026-01-09T11:59:23.237Z",
            "updatedAt": "2026-01-09T11:59:23.237Z",
            "deletedAt": null,
            "storeId": "cmk6tou1b004b14pc60zohqfx"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Supplier must have ID",
              "expected": "ID present",
              "actual": "cmk6tpqas006o14pc5s9d4jga",
              "invariant": "DATA-001"
            }
          ],
          "duration": 437
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "DATA-INTEGRITY"
            }
          ],
          "duration": 89
        }
      ],
      "duration": 526
    },
    {
      "id": "billing.subscription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk6toulb004d14pcxf5ykc8v",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "TRIAL",
              "trialEndsAt": "2026-01-23T11:58:42.142Z",
              "currentPeriodStart": "2026-01-09T11:58:42.142Z",
              "currentPeriodEnd": "2026-01-23T11:58:42.142Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T11:58:42.143Z",
              "updatedAt": "2026-01-09T11:58:42.143Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan is TRIAL",
              "expected": "TRIAL",
              "actual": "free_trial",
              "invariant": "SUB-001"
            }
          ],
          "duration": 358
        },
        {
          "success": true,
          "data": {
            "id": "cmk6toulb004d14pcxf5ykc8v",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "EXPIRED",
            "trialEndsAt": "2026-01-23T11:58:42.142Z",
            "currentPeriodStart": "2026-01-09T11:58:42.142Z",
            "currentPeriodEnd": "2026-01-08T11:59:24.124Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T11:58:42.143Z",
            "updatedAt": "2026-01-09T11:59:24.125Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null,
            "plan": {
              "id": "cmiudhheo000014skldx27kfs",
              "name": "free_trial",
              "displayName": "Free Trial",
              "description": "14-day free trial with limited features",
              "price": "0",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 50,
              "prescriptionLimit": 100,
              "storageLimit": 100,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.160Z",
              "updatedAt": "2025-12-06T14:12:08.160Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "End date is in past",
              "expected": "Past Date",
              "actual": "2026-01-08T11:59:24.124Z",
              "invariant": "SUB-002"
            }
          ],
          "duration": 882
        },
        {
          "success": true,
          "data": {
            "isActive": false,
            "subscription": {
              "id": "cmk6toulb004d14pcxf5ykc8v",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "EXPIRED",
              "trialEndsAt": "2026-01-23T11:58:42.142Z",
              "currentPeriodStart": "2026-01-09T11:58:42.142Z",
              "currentPeriodEnd": "2026-01-08T11:59:24.124Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T11:58:42.143Z",
              "updatedAt": "2026-01-09T11:59:24.125Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription is inactive",
              "expected": false,
              "actual": false,
              "invariant": "SUB-003"
            }
          ],
          "duration": 399
        },
        {
          "success": true,
          "data": {
            "id": "cmk6toulb004d14pcxf5ykc8v",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "planId": "cmiudhi1f000114sknt4k3mqx",
            "status": "ACTIVE",
            "trialEndsAt": null,
            "currentPeriodStart": "2026-01-09T11:59:25.667Z",
            "currentPeriodEnd": "2026-02-09T11:59:25.667Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T11:58:42.143Z",
            "updatedAt": "2026-01-09T11:59:25.668Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null,
            "plan": {
              "id": "cmiudhi1f000114sknt4k3mqx",
              "name": "basic",
              "displayName": "Basic Plan",
              "description": "Perfect for small pharmacies",
              "price": "999",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 500,
              "prescriptionLimit": null,
              "storageLimit": 1000,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.980Z",
              "updatedAt": "2025-12-06T14:12:08.980Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan upgraded to Basic",
              "expected": "basic",
              "actual": "basic",
              "invariant": "SUB-004"
            }
          ],
          "duration": 1051
        },
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk6toulb004d14pcxf5ykc8v",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "planId": "cmiudhi1f000114sknt4k3mqx",
              "status": "ACTIVE",
              "trialEndsAt": null,
              "currentPeriodStart": "2026-01-09T11:59:25.667Z",
              "currentPeriodEnd": "2026-02-09T11:59:25.667Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T11:58:42.143Z",
              "updatedAt": "2026-01-09T11:59:25.668Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhi1f000114sknt4k3mqx",
                "name": "basic",
                "displayName": "Basic Plan",
                "description": "Perfect for small pharmacies",
                "price": "999",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 500,
                "prescriptionLimit": null,
                "storageLimit": 1000,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.980Z",
                "updatedAt": "2025-12-06T14:12:08.980Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription restored to active",
              "expected": true,
              "actual": true,
              "invariant": "SUB-005"
            }
          ],
          "duration": 348
        }
      ],
      "duration": 3038
    },
    {
      "id": "clinical.dispense",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tpt75006q14pcmyvv9d3q",
            "refillId": "cmk6tplv8006f14pc4z3j5vlo",
            "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
            "status": "QUEUED",
            "queuedAt": "2026-01-09T11:59:26.992Z",
            "verifyingAt": null,
            "fillingAt": null,
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6toy1c004j14pc3zt08h0i",
            "verifiedBy": null,
            "filledBy": null,
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": null,
            "cancellationReason": null,
            "createdAt": "2026-01-09T11:59:26.994Z",
            "updatedAt": "2026-01-09T11:59:26.994Z",
            "refill": {
              "id": "cmk6tplv8006f14pc4z3j5vlo",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T11:59:15.986Z",
              "notes": null,
              "createdAt": "2026-01-09T11:59:17.493Z",
              "updatedAt": "2026-01-09T11:59:17.493Z",
              "prescription": {
                "id": "cmk6tpkwo006a14pckmxgcv1j",
                "storeId": "cmk6tou1b004b14pc60zohqfx",
                "patientId": "cmk6tp4ia005d14pcv73yw2yl",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T11:59:16.249Z",
                "updatedAt": "2026-01-09T11:59:19.529Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T11:59:16.247Z",
                "expiryDate": "2026-07-09T11:59:15.986Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6tp4ia005d14pcv73yw2yl",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767959934993",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T11:58:54.994Z",
                  "updatedAt": "2026-01-09T11:58:54.994Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6tplgi006c14pci0knkidz",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6toy1c004j14pc3zt08h0i",
              "createdAt": "2026-01-09T11:59:16.962Z",
              "items": [
                {
                  "id": "cmk6tplgi006e14pc0csgydmj",
                  "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                  "drugId": "cmk6tpkmx006914pcw3prtw1j",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6tpkmx006914pcw3prtw1j",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767959955896",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T11:59:15.897Z",
                    "updatedAt": "2026-01-09T11:59:15.897Z",
                    "storeId": "cmk6tou1b004b14pc60zohqfx",
                    "hsnCodeId": null
                  },
                  "batch": null
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense must be created",
              "expected": "Dispense object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "QUEUED",
              "actual": "QUEUED",
              "message": "Dispense status should be QUEUED",
              "invariant": "DISP-001"
            }
          ],
          "duration": 1757
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpt75006q14pcmyvv9d3q",
            "refillId": "cmk6tplv8006f14pc4z3j5vlo",
            "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
            "status": "FILLING",
            "queuedAt": "2026-01-09T11:59:26.992Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T11:59:28.386Z",
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6toy1c004j14pc3zt08h0i",
            "verifiedBy": null,
            "filledBy": "cmk6toy1c004j14pc3zt08h0i",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to FILLING",
            "cancellationReason": null,
            "createdAt": "2026-01-09T11:59:26.994Z",
            "updatedAt": "2026-01-09T11:59:28.387Z",
            "refill": {
              "id": "cmk6tplv8006f14pc4z3j5vlo",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T11:59:15.986Z",
              "notes": null,
              "createdAt": "2026-01-09T11:59:17.493Z",
              "updatedAt": "2026-01-09T11:59:17.493Z",
              "prescription": {
                "id": "cmk6tpkwo006a14pckmxgcv1j",
                "storeId": "cmk6tou1b004b14pc60zohqfx",
                "patientId": "cmk6tp4ia005d14pcv73yw2yl",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T11:59:16.249Z",
                "updatedAt": "2026-01-09T11:59:19.529Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T11:59:16.247Z",
                "expiryDate": "2026-07-09T11:59:15.986Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6tp4ia005d14pcv73yw2yl",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767959934993",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T11:58:54.994Z",
                  "updatedAt": "2026-01-09T11:58:54.994Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6tplgi006c14pci0knkidz",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6toy1c004j14pc3zt08h0i",
              "createdAt": "2026-01-09T11:59:16.962Z",
              "items": [
                {
                  "id": "cmk6tplgi006e14pc0csgydmj",
                  "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                  "drugId": "cmk6tpkmx006914pcw3prtw1j",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6tpkmx006914pcw3prtw1j",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767959955896",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T11:59:15.897Z",
                    "updatedAt": "2026-01-09T11:59:15.897Z",
                    "storeId": "cmk6tou1b004b14pc60zohqfx",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "FILLING",
              "actual": "FILLING",
              "message": "Dispense status should be FILLING",
              "invariant": "DISP-002"
            }
          ],
          "duration": 1256
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpt75006q14pcmyvv9d3q",
            "refillId": "cmk6tplv8006f14pc4z3j5vlo",
            "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
            "status": "READY",
            "queuedAt": "2026-01-09T11:59:26.992Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T11:59:28.386Z",
            "checkingAt": null,
            "readyAt": "2026-01-09T11:59:29.642Z",
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6toy1c004j14pc3zt08h0i",
            "verifiedBy": null,
            "filledBy": "cmk6toy1c004j14pc3zt08h0i",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to READY",
            "cancellationReason": null,
            "createdAt": "2026-01-09T11:59:26.994Z",
            "updatedAt": "2026-01-09T11:59:29.644Z",
            "refill": {
              "id": "cmk6tplv8006f14pc4z3j5vlo",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T11:59:15.986Z",
              "notes": null,
              "createdAt": "2026-01-09T11:59:17.493Z",
              "updatedAt": "2026-01-09T11:59:17.493Z",
              "prescription": {
                "id": "cmk6tpkwo006a14pckmxgcv1j",
                "storeId": "cmk6tou1b004b14pc60zohqfx",
                "patientId": "cmk6tp4ia005d14pcv73yw2yl",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T11:59:16.249Z",
                "updatedAt": "2026-01-09T11:59:19.529Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T11:59:16.247Z",
                "expiryDate": "2026-07-09T11:59:15.986Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6tp4ia005d14pcv73yw2yl",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767959934993",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T11:58:54.994Z",
                  "updatedAt": "2026-01-09T11:58:54.994Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6tplgi006c14pci0knkidz",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6toy1c004j14pc3zt08h0i",
              "createdAt": "2026-01-09T11:59:16.962Z",
              "items": [
                {
                  "id": "cmk6tplgi006e14pc0csgydmj",
                  "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                  "drugId": "cmk6tpkmx006914pcw3prtw1j",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6tpkmx006914pcw3prtw1j",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767959955896",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T11:59:15.897Z",
                    "updatedAt": "2026-01-09T11:59:15.897Z",
                    "storeId": "cmk6tou1b004b14pc60zohqfx",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "READY",
              "actual": "READY",
              "message": "Dispense status should be READY",
              "invariant": "DISP-003"
            }
          ],
          "duration": 1216
        },
        {
          "success": true,
          "data": [
            {
              "id": "cmk6tpt75006q14pcmyvv9d3q",
              "refillId": "cmk6tplv8006f14pc4z3j5vlo",
              "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
              "status": "READY",
              "queuedAt": "2026-01-09T11:59:26.992Z",
              "verifyingAt": null,
              "fillingAt": "2026-01-09T11:59:28.386Z",
              "checkingAt": null,
              "readyAt": "2026-01-09T11:59:29.642Z",
              "completedAt": null,
              "cancelledAt": null,
              "queuedBy": "cmk6toy1c004j14pc3zt08h0i",
              "verifiedBy": null,
              "filledBy": "cmk6toy1c004j14pc3zt08h0i",
              "checkedBy": null,
              "dispensedBy": null,
              "quantityDispensed": null,
              "notes": "DPFV: Progressed to READY",
              "cancellationReason": null,
              "createdAt": "2026-01-09T11:59:26.994Z",
              "updatedAt": "2026-01-09T11:59:29.644Z",
              "refill": {
                "id": "cmk6tplv8006f14pc4z3j5vlo",
                "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T11:59:15.986Z",
                "notes": null,
                "createdAt": "2026-01-09T11:59:17.493Z",
                "updatedAt": "2026-01-09T11:59:17.493Z",
                "prescription": {
                  "id": "cmk6tpkwo006a14pckmxgcv1j",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "patientId": "cmk6tp4ia005d14pcv73yw2yl",
                  "prescriberId": null,
                  "source": "manual",
                  "priority": "Normal",
                  "createdAt": "2026-01-09T11:59:16.249Z",
                  "updatedAt": "2026-01-09T11:59:19.529Z",
                  "deletedAt": null,
                  "notes": null,
                  "controlledFlag": false,
                  "eRxId": null,
                  "eRxMetadata": null,
                  "nextRefillDue": null,
                  "ocrConfidence": null,
                  "ocrText": null,
                  "reminderSent": null,
                  "uploadedImages": [],
                  "prescriptionNumber": "RX000002",
                  "type": "REGULAR",
                  "issueDate": "2026-01-09T11:59:16.247Z",
                  "expiryDate": "2026-07-09T11:59:15.986Z",
                  "totalRefills": 3,
                  "status": "ACTIVE",
                  "patient": {
                    "id": "cmk6tp4ia005d14pcv73yw2yl",
                    "storeId": "cmk6tou1b004b14pc60zohqfx",
                    "firstName": "Walk-in",
                    "middleName": null,
                    "lastName": "Customer",
                    "dateOfBirth": null,
                    "gender": null,
                    "photoUrl": null,
                    "phoneNumber": "WALKIN-1767959934993",
                    "email": null,
                    "addressLine1": null,
                    "addressLine2": null,
                    "city": null,
                    "state": null,
                    "pinCode": null,
                    "bloodGroup": null,
                    "allergies": [],
                    "chronicConditions": [],
                    "emergencyContactName": null,
                    "emergencyContactPhone": null,
                    "createdAt": "2026-01-09T11:58:54.994Z",
                    "updatedAt": "2026-01-09T11:58:54.994Z",
                    "deletedAt": null,
                    "deletedBy": null,
                    "creditLimit": "0",
                    "currentBalance": "0"
                  }
                }
              }
            }
          ],
          "assertions": [
            {
              "passed": true,
              "message": "Dispense visible",
              "expected": "Dispense in list",
              "actual": "Found",
              "invariant": "POS-001"
            }
          ],
          "duration": 447
        }
      ],
      "duration": 4679
    },
    {
      "id": "procurement.po",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tpwj0006s14pcizfuikvl",
            "rxcui": null,
            "name": "PO Test Drug 1767959971308",
            "genericName": null,
            "strength": null,
            "form": null,
            "manufacturer": "Cipla",
            "schedule": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-09T11:59:31.309Z",
            "updatedAt": "2026-01-09T11:59:31.309Z",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "hsnCodeId": null
          },
          "assertions": [],
          "duration": 179
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpxzw006u14pcoz6n4op8",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "supplierId": "cmk6tpqas006o14pc5s9d4jga",
            "poNumber": "PO202601973123",
            "status": "DRAFT",
            "orderDate": "2026-01-09T11:59:33.212Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6toy1c004j14pc3zt08h0i",
            "approvedBy": null,
            "approvedAt": null,
            "createdAt": "2026-01-09T11:59:33.212Z",
            "updatedAt": "2026-01-09T11:59:33.212Z",
            "deletedAt": null,
            "notes": null,
            "items": [
              {
                "id": "cmk6tpy4q006w14pcx93w7n06",
                "poId": "cmk6tpxzw006u14pcoz6n4op8",
                "drugId": "cmk6tpwj0006s14pcizfuikvl",
                "quantity": 100,
                "receivedQty": 0,
                "packSize": 1,
                "packUnit": "Strip",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "5600"
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "PO Total match",
              "expected": 5600,
              "actual": "5600",
              "invariant": "INV-007"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Initial status DRAFT",
              "invariant": "STATE-001"
            }
          ],
          "duration": 2138
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpxzw006u14pcoz6n4op8",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "supplierId": "cmk6tpqas006o14pc5s9d4jga",
            "poNumber": "PO202601973123",
            "status": "APPROVED",
            "orderDate": "2026-01-09T11:59:33.212Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6toy1c004j14pc3zt08h0i",
            "approvedBy": "cmk6toy1c004j14pc3zt08h0i",
            "approvedAt": "2026-01-09T11:59:34.328Z",
            "createdAt": "2026-01-09T11:59:33.212Z",
            "updatedAt": "2026-01-09T11:59:34.329Z",
            "deletedAt": null,
            "notes": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "APPROVED",
              "actual": "APPROVED",
              "message": "Status -> APPROVED",
              "invariant": "STATE-002"
            }
          ],
          "duration": 977
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpxzw006u14pcoz6n4op8",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "supplierId": "cmk6tpqas006o14pc5s9d4jga",
            "poNumber": "PO202601973123",
            "status": "SENT",
            "orderDate": "2026-01-09T11:59:33.212Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6toy1c004j14pc3zt08h0i",
            "approvedBy": "cmk6toy1c004j14pc3zt08h0i",
            "approvedAt": "2026-01-09T11:59:34.328Z",
            "createdAt": "2026-01-09T11:59:33.212Z",
            "updatedAt": "2026-01-09T11:59:35.265Z",
            "deletedAt": null,
            "notes": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "SENT",
              "actual": "SENT",
              "message": "Status -> SENT",
              "invariant": "STATE-003"
            }
          ],
          "duration": 840
        }
      ],
      "duration": 4135
    },
    {
      "id": "pos.rx-sale",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tq8i0007a14pcyhq859v4",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "invoiceNumber": "INV1767959986082",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6tp4ia005d14pcv73yw2yl",
            "subtotal": "3000",
            "discountAmount": "0",
            "taxAmount": "360",
            "roundOff": "0",
            "total": "3360",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6toy1c004j14pc3zt08h0i",
            "createdAt": "2026-01-09T11:59:46.824Z",
            "updatedAt": "2026-01-09T11:59:46.824Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6tpzuq006x14pcso364zg7",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6tq3oz007814pcxirsm90u",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Sale must be created",
              "expected": "Sale object",
              "actual": "Created",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "message": "Invoice number generated",
              "expected": "Invoice number",
              "actual": "INV1767959986082",
              "invariant": "SALE-002"
            }
          ],
          "duration": 16717
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tpt75006q14pcmyvv9d3q",
            "refillId": "cmk6tplv8006f14pc4z3j5vlo",
            "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
            "status": "COMPLETED",
            "queuedAt": "2026-01-09T11:59:26.992Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T11:59:28.386Z",
            "checkingAt": null,
            "readyAt": "2026-01-09T11:59:29.642Z",
            "completedAt": "2026-01-09T11:59:52.159Z",
            "cancelledAt": null,
            "queuedBy": "cmk6toy1c004j14pc3zt08h0i",
            "verifiedBy": null,
            "filledBy": "cmk6toy1c004j14pc3zt08h0i",
            "checkedBy": null,
            "dispensedBy": "cmk6toy1c004j14pc3zt08h0i",
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to COMPLETED",
            "cancellationReason": null,
            "createdAt": "2026-01-09T11:59:26.994Z",
            "updatedAt": "2026-01-09T11:59:52.161Z",
            "refill": {
              "id": "cmk6tplv8006f14pc4z3j5vlo",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T11:59:15.986Z",
              "notes": null,
              "createdAt": "2026-01-09T11:59:17.493Z",
              "updatedAt": "2026-01-09T11:59:17.493Z",
              "prescription": {
                "id": "cmk6tpkwo006a14pckmxgcv1j",
                "storeId": "cmk6tou1b004b14pc60zohqfx",
                "patientId": "cmk6tp4ia005d14pcv73yw2yl",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T11:59:16.249Z",
                "updatedAt": "2026-01-09T11:59:19.529Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T11:59:16.247Z",
                "expiryDate": "2026-07-09T11:59:15.986Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6tp4ia005d14pcv73yw2yl",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "firstName": "Walk-in",
                  "middleName": null,
                  "lastName": "Customer",
                  "dateOfBirth": null,
                  "gender": null,
                  "photoUrl": null,
                  "phoneNumber": "WALKIN-1767959934993",
                  "email": null,
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T11:58:54.994Z",
                  "updatedAt": "2026-01-09T11:58:54.994Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6tplgi006c14pci0knkidz",
              "prescriptionId": "cmk6tpkwo006a14pckmxgcv1j",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6toy1c004j14pc3zt08h0i",
              "createdAt": "2026-01-09T11:59:16.962Z",
              "items": [
                {
                  "id": "cmk6tplgi006e14pc0csgydmj",
                  "prescriptionVersionId": "cmk6tplgi006c14pci0knkidz",
                  "drugId": "cmk6tpkmx006914pcw3prtw1j",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6tpkmx006914pcw3prtw1j",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767959955896",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T11:59:15.897Z",
                    "updatedAt": "2026-01-09T11:59:15.897Z",
                    "storeId": "cmk6tou1b004b14pc60zohqfx",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense status must be COMPLETED",
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "invariant": "DISP-004"
            }
          ],
          "duration": 958
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tp3xy005714pccfldt1fw",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "drugId": "cmk6tp3mf005314pcd802u6is",
            "batchNumber": "DPFV-1767959934052",
            "expiryDate": "2027-01-09T11:58:54.052Z",
            "quantityInStock": 60,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T11:58:54.262Z",
            "updatedAt": "2026-01-09T11:59:47.741Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6tp3mf005314pcd802u6is",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T11:58:53.848Z",
              "updatedAt": "2026-01-09T11:58:53.848Z",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": ">= 0",
              "actual": 60,
              "message": "Stock quantity must never be negative",
              "invariant": "INV-001"
            }
          ],
          "duration": 359
        }
      ],
      "duration": 18035
    },
    {
      "id": "procurement.grn",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6tqfpx007m14pcyj3u5l4q",
            "grnNumber": "GRN202601 996095 ",
            "poId": "cmk6tpxzw006u14pcoz6n4op8",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "supplierId": "cmk6tpqas006o14pc5s9d4jga",
            "status": "DRAFT",
            "supplierInvoiceNo": null,
            "supplierInvoiceDate": null,
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-09T11:59:56.181Z",
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "notes": null,
            "completedAt": null,
            "createdAt": "2026-01-09T11:59:56.181Z",
            "updatedAt": "2026-01-09T11:59:56.181Z",
            "items": [
              {
                "id": "cmk6tqfur007n14pchcx61png",
                "grnId": "cmk6tqfpx007m14pcyj3u5l4q",
                "poItemId": "cmk6tpy4q006w14pcx93w7n06",
                "drugId": "cmk6tpwj0006s14pcizfuikvl",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "TBD",
                "expiryDate": null,
                "mrp": "0",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "0",
                "discountType": "BEFORE_GST",
                "location": null,
                "isSplit": false,
                "parentItemId": null,
                "drug": {
                  "id": "cmk6tpwj0006s14pcizfuikvl",
                  "rxcui": null,
                  "name": "PO Test Drug 1767959971308",
                  "genericName": null,
                  "strength": null,
                  "form": null,
                  "manufacturer": "Cipla",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T11:59:31.309Z",
                  "updatedAt": "2026-01-09T11:59:31.309Z",
                  "storeId": "cmk6tou1b004b14pc60zohqfx",
                  "hsnCodeId": null
                }
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk6tpxzw006u14pcoz6n4op8",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "supplierId": "cmk6tpqas006o14pc5s9d4jga",
              "poNumber": "PO202601973123",
              "status": "SENT",
              "orderDate": "2026-01-09T11:59:33.212Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "createdBy": "cmk6toy1c004j14pc3zt08h0i",
              "approvedBy": "cmk6toy1c004j14pc3zt08h0i",
              "approvedAt": "2026-01-09T11:59:34.328Z",
              "createdAt": "2026-01-09T11:59:33.212Z",
              "updatedAt": "2026-01-09T11:59:35.265Z",
              "deletedAt": null,
              "notes": null,
              "items": [
                {
                  "id": "cmk6tpy4q006w14pcx93w7n06",
                  "poId": "cmk6tpxzw006u14pcoz6n4op8",
                  "drugId": "cmk6tpwj0006s14pcizfuikvl",
                  "quantity": 100,
                  "receivedQty": 0,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600",
                  "drug": {
                    "id": "cmk6tpwj0006s14pcizfuikvl",
                    "rxcui": null,
                    "name": "PO Test Drug 1767959971308",
                    "genericName": null,
                    "strength": null,
                    "form": null,
                    "manufacturer": "Cipla",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T11:59:31.309Z",
                    "updatedAt": "2026-01-09T11:59:31.309Z",
                    "storeId": "cmk6tou1b004b14pc60zohqfx",
                    "hsnCodeId": null
                  }
                }
              ],
              "supplier": {
                "id": "cmk6tpqas006o14pc5s9d4jga",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-09T11:59:23.237Z",
                "updatedAt": "2026-01-09T11:59:23.237Z",
                "deletedAt": null,
                "storeId": "cmk6tou1b004b14pc60zohqfx"
              }
            },
            "attachments": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "GRN object created",
              "expected": "GRN ID",
              "actual": "cmk6tqfpx007m14pcyj3u5l4q",
              "invariant": "DATA-001"
            }
          ],
          "duration": 4378
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tqfur007n14pchcx61png",
            "grnId": "cmk6tqfpx007m14pcyj3u5l4q",
            "poItemId": "cmk6tpy4q006w14pcx93w7n06",
            "drugId": "cmk6tpwj0006s14pcizfuikvl",
            "orderedQty": 100,
            "receivedQty": 100,
            "freeQty": 0,
            "rejectedQty": 0,
            "batchNumber": "BATCH-1767959997855",
            "expiryDate": "2027-01-09T11:59:57.855Z",
            "mrp": "100",
            "unitPrice": "50",
            "discountPercent": "0",
            "gstPercent": "12",
            "lineTotal": "5600",
            "discountType": "BEFORE_GST",
            "location": null,
            "isSplit": false,
            "parentItemId": null
          },
          "assertions": [
            {
              "passed": true,
              "message": "Update successful",
              "expected": true,
              "actual": true,
              "invariant": "DATA-002"
            }
          ],
          "duration": 3357
        },
        {
          "success": true,
          "data": {
            "id": "cmk6tqfpx007m14pcyj3u5l4q",
            "grnNumber": "GRN202601 996095 ",
            "poId": "cmk6tpxzw006u14pcoz6n4op8",
            "storeId": "cmk6tou1b004b14pc60zohqfx",
            "supplierId": "cmk6tpqas006o14pc5s9d4jga",
            "status": "COMPLETED",
            "supplierInvoiceNo": "INV-1767960001212",
            "supplierInvoiceDate": "2026-01-09T12:00:01.212Z",
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-09T11:59:56.181Z",
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "notes": null,
            "completedAt": "2026-01-09T12:00:08.037Z",
            "createdAt": "2026-01-09T11:59:56.181Z",
            "updatedAt": "2026-01-09T12:00:08.038Z",
            "items": [
              {
                "id": "cmk6tqfur007n14pchcx61png",
                "grnId": "cmk6tqfpx007m14pcyj3u5l4q",
                "poItemId": "cmk6tpy4q006w14pcx93w7n06",
                "drugId": "cmk6tpwj0006s14pcizfuikvl",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "BATCH-1767959997855",
                "expiryDate": "2027-01-09T11:59:57.855Z",
                "mrp": "100",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "5600",
                "discountType": "BEFORE_GST",
                "location": null,
                "isSplit": false,
                "parentItemId": null
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk6tpxzw006u14pcoz6n4op8",
              "storeId": "cmk6tou1b004b14pc60zohqfx",
              "supplierId": "cmk6tpqas006o14pc5s9d4jga",
              "poNumber": "PO202601973123",
              "status": "RECEIVED",
              "orderDate": "2026-01-09T11:59:33.212Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "createdBy": "cmk6toy1c004j14pc3zt08h0i",
              "approvedBy": "cmk6toy1c004j14pc3zt08h0i",
              "approvedAt": "2026-01-09T11:59:34.328Z",
              "createdAt": "2026-01-09T11:59:33.212Z",
              "updatedAt": "2026-01-09T12:00:07.864Z",
              "deletedAt": null,
              "notes": null,
              "items": [
                {
                  "id": "cmk6tpy4q006w14pcx93w7n06",
                  "poId": "cmk6tpxzw006u14pcoz6n4op8",
                  "drugId": "cmk6tpwj0006s14pcizfuikvl",
                  "quantity": 100,
                  "receivedQty": 100,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600"
                }
              ],
              "supplier": {
                "id": "cmk6tpqas006o14pc5s9d4jga",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-09T11:59:23.237Z",
                "updatedAt": "2026-01-09T11:59:23.237Z",
                "deletedAt": null,
                "storeId": "cmk6tou1b004b14pc60zohqfx"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "message": "Status -> COMPLETED",
              "invariant": "STATE-001"
            }
          ],
          "duration": 7693
        },
        {
          "success": true,
          "data": {
            "mismatches": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Verification step passed",
              "expected": true,
              "actual": true,
              "invariant": "INV-004"
            }
          ],
          "duration": 87
        }
      ],
      "duration": 15515
    }
  ],
  "failures": [
    {
      "scenarioId": "reports.sales",
      "scenarioName": "Sales Reporting & Analytics",
      "stepId": "reports.get-today",
      "stepName": "Get sales report for today",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "audit.gdpr",
      "scenarioName": "GDPR Data Export",
      "stepId": "gdpr.export-json",
      "stepName": "Export User Data (JSON)",
      "invariant": "INV-AUDIT",
      "expected": "No error",
      "actual": "Cannot read properties of null (reading 'user')",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.refund",
      "scenarioName": "Sale Refund Flow",
      "stepId": "refund.create-sale",
      "stepName": "Create Sale to Refund",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.credit",
      "scenarioName": "Credit Sale Flow",
      "stepId": "credit.create-sale",
      "stepName": "Create Sale on Credit",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "documents.invoice-pdf",
      "scenarioName": "Invoice PDF Generation Flow",
      "stepId": "pdf.create-sale",
      "stepName": "Create Sale for Invoice",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "procurement.consolidated",
      "scenarioName": "Consolidated Invoice Flow",
      "stepId": "consolidated.create-grn-1",
      "stepName": "Create First GRN",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.quick-sale",
      "scenarioName": "Quick Sale (Walk-in Customer)",
      "stepId": "quick-sale.create-sale",
      "stepName": "Create quick sale with payment",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.roles",
      "scenarioName": "Roles & Permissions Flow",
      "stepId": "roles.create",
      "stepName": "Create custom role",
      "invariant": "DATA-001",
      "expected": "Role",
      "actual": "Null",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.features",
      "scenarioName": "Feature Toggles Flow",
      "stepId": "features.update",
      "stepName": "Override feature (Disable POS)",
      "invariant": "CONF-001",
      "expected": "hidden",
      "actual": "undefined",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    }
  ],
  "impactAnalysis": {
    "affectedFeatures": [
      "reports",
      "analytics",
      "kpi",
      "gdpr",
      "compliance",
      "audit",
      "pos",
      "refund",
      "inventory",
      "credit",
      "ledger",
      "patient",
      "pdf",
      "documents",
      "procurement",
      "grn",
      "billing",
      "gst",
      "payments",
      "admin",
      "roles",
      "permissions",
      "features"
    ],
    "totalBlocked": 0,
    "criticalBlocked": 0
  }
}
{
  "runId": "dpfv-2026-01-09-1767967311348",
  "timestamp": "2026-01-09T13:59:23.787Z",
  "mode": "dev",
  "duration": 147559,
  "summary": {
    "total": 24,
    "passed": 17,
    "failed": 7,
    "blocked": 0,
    "skipped": 0
  },
  "scenarioMap": {
    "core.auth": "PASSED",
    "reports.sales": "PASSED",
    "audit.gdpr": "FAILED",
    "pos.draft": "PASSED",
    "pos.refund": "FAILED",
    "pos.credit": "FAILED",
    "documents.invoice-pdf": "FAILED",
    "procurement.consolidated": "FAILED",
    "core.onboarding": "PASSED",
    "admin.pin": "PASSED",
    "audit.access": "PASSED",
    "communication.email": "PASSED",
    "communication.whatsapp": "PASSED",
    "pos.quick-sale": "PASSED",
    "patients.create": "PASSED",
    "clinical.prescription": "PASSED",
    "admin.roles": "FAILED",
    "admin.features": "FAILED",
    "procurement.supplier": "PASSED",
    "billing.subscription": "PASSED",
    "clinical.dispense": "PASSED",
    "procurement.po": "PASSED",
    "pos.rx-sale": "PASSED",
    "procurement.grn": "PASSED"
  },
  "scenarios": [
    {
      "id": "core.auth",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6y02qs000014kj1mgh5dqq",
              "email": "dpfv-test-1767967163788@test.hoperx.com",
              "phoneNumber": "9967163788",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "isActive": true
            },
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTAycXMwMDAwMTRrajFtZ2g1ZHFxIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NzE2NCwiZXhwIjoxNzY3OTcwNzY0fQ.CY-ZJZUjYfxq-1ZiXMZR9oBzbbMPIeJFdzPG4hniGOc",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTAycXMwMDAwMTRrajFtZ2g1ZHFxIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiJiZjcyZWQ3Ni1lMDQyLTQ3YmMtOGU2ZS1hMWQwMjMyZGYzNWQiLCJpYXQiOjE3Njc5NjcxNjQsImV4cCI6MTc2ODU3MTk2NH0.tkgroPrKTZablig0f4-5OSW_xF5gTD4JqwLIoviBdYE"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "User object with id, email, firstName",
              "actual": {
                "id": "cmk6y02qs000014kj1mgh5dqq",
                "email": "dpfv-test-1767967163788@test.hoperx.com"
              },
              "message": "Signup must return complete user object",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT access token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid access token",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "JWT refresh token",
              "actual": "eyJhbGciOiJIUzI1NiIs...",
              "message": "Signup must return valid refresh token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 785
        },
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6y02qs000014kj1mgh5dqq",
              "email": "dpfv-test-1767967163788@test.hoperx.com",
              "phoneNumber": "9967163788",
              "firstName": "DPFV",
              "lastName": "TestUser",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "createdAt": "2026-01-09T13:59:24.387Z",
              "updatedAt": "2026-01-09T13:59:24.387Z",
              "deletedAt": null,
              "signatureUrl": null,
              "preferences": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTAycXMwMDAwMTRrajFtZ2g1ZHFxIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NzE2NSwiZXhwIjoxNzY3OTcwNzY1fQ.3EhqLj1ARwIGPyKsB6DZhNHRIMahSKVTMGgRuH3t0ZU",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTAycXMwMDAwMTRrajFtZ2g1ZHFxIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiI2Y2FiZjgyMi0wMDhkLTQyMjktODE1ZS00ZDIyZjE1OGJhZTYiLCJpYXQiOjE3Njc5NjcxNjUsImV4cCI6MTc2ODU3MTk2NX0.xOsEEOCwCay3iVkjdidSCnWz0wee3tmqJFTmD95w4C8"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "cmk6y02qs000014kj1mgh5dqq",
              "actual": "cmk6y02qs000014kj1mgh5dqq",
              "message": "Login must return same user as signup",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": true,
              "actual": true,
              "message": "Logged in user must be active",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 1798
        },
        {
          "success": true,
          "data": {
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTAycXMwMDAwMTRrajFtZ2g1ZHFxIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NzE2NiwiZXhwIjoxNzY3OTcwNzY2fQ.n7_2wosaDPBaVe56wsZkwxhkuZ93wEQngxsoaKbPzKg",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTAycXMwMDAwMTRrajFtZ2g1ZHFxIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiI5NDNlMDI4ZS1mZWIzLTRkNjEtODE1Yy1hNWIzMjVlNzgyNWMiLCJpYXQiOjE3Njc5NjcxNjYsImV4cCI6MTc2ODU3MTk2Nn0.8ZmAIUA-yq3D8n1mCNkUPV_G6Tey1Y3MPVY5EIRZAzo"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "New access token different from original",
              "actual": "New token",
              "message": "Token refresh must generate new access token",
              "invariant": "AUTH-001"
            }
          ],
          "duration": 276
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y02qs000014kj1mgh5dqq",
            "email": "dpfv-test-1767967163788@test.hoperx.com",
            "phoneNumber": "9967163788",
            "firstName": "DPFV",
            "lastName": "TestUser",
            "role": "ADMIN",
            "isActive": true,
            "pinHash": null,
            "pinAttempts": 0,
            "pinLockedUntil": null,
            "lastLoginAt": null,
            "faceDataUrl": null,
            "hourlyRate": null,
            "monthlyRate": null,
            "shiftId": null,
            "joiningDate": null,
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "employeeId": null,
            "createdAt": "2026-01-09T13:59:24.387Z",
            "updatedAt": "2026-01-09T13:59:24.387Z",
            "deletedAt": null,
            "signatureUrl": null,
            "preferences": null,
            "storeUsers": []
          },
          "assertions": [
            {
              "passed": true,
              "expected": "dpfv-test-1767967163788@test.hoperx.com",
              "actual": "dpfv-test-1767967163788@test.hoperx.com",
              "message": "Profile email must match user email",
              "invariant": "AUTH-001"
            },
            {
              "passed": true,
              "expected": "No password in profile",
              "actual": "No password",
              "message": "Profile must not expose password hash",
              "invariant": "AUTH-002"
            }
          ],
          "duration": 198
        }
      ],
      "duration": 3057
    },
    {
      "id": "reports.sales",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6y0532000414kj4de6ewbs",
              "name": "Report Test Pharmacy 1767967166846",
              "displayName": "Report Pharma 1767967166846",
              "email": "report-store-1767967166846@test.hoperx.com",
              "phoneNumber": "9967166846",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "Test Address",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:59:27.422Z",
              "updatedAt": "2026-01-09T13:59:27.422Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully",
            "patient": {
              "id": "cmk6y06nz000814kjap9t86av",
              "storeId": "cmk6y0532000414kj4de6ewbs",
              "firstName": "Test",
              "middleName": null,
              "lastName": "Patient",
              "dateOfBirth": null,
              "gender": "Male",
              "photoUrl": null,
              "phoneNumber": "9967166846",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T13:59:29.471Z",
              "updatedAt": "2026-01-09T13:59:29.471Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            }
          },
          "assertions": [],
          "duration": 2817
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y0icg000o14kjb98dpedl",
            "storeId": "cmk6y0532000414kj4de6ewbs",
            "invoiceNumber": "INV1767967183240",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6y06nz000814kjap9t86av",
            "subtotal": "200",
            "discountAmount": "0",
            "taxAmount": "24",
            "roundOff": "0",
            "total": "224",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6y04y3000314kjc7svajfk",
            "createdAt": "2026-01-09T13:59:44.608Z",
            "updatedAt": "2026-01-09T13:59:44.608Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6y08dp000d14kjxkuz14c8",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6y0d7a000m14kjvl7jc59l",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [],
          "duration": 21196
        },
        {
          "success": true,
          "data": {
            "kpis": {
              "revenue": 224,
              "orders": 1,
              "aov": 224,
              "customers": 1,
              "newCustomers": 1,
              "returningCustomers": 0,
              "refunds": 0,
              "returnRate": 0,
              "delta": {
                "revenue": 0,
                "orders": 0,
                "aov": 0
              },
              "avgOrdersPerDay": 1,
              "avgOrdersPerHour": 0.041666666666666664,
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z",
                "preset": "today"
              }
            },
            "trends": {
              "current": [
                {
                  "date": "2026-01-09",
                  "revenue": 224,
                  "orders": 1,
                  "items": 2,
                  "aov": 224
                }
              ],
              "previous": [],
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z"
              }
            },
            "breakdown": {
              "byCategory": [
                {
                  "category": "Tablet",
                  "revenue": 224,
                  "orders": 1,
                  "revenueShare": 100,
                  "margin": 89.29
                }
              ],
              "byPaymentMethod": [
                {
                  "method": "CASH",
                  "amount": 224,
                  "count": 1,
                  "percentage": 100
                }
              ],
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z"
              }
            },
            "performance": {
              "topProducts": [
                {
                  "drugId": "cmk6y06zz000a14kjrj5romay",
                  "drugName": "Report Test Drug",
                  "manufacturer": "-",
                  "category": "Tablet",
                  "revenue": 224,
                  "quantity": 2,
                  "orders": 1,
                  "avgPrice": 112,
                  "stockLeft": 48,
                  "trend": "stable"
                }
              ],
              "topCustomers": [
                {
                  "customerId": "cmk6y06nz000814kjap9t86av",
                  "customerName": "Test Patient",
                  "phoneNumber": "9967166846",
                  "totalSpend": 224,
                  "orders": 1,
                  "lastVisit": "2026-01-09T13:59:44.608Z",
                  "loyaltyStatus": "NEW",
                  "avgOrderValue": 224
                }
              ],
              "period": {
                "start": "2026-01-08T18:30:00.000Z",
                "end": "2026-01-09T18:29:59.999Z"
              }
            },
            "insights": [],
            "generatedAt": "2026-01-09T13:59:53.122Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": ">= 224",
              "actual": 224,
              "message": "Report revenue must include the tracked sale",
              "invariant": "RPT-001"
            },
            {
              "passed": true,
              "expected": "> 0",
              "actual": 1,
              "message": "Order count must be positive",
              "invariant": "RPT-002"
            }
          ],
          "duration": 2263
        },
        {
          "success": true,
          "data": {
            "data": {
              "metadata": {
                "storeName": "Store",
                "reportType": "Sales Analytics",
                "period": {
                  "start": "2026-01-08T18:30:00.000Z",
                  "end": "2026-01-09T18:29:59.999Z",
                  "preset": "today"
                },
                "generatedAt": "2026-01-09T13:59:54.263Z"
              },
              "summary": {
                "revenue": 224,
                "orders": 1,
                "aov": 224,
                "customers": 1,
                "refunds": 0
              },
              "trends": [
                {
                  "date": "2026-01-09",
                  "revenue": 224,
                  "orders": 1,
                  "items": 2,
                  "aov": 224
                }
              ],
              "topProducts": [
                {
                  "drugId": "cmk6y06zz000a14kjrj5romay",
                  "drugName": "Report Test Drug",
                  "manufacturer": "-",
                  "category": "Tablet",
                  "revenue": 224,
                  "quantity": 2,
                  "orders": 1,
                  "avgPrice": 112,
                  "stockLeft": 48,
                  "trend": "stable"
                }
              ],
              "topCustomers": [
                {
                  "customerId": "cmk6y06nz000814kjap9t86av",
                  "customerName": "Test Patient",
                  "phoneNumber": "9967166846",
                  "totalSpend": 224,
                  "orders": 1,
                  "lastVisit": "2026-01-09T13:59:44.608Z",
                  "loyaltyStatus": "NEW",
                  "avgOrderValue": 224
                }
              ],
              "categoryBreakdown": [
                {
                  "category": "Tablet",
                  "revenue": 224,
                  "orders": 1,
                  "revenueShare": 100,
                  "margin": 89.29
                }
              ],
              "paymentBreakdown": [
                {
                  "method": "CASH",
                  "amount": 224,
                  "count": 1,
                  "percentage": 100
                }
              ]
            },
            "format": "csv",
            "filename": "sales-report-today-2026-01-09.csv"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Valid export object",
              "actual": [
                "data",
                "format",
                "filename"
              ],
              "message": "Export must return data and filename",
              "invariant": "RPT-003"
            }
          ],
          "duration": 1141
        }
      ],
      "duration": 27418
    },
    {
      "id": "audit.gdpr",
      "status": "FAILED",
      "failedAtStep": "gdpr.export-json",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2795
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'user')",
              "message": "Assertion \"Export contains user profile\" threw: Cannot read properties of null (reading 'user')",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": false,
              "expected": "No error",
              "actual": "Cannot read properties of null (reading 'stores')",
              "message": "Assertion \"Export contains stores\" threw: Cannot read properties of null (reading 'stores')",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 536,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 3332
    },
    {
      "id": "pos.draft",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6y0syy001614kj6mrlrip8",
              "name": "Draft Test Store 1767967197597",
              "displayName": "Draft Store",
              "email": "draft-store-1767967197597@test.hoperx.com",
              "phoneNumber": "9967197597",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "Draft Lane",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "MH",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T13:59:58.378Z",
              "updatedAt": "2026-01-09T13:59:58.378Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [],
          "duration": 1758
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y0vlo001a14kjslvtkdbs",
            "storeId": "cmk6y0syy001614kj6mrlrip8",
            "draftNumber": "DRF1767967201787",
            "customerName": null,
            "customerPhone": null,
            "customerId": null,
            "items": "[{\"drugId\":\"cmk3ve3ke000y148qncqimrqr\",\"batchId\":\"cmk40xxi30010142aeea0ynen\",\"quantity\":1,\"mrp\":50,\"discount\":0}]",
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "createdBy": "cmk6y0su3001514kj04epzd4m",
            "expiresAt": "2026-01-16T13:59:59.954Z",
            "createdAt": "2026-01-09T14:00:01.788Z",
            "updatedAt": "2026-01-09T14:00:01.788Z",
            "dispenseFor": null
          },
          "assertions": [],
          "duration": 2622
        }
      ],
      "duration": 4380
    },
    {
      "id": "pos.refund",
      "status": "FAILED",
      "failedAtStep": "refund.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2473
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5003
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale to Refund\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale to Refund\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7476
    },
    {
      "id": "pos.credit",
      "status": "FAILED",
      "failedAtStep": "credit.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 3959
        },
        {
          "success": true,
          "data": {
            "expected": 0,
            "actual": 0
          },
          "assertions": [],
          "duration": 183
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale on Credit\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale on Credit\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 9146
    },
    {
      "id": "documents.invoice-pdf",
      "status": "FAILED",
      "failedAtStep": "pdf.create-sale",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 3828
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
            "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5003
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create Sale for Invoice\" timed out after 5000ms",
        "stack": "Error: Step \"Create Sale for Invoice\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 8831
    },
    {
      "id": "procurement.consolidated",
      "status": "FAILED",
      "failedAtStep": "consolidated.create-grn-1",
      "steps": [
        {
          "success": true,
          "assertions": [],
          "duration": 2598
        },
        {
          "success": false,
          "error": {
            "name": "Error",
            "message": "Step \"Create First GRN\" timed out after 5000ms",
            "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
          },
          "duration": 5002
        }
      ],
      "error": {
        "name": "Error",
        "message": "Step \"Create First GRN\" timed out after 5000ms",
        "stack": "Error: Step \"Create First GRN\" timed out after 5000ms\n    at Timeout._onTimeout (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:379:24)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
      },
      "duration": 7600
    },
    {
      "id": "core.onboarding",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "store": {
              "id": "cmk6y1lbn004d14kjwvho41y0",
              "name": "DPFV Test Pharmacy 1767967235032",
              "displayName": "Test Pharma 1767967235032",
              "email": "store-1767967235032@test.hoperx.com",
              "phoneNumber": "9967235032",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T14:00:35.124Z",
              "updatedAt": "2026-01-09T14:00:35.124Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "message": "Onboarding completed successfully"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Store with ID",
              "actual": "cmk6y1lbn004d14kjwvho41y0",
              "message": "Onboarding must create store with ID",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "Store name contains \"DPFV Test Pharmacy\"",
              "actual": "DPFV Test Pharmacy 1767967235032",
              "message": "Store name must match input",
              "invariant": "INV-008"
            }
          ],
          "duration": 1374
        },
        {
          "success": true,
          "data": {
            "userId": "cmk6y1fql003r14kj9sge63t8",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "isPrimary": true,
            "assignedAt": "2026-01-09T14:00:35.242Z"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "StoreUser association",
              "actual": "Found",
              "message": "User must be associated with store",
              "invariant": "INV-008"
            }
          ],
          "duration": 205
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1lvj004f14kjkuwuyxhq",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "TRIAL",
            "trialEndsAt": "2026-01-23T14:00:35.838Z",
            "currentPeriodStart": "2026-01-09T14:00:35.838Z",
            "currentPeriodEnd": "2026-01-23T14:00:35.838Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T14:00:35.839Z",
            "updatedAt": "2026-01-09T14:00:35.839Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Subscription exists",
              "actual": "Found",
              "message": "Store must have subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "TRIAL",
              "actual": "TRIAL",
              "message": "New store must have TRIAL subscription",
              "invariant": "INV-008"
            },
            {
              "passed": true,
              "expected": "trialEndsAt and currentPeriodStart set",
              "actual": {
                "trialEndsAt": "2026-01-23T14:00:35.838Z",
                "currentPeriodStart": "2026-01-09T14:00:35.838Z"
              },
              "message": "Trial dates must be configured",
              "invariant": "INV-008"
            }
          ],
          "duration": 202
        },
        {
          "success": true,
          "data": {},
          "assertions": [
            {
              "passed": true,
              "expected": {
                "hasStore": true,
                "hasSubscription": true
              },
              "actual": {
                "hasStore": true,
                "hasSubscription": true
              },
              "message": "Onboarding must create Store + StoreUser + Subscription atomically",
              "invariant": "INV-008"
            }
          ],
          "duration": 1128
        }
      ],
      "duration": 2910
    },
    {
      "id": "admin.pin",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "success": true,
            "message": "Admin PIN set up successfully"
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN setup API returned success",
              "expected": "Success",
              "actual": "Success",
              "invariant": "INV-013"
            }
          ],
          "duration": 925
        },
        {
          "success": true,
          "data": {
            "valid": true
          },
          "assertions": [
            {
              "passed": true,
              "message": "PIN verification passed",
              "expected": true,
              "actual": true,
              "invariant": "SEC-001"
            }
          ],
          "duration": 793
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "SEC-002"
            }
          ],
          "duration": 542
        }
      ],
      "duration": 2260
    },
    {
      "id": "audit.access",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "user": {
              "id": "cmk6y1pit004p14kjnhm38zqo",
              "email": "dpfv-audit-admin@test.hoperx.com",
              "phoneNumber": "9998887776",
              "firstName": "Audit",
              "lastName": "Admin",
              "role": "ADMIN",
              "approvalPin": null,
              "isActive": true,
              "pinAttempts": 0,
              "pinLockedUntil": null,
              "lastLoginAt": null,
              "faceDataUrl": null,
              "hourlyRate": null,
              "monthlyRate": null,
              "shiftId": null,
              "joiningDate": null,
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "employeeId": null,
              "createdAt": "2026-01-09T14:00:40.565Z",
              "updatedAt": "2026-01-09T14:00:40.565Z",
              "deletedAt": null,
              "signatureUrl": null,
              "preferences": null,
              "storeUsers": []
            },
            "permissions": [
              "patient.create",
              "patient.read",
              "patient.update",
              "patient.delete",
              "prescription.create",
              "prescription.read",
              "prescription.update",
              "prescription.delete",
              "dispense.create",
              "inventory.read",
              "inventory.adjust",
              "sale.create",
              "sale.read",
              "po.create",
              "po.approve",
              "expense.create",
              "expense.approve",
              "reports.view",
              "settings.manage",
              "users.manage"
            ],
            "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTFwaXQwMDRwMTRram5obTM4enFvIiwicm9sZSI6IkFETUlOIiwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc2Nzk2NzI0MSwiZXhwIjoxNzY3OTcwODQxfQ.35TvIDqs3VT1PsqWjbTiRAyJIHNTq7Mp5s2NOkNH0Is",
            "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWs2eTFwaXQwMDRwMTRram5obTM4enFvIiwidHlwZSI6InJlZnJlc2giLCJqdGkiOiI3NTYwZGY2My1iMjdkLTQyYmEtOGYzOS05NGMxYmZhZDIzYjAiLCJpYXQiOjE3Njc5NjcyNDEsImV4cCI6MTc2ODU3MjA0MX0.-xydqBblKoLbcK9fWHwHP4JvMVpF4Fy_8A1iYWmaljQ"
          },
          "assertions": [],
          "duration": 2271
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1qcj004r14kj046c7t6x",
            "userId": "cmk6y1pit004p14kjnhm38zqo",
            "eventType": "login_success",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier",
            "deviceInfo": null,
            "createdAt": "2026-01-09T14:00:41.635Z",
            "geolocation": null,
            "loginMethod": "EMAIL_PASSWORD"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_success",
              "actual": "login_success",
              "message": "Latest log should be login_success",
              "invariant": "AUDIT-001"
            },
            {
              "passed": true,
              "expected": "IP Address",
              "actual": "127.0.0.1",
              "message": "IP address must be recorded",
              "invariant": "AUDIT-002"
            }
          ],
          "duration": 317
        },
        {
          "success": true,
          "data": {
            "error": "Unauthorized"
          },
          "assertions": [],
          "duration": 1399
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1ri3004t14kj0nllvakk",
            "userId": "cmk6y1pit004p14kjnhm38zqo",
            "eventType": "login_failure",
            "ipAddress": "127.0.0.1",
            "userAgent": "DPFV-Verifier-Fail",
            "deviceInfo": null,
            "createdAt": "2026-01-09T14:00:43.131Z",
            "geolocation": null,
            "loginMethod": "Password"
          },
          "assertions": [
            {
              "passed": true,
              "expected": "login_failure",
              "actual": "login_failure",
              "message": "Latest log should be login_failure",
              "invariant": "AUDIT-001"
            }
          ],
          "duration": 191
        }
      ],
      "duration": 4179
    },
    {
      "id": "communication.email",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y1sm1004v14kj9262zam7",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "email": "test@hoperx.com",
            "provider": "GMAIL",
            "smtpHost": null,
            "smtpPort": null,
            "smtpUser": null,
            "smtpPasswordEncrypted": null,
            "useTLS": true,
            "isVerified": true,
            "isActive": true,
            "lastTestedAt": null,
            "createdAt": "2026-01-09T14:00:44.569Z",
            "updatedAt": "2026-01-09T14:00:44.569Z",
            "isPrimary": true,
            "authMethod": "OAUTH",
            "gmailAccessToken": "mock_token",
            "gmailRefreshToken": "mock_refresh",
            "gmailTokenExpiry": "2026-01-09T15:00:44.568Z",
            "oauthConnectedAt": null,
            "store": {
              "id": "cmk6y1lbn004d14kjwvho41y0",
              "name": "DPFV Test Pharmacy 1767967235032",
              "email": "store-1767967235032@test.hoperx.com"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email account available",
              "expected": "Account ID",
              "actual": "cmk6y1sm1004v14kj9262zam7",
              "invariant": "DATA-001"
            }
          ],
          "duration": 1130
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1tk4004x14kjeb91sf6u",
            "emailAccountId": "cmk6y1sm1004v14kj9262zam7",
            "to": [
              "recipient@hoperx.com"
            ],
            "cc": [],
            "bcc": [],
            "subject": "DPFV Test Email 1767967245511",
            "bodyHtml": "<p>Test Body</p>",
            "attachments": null,
            "status": "FAILED",
            "errorMessage": "Gmail not connected or token expired. Please reconnect.",
            "sentBy": "cmk6y1pit004p14kjnhm38zqo",
            "contextType": null,
            "contextId": null,
            "createdAt": "2026-01-09T14:00:45.796Z",
            "sentAt": null,
            "emailAccount": {
              "id": "cmk6y1sm1004v14kj9262zam7",
              "email": "test@hoperx.com",
              "provider": "GMAIL",
              "isActive": true
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Email attempt logged",
              "expected": "Log entry",
              "actual": "Found",
              "invariant": "INV-AUDIT"
            },
            {
              "passed": true,
              "message": "Log status resolved (SENT/FAILED)",
              "expected": "SENT/FAILED",
              "actual": "FAILED",
              "invariant": "INV-AUDIT"
            }
          ],
          "duration": 2288
        }
      ],
      "duration": 3418
    },
    {
      "id": "communication.whatsapp",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "messageId": "wa_1767967247800"
          },
          "assertions": [],
          "duration": 1
        }
      ],
      "duration": 1
    },
    {
      "id": "pos.quick-sale",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y1vmz005114kjsdxzw6yk",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "drugId": "cmk6y1vbg004z14kj9guvif3f",
            "batchNumber": "DPFV-1767967248286",
            "expiryDate": "2027-01-09T14:00:48.286Z",
            "quantityInStock": 100,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T14:00:48.491Z",
            "updatedAt": "2026-01-09T14:00:48.491Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6y1vbg004z14kj9guvif3f",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T14:00:48.076Z",
              "updatedAt": "2026-01-09T14:00:48.076Z",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "> 0",
              "actual": 100,
              "message": "Test batch must have positive stock",
              "invariant": "INV-001"
            },
            {
              "passed": true,
              "expected": "Future expiry date",
              "actual": "2027-01-09T14:00:48.286Z",
              "message": "Test batch must not be expired",
              "invariant": "INV-001"
            }
          ],
          "duration": 1392
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y227b005j14kjvhtp1sni",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "invoiceNumber": "INV1767967256574",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6y1w6h005314kjvupr8lxw",
            "subtotal": "237.5",
            "discountAmount": "0",
            "taxAmount": "28.5",
            "roundOff": "0",
            "total": "266",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6y1pit004p14kjnhm38zqo",
            "createdAt": "2026-01-09T14:00:56.999Z",
            "updatedAt": "2026-01-09T14:00:56.999Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6y1wl4005414kjtimtx2dt",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6y1zvm005h14kjrkuievhw",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [
            {
              "passed": true,
              "expected": "Sale with ID",
              "actual": "cmk6y227b005j14kjvhtp1sni",
              "message": "Sale must be created with ID",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "expected": "Invoice number present",
              "actual": "INV1767967256574",
              "message": "Invoice number must be generated",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "expected": 266,
              "actual": 266,
              "message": "Sum of payment splits must equal sale total",
              "invariant": "INV-002"
            }
          ],
          "duration": 11401
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1vmz005114kjsdxzw6yk",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "drugId": "cmk6y1vbg004z14kj9guvif3f",
            "batchNumber": "DPFV-1767967248286",
            "expiryDate": "2027-01-09T14:00:48.286Z",
            "quantityInStock": 90,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T14:00:48.491Z",
            "updatedAt": "2026-01-09T14:00:57.435Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6y1vbg004z14kj9guvif3f",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T14:00:48.076Z",
              "updatedAt": "2026-01-09T14:00:48.076Z",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": 90,
              "actual": 90,
              "message": "Stock must be deducted by exact sold quantity",
              "invariant": "INV-001"
            },
            {
              "passed": true,
              "expected": ">= 0",
              "actual": 90,
              "message": "Stock quantity must never be negative",
              "invariant": "INV-001"
            }
          ],
          "duration": 342
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y227b005j14kjvhtp1sni",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "invoiceNumber": "INV1767967256574",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6y1w6h005314kjvupr8lxw",
            "subtotal": "237.5",
            "discountAmount": "0",
            "taxAmount": "28.5",
            "roundOff": "0",
            "total": "266",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6y1pit004p14kjnhm38zqo",
            "createdAt": "2026-01-09T14:00:56.999Z",
            "updatedAt": "2026-01-09T14:00:56.999Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6y1wl4005414kjtimtx2dt",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6y1zvm005h14kjrkuievhw",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "patient": {
              "id": "cmk6y1w6h005314kjvupr8lxw",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "firstName": "Walk-in",
              "middleName": null,
              "lastName": "Customer",
              "dateOfBirth": null,
              "gender": null,
              "photoUrl": null,
              "phoneNumber": "WALKIN-1767967249193",
              "email": null,
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T14:00:49.194Z",
              "updatedAt": "2026-01-09T14:00:49.194Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "dispenseForPatient": null,
            "store": {
              "id": "cmk6y1lbn004d14kjwvho41y0",
              "name": "DPFV Test Pharmacy 1767967235032",
              "displayName": "Test Pharma 1767967235032",
              "email": "store-1767967235032@test.hoperx.com",
              "phoneNumber": "9967235032",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T14:00:35.124Z",
              "updatedAt": "2026-01-09T14:00:35.124Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false,
              "settings": null
            },
            "items": [
              {
                "id": "cmk6y229r005k14kjm7pjqbbs",
                "saleId": "cmk6y227b005j14kjvhtp1sni",
                "drugId": "cmk6y1vbg004z14kj9guvif3f",
                "batchId": "cmk6y1vmz005114kjsdxzw6yk",
                "quantity": 10,
                "mrp": "25",
                "discount": "5",
                "gstRate": "12",
                "lineTotal": "266",
                "cessAmount": "0",
                "cgstAmount": "0",
                "hsnCode": null,
                "igstAmount": "0",
                "sgstAmount": "0",
                "taxSlabId": null,
                "taxableAmount": "0",
                "drug": {
                  "id": "cmk6y1vbg004z14kj9guvif3f",
                  "rxcui": null,
                  "name": "Paracetamol 500mg",
                  "genericName": "Paracetamol 500mg",
                  "strength": null,
                  "form": "Tablet",
                  "manufacturer": null,
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T14:00:48.076Z",
                  "updatedAt": "2026-01-09T14:00:48.076Z",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "hsnCodeId": null
                },
                "batch": {
                  "id": "cmk6y1vmz005114kjsdxzw6yk",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "drugId": "cmk6y1vbg004z14kj9guvif3f",
                  "batchNumber": "DPFV-1767967248286",
                  "expiryDate": "2027-01-09T14:00:48.286Z",
                  "quantityInStock": 90,
                  "mrp": "25",
                  "purchasePrice": "20",
                  "supplierId": null,
                  "location": null,
                  "createdAt": "2026-01-09T14:00:48.491Z",
                  "updatedAt": "2026-01-09T14:00:57.435Z",
                  "deletedAt": null
                }
              }
            ],
            "paymentSplits": [
              {
                "id": "cmk6y229s005l14kj4ok1q2ik",
                "saleId": "cmk6y227b005j14kjvhtp1sni",
                "paymentMethod": "CASH",
                "amount": "266",
                "cardLast4": null,
                "cardBrand": null,
                "cardAuthCode": null,
                "upiTransactionId": null,
                "upiVpa": null,
                "walletProvider": null,
                "walletTxnId": null,
                "createdAt": "2026-01-09T14:00:57.088Z"
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "expected": {
                "drugId": "cmk6y1vbg004z14kj9guvif3f",
                "quantity": 10
              },
              "actual": [
                {
                  "drugId": "cmk6y1vbg004z14kj9guvif3f",
                  "qty": 10
                }
              ],
              "message": "Sale items must match what was in cart",
              "invariant": "SALE-001"
            }
          ],
          "duration": 896
        }
      ],
      "duration": 14031
    },
    {
      "id": "patients.create",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y262p005x14kjm5kjhals",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "firstName": "John",
            "middleName": null,
            "lastName": "Doe",
            "dateOfBirth": "1990-01-15T00:00:00.000Z",
            "gender": "MALE",
            "photoUrl": null,
            "phoneNumber": "9967261831",
            "email": "john.doe.1767967261831@test.com",
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "createdAt": "2026-01-09T14:01:02.017Z",
            "updatedAt": "2026-01-09T14:01:02.017Z",
            "deletedAt": null,
            "deletedBy": null,
            "creditLimit": "0",
            "currentBalance": "0"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must be created",
              "expected": "Patient object",
              "actual": "Created",
              "invariant": "DATA-001"
            }
          ],
          "duration": 376
        },
        {
          "success": true,
          "data": {
            "patient": {
              "id": "cmk6y262p005x14kjm5kjhals",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9967261831",
              "email": "john.doe.1767967261831@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T14:01:02.017Z",
              "updatedAt": "2026-01-09T14:01:02.017Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "issues": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient data is valid",
              "expected": "Valid data",
              "actual": "Valid data",
              "invariant": "DATA-002"
            }
          ],
          "duration": 0
        },
        {
          "success": true,
          "data": [],
          "assertions": [
            {
              "passed": true,
              "message": "Ledger check passed",
              "expected": "Ledger object or null",
              "actual": "Found",
              "invariant": "FIN-005"
            }
          ],
          "duration": 185
        }
      ],
      "duration": 562
    },
    {
      "id": "clinical.prescription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y262p005x14kjm5kjhals",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "firstName": "John",
            "middleName": null,
            "lastName": "Doe",
            "dateOfBirth": "1990-01-15T00:00:00.000Z",
            "gender": "MALE",
            "photoUrl": null,
            "phoneNumber": "9967261831",
            "email": "john.doe.1767967261831@test.com",
            "addressLine1": null,
            "addressLine2": null,
            "city": null,
            "state": null,
            "pinCode": null,
            "bloodGroup": null,
            "allergies": [],
            "chronicConditions": [],
            "emergencyContactName": null,
            "emergencyContactPhone": null,
            "createdAt": "2026-01-09T14:01:02.017Z",
            "updatedAt": "2026-01-09T14:01:02.017Z",
            "deletedAt": null,
            "deletedBy": null,
            "creditLimit": "0",
            "currentBalance": "0"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Patient must exist with ID",
              "expected": "Valid ID",
              "actual": "cmk6y262p005x14kjm5kjhals",
              "invariant": "DATA-001"
            }
          ],
          "duration": 181
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y26i7005z14kjsf0ungof",
            "rxcui": null,
            "name": "DPFV Test Drug 1767967262574",
            "genericName": "Test Generic",
            "strength": "500mg",
            "form": "Tablet",
            "manufacturer": "Test Pharma",
            "schedule": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-09T14:01:02.575Z",
            "updatedAt": "2026-01-09T14:01:02.575Z",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "hsnCodeId": null
          },
          "assertions": [],
          "duration": 175
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y26uf006014kjncnp6ewc",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "patientId": "cmk6y262p005x14kjm5kjhals",
            "prescriberId": null,
            "source": "manual",
            "priority": "Normal",
            "createdAt": "2026-01-09T14:01:03.015Z",
            "updatedAt": "2026-01-09T14:01:03.015Z",
            "deletedAt": null,
            "notes": null,
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "nextRefillDue": null,
            "ocrConfidence": null,
            "ocrText": null,
            "reminderSent": null,
            "uploadedImages": [],
            "prescriptionNumber": "RX000002",
            "type": "REGULAR",
            "issueDate": "2026-01-09T14:01:03.013Z",
            "expiryDate": "2026-07-09T14:01:02.749Z",
            "totalRefills": 3,
            "status": "DRAFT",
            "patient": {
              "id": "cmk6y262p005x14kjm5kjhals",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9967261831",
              "email": "john.doe.1767967261831@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T14:01:02.017Z",
              "updatedAt": "2026-01-09T14:01:02.017Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "prescriber": null,
            "store": {
              "id": "cmk6y1lbn004d14kjwvho41y0",
              "name": "DPFV Test Pharmacy 1767967235032",
              "displayName": "Test Pharma 1767967235032",
              "email": "store-1767967235032@test.hoperx.com",
              "phoneNumber": "9967235032",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T14:00:35.124Z",
              "updatedAt": "2026-01-09T14:00:35.124Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "versions": [
              {
                "id": "cmk6y27dt006214kjntqn55iq",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk6y1pit004p14kjnhm38zqo",
                "createdAt": "2026-01-09T14:01:03.714Z",
                "items": [
                  {
                    "id": "cmk6y27dt006414kjie2l6h0v",
                    "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                    "drugId": "cmk6y26i7005z14kjsf0ungof",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk6y26i7005z14kjsf0ungof",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767967262574",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-09T14:01:02.575Z",
                      "updatedAt": "2026-01-09T14:01:02.575Z",
                      "storeId": "cmk6y1lbn004d14kjwvho41y0",
                      "hsnCodeId": null
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk6y27uu006514kjyqewig2t",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              },
              {
                "id": "cmk6y27uu006614kj7udzyft4",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              },
              {
                "id": "cmk6y27uu006714kjt8og7gmz",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              },
              {
                "id": "cmk6y27uu006814kjvtjjuz0t",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk6y27dt006414kjie2l6h0v",
                "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                "drugId": "cmk6y26i7005z14kjsf0ungof",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk6y26i7005z14kjsf0ungof",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767967262574",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T14:01:02.575Z",
                  "updatedAt": "2026-01-09T14:01:02.575Z",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "hsnCodeId": null
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk6y27zo006a14kjw4huubj4",
                "storeId": "cmk6y1lbn004d14kjwvho41y0",
                "userId": "cmk6y1pit004p14kjnhm38zqo",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk6y26uf006014kjncnp6ewc",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T14:01:04.500Z",
                "user": {
                  "id": "cmk6y1pit004p14kjnhm38zqo",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Prescription must be created",
              "expected": "Prescription object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Prescription status should be DRAFT",
              "invariant": "RX-001"
            }
          ],
          "duration": 3542
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y26uf006014kjncnp6ewc",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "patientId": "cmk6y262p005x14kjm5kjhals",
            "prescriberId": null,
            "source": "manual",
            "priority": "Normal",
            "createdAt": "2026-01-09T14:01:03.015Z",
            "updatedAt": "2026-01-09T14:01:06.376Z",
            "deletedAt": null,
            "notes": null,
            "controlledFlag": false,
            "eRxId": null,
            "eRxMetadata": null,
            "nextRefillDue": null,
            "ocrConfidence": null,
            "ocrText": null,
            "reminderSent": null,
            "uploadedImages": [],
            "prescriptionNumber": "RX000002",
            "type": "REGULAR",
            "issueDate": "2026-01-09T14:01:03.013Z",
            "expiryDate": "2026-07-09T14:01:02.749Z",
            "totalRefills": 3,
            "status": "ACTIVE",
            "patient": {
              "id": "cmk6y262p005x14kjm5kjhals",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "firstName": "John",
              "middleName": null,
              "lastName": "Doe",
              "dateOfBirth": "1990-01-15T00:00:00.000Z",
              "gender": "MALE",
              "photoUrl": null,
              "phoneNumber": "9967261831",
              "email": "john.doe.1767967261831@test.com",
              "addressLine1": null,
              "addressLine2": null,
              "city": null,
              "state": null,
              "pinCode": null,
              "bloodGroup": null,
              "allergies": [],
              "chronicConditions": [],
              "emergencyContactName": null,
              "emergencyContactPhone": null,
              "createdAt": "2026-01-09T14:01:02.017Z",
              "updatedAt": "2026-01-09T14:01:02.017Z",
              "deletedAt": null,
              "deletedBy": null,
              "creditLimit": "0",
              "currentBalance": "0"
            },
            "prescriber": null,
            "store": {
              "id": "cmk6y1lbn004d14kjwvho41y0",
              "name": "DPFV Test Pharmacy 1767967235032",
              "displayName": "Test Pharma 1767967235032",
              "email": "store-1767967235032@test.hoperx.com",
              "phoneNumber": "9967235032",
              "businessType": "Retail Pharmacy",
              "logoUrl": null,
              "addressLine1": "123 Test Street",
              "addressLine2": null,
              "city": "Mumbai",
              "state": "Maharashtra",
              "pinCode": "400001",
              "landmark": null,
              "is24x7": false,
              "homeDelivery": false,
              "latitude": null,
              "longitude": null,
              "geofenceRadius": 50,
              "createdAt": "2026-01-09T14:00:35.124Z",
              "updatedAt": "2026-01-09T14:00:35.124Z",
              "deletedAt": null,
              "dlNumber": null,
              "gstin": null,
              "whatsapp": null,
              "pan": null,
              "featureOverrides": null,
              "bankDetails": null,
              "jurisdiction": null,
              "signatureUrl": null,
              "termsAndConditions": null,
              "whatsappMode": null,
              "isDemo": false
            },
            "versions": [
              {
                "id": "cmk6y27dt006214kjntqn55iq",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "versionNumber": 1,
                "instructions": "DPFV Test Prescription",
                "substitutionNotes": null,
                "attachments": null,
                "changedReason": null,
                "createdBy": "cmk6y1pit004p14kjnhm38zqo",
                "createdAt": "2026-01-09T14:01:03.714Z",
                "items": [
                  {
                    "id": "cmk6y27dt006414kjie2l6h0v",
                    "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                    "drugId": "cmk6y26i7005z14kjsf0ungof",
                    "batchId": null,
                    "quantityPrescribed": 30,
                    "sig": "1 tablet daily",
                    "daysSupply": null,
                    "substitutionAllowed": true,
                    "isControlled": false,
                    "refillsAllowed": 0,
                    "drug": {
                      "id": "cmk6y26i7005z14kjsf0ungof",
                      "rxcui": null,
                      "name": "DPFV Test Drug 1767967262574",
                      "genericName": "Test Generic",
                      "strength": "500mg",
                      "form": "Tablet",
                      "manufacturer": "Test Pharma",
                      "schedule": null,
                      "hsnCode": null,
                      "gstRate": "12",
                      "requiresPrescription": false,
                      "defaultUnit": null,
                      "lowStockThreshold": null,
                      "description": null,
                      "lastSyncedAt": null,
                      "createdAt": "2026-01-09T14:01:02.575Z",
                      "updatedAt": "2026-01-09T14:01:02.575Z",
                      "storeId": "cmk6y1lbn004d14kjwvho41y0",
                      "hsnCodeId": null
                    },
                    "batch": null
                  }
                ]
              }
            ],
            "refills": [
              {
                "id": "cmk6y27uu006514kjyqewig2t",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              },
              {
                "id": "cmk6y27uu006614kj7udzyft4",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 1,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              },
              {
                "id": "cmk6y27uu006714kjt8og7gmz",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 2,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              },
              {
                "id": "cmk6y27uu006814kjvtjjuz0t",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 3,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "items": []
              }
            ],
            "files": [],
            "items": [
              {
                "id": "cmk6y27dt006414kjie2l6h0v",
                "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                "drugId": "cmk6y26i7005z14kjsf0ungof",
                "batchId": null,
                "quantityPrescribed": 30,
                "sig": "1 tablet daily",
                "daysSupply": null,
                "substitutionAllowed": true,
                "isControlled": false,
                "refillsAllowed": 0,
                "drug": {
                  "id": "cmk6y26i7005z14kjsf0ungof",
                  "rxcui": null,
                  "name": "DPFV Test Drug 1767967262574",
                  "genericName": "Test Generic",
                  "strength": "500mg",
                  "form": "Tablet",
                  "manufacturer": "Test Pharma",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T14:01:02.575Z",
                  "updatedAt": "2026-01-09T14:01:02.575Z",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "hsnCodeId": null
                },
                "batch": null
              }
            ],
            "currentVersion": 1,
            "auditLogs": [
              {
                "id": "cmk6y29km006c14kjhzyi0cvg",
                "storeId": "cmk6y1lbn004d14kjwvho41y0",
                "userId": "cmk6y1pit004p14kjnhm38zqo",
                "action": "PRESCRIPTION_ACTIVATED",
                "entityType": "Prescription",
                "entityId": "cmk6y26uf006014kjncnp6ewc",
                "changes": {
                  "newStatus": "ACTIVE",
                  "previousStatus": "DRAFT"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T14:01:06.550Z",
                "user": {
                  "id": "cmk6y1pit004p14kjnhm38zqo",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              },
              {
                "id": "cmk6y27zo006a14kjw4huubj4",
                "storeId": "cmk6y1lbn004d14kjwvho41y0",
                "userId": "cmk6y1pit004p14kjnhm38zqo",
                "action": "PRESCRIPTION_CREATED",
                "entityType": "Prescription",
                "entityId": "cmk6y26uf006014kjncnp6ewc",
                "changes": {
                  "type": "REGULAR",
                  "itemCount": 1,
                  "totalRefills": 3,
                  "prescriptionNumber": "RX000002"
                },
                "ipAddress": null,
                "createdAt": "2026-01-09T14:01:04.500Z",
                "user": {
                  "id": "cmk6y1pit004p14kjnhm38zqo",
                  "firstName": "Audit",
                  "lastName": "Admin",
                  "email": "dpfv-audit-admin@test.hoperx.com"
                }
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "expected": "ACTIVE",
              "actual": "ACTIVE",
              "message": "Prescription status should be ACTIVE",
              "invariant": "RX-002"
            },
            {
              "passed": true,
              "message": "Total refills should be 3",
              "expected": 3,
              "actual": 3,
              "invariant": "RX-003"
            }
          ],
          "duration": 1377
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y27uu006514kjyqewig2t",
            "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
            "refillNumber": 0,
            "authorizedQty": 30,
            "dispensedQty": 0,
            "remainingQty": 30,
            "status": "AVAILABLE",
            "expiresAt": "2026-07-09T14:01:02.749Z",
            "notes": null,
            "createdAt": "2026-01-09T14:01:04.327Z",
            "updatedAt": "2026-01-09T14:01:04.327Z"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Refill must be available",
              "expected": "AVAILABLE",
              "actual": "AVAILABLE",
              "invariant": "RX-004"
            }
          ],
          "duration": 1112
        }
      ],
      "duration": 6388
    },
    {
      "id": "admin.roles",
      "status": "FAILED",
      "failedAtStep": "roles.create",
      "steps": [
        {
          "success": false,
          "assertions": [
            {
              "passed": false,
              "message": "Role object must be returned",
              "expected": "Role",
              "actual": "Null",
              "invariant": "DATA-001"
            },
            {
              "passed": null,
              "message": "Custom role must not be built-in",
              "expected": false,
              "invariant": "INV-011"
            }
          ],
          "duration": 417,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 418
    },
    {
      "id": "admin.features",
      "status": "FAILED",
      "failedAtStep": "features.update",
      "steps": [
        {
          "success": true,
          "data": {
            "featureConfig": {
              "gst": "essential",
              "pos": "essential",
              "help": "essential",
              "team": "essential",
              "audit": "essential",
              "store": "essential",
              "claims": "optional",
              "engage": "essential",
              "orders": "essential",
              "finance": "essential",
              "reports": "essential",
              "dispense": "essential",
              "insights": "essential",
              "messages": "essential",
              "patients": "essential",
              "dashboard": "essential",
              "inventory": "essential",
              "knowledge": "essential",
              "suppliers": "essential",
              "multiStore": "hidden",
              "regulations": "essential",
              "integrations": "essential",
              "prescriptions": "essential"
            },
            "enabledSections": [
              "Operations",
              "Inventory & Supply",
              "Billing & Finance",
              "Analytics",
              "Communication",
              "Compliance",
              "Settings",
              "Support"
            ],
            "defaultPermissions": [
              "prescription.read",
              "prescription.create",
              "prescription.fulfill",
              "patient.read",
              "patient.create",
              "inventory.read",
              "po.read",
              "po.create",
              "sales.create",
              "sales.read",
              "communication.send",
              "marketing.loyalty"
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "Feature config must exist",
              "expected": "Config object",
              "actual": "Found",
              "invariant": "DATA-001"
            }
          ],
          "duration": 337
        },
        {
          "success": false,
          "data": {
            "id": "cmk6y1lbn004d14kjwvho41y0",
            "businessType": "Retail Pharmacy",
            "featureOverrides": {
              "pos": "hidden"
            }
          },
          "assertions": [
            {
              "passed": false,
              "message": "POS should be hidden",
              "expected": "hidden",
              "actual": "undefined",
              "invariant": "CONF-001"
            }
          ],
          "duration": 251,
          "error": {
            "name": "Error",
            "message": "Assertion(s) failed",
            "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
          }
        }
      ],
      "error": {
        "name": "Error",
        "message": "Assertion(s) failed",
        "stack": "Error: Assertion(s) failed\n    at Runner.executeStep (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:342:58)\n    at async Runner.executeScenario (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:230:32)\n    at async Runner.run (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/runner/Runner.ts:119:28)\n    at async main (/Users/dikshantjangra/Desktop/hoperxpharma/backend/verifier/run.ts:208:24)"
      },
      "duration": 590
    },
    {
      "id": "procurement.supplier",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y2c9k006e14kjwdv01eoq",
            "name": "Alpha Pharma Distributors",
            "category": "Distributor",
            "status": "Active",
            "gstin": "27AABCU9603R1ZN",
            "dlNumber": null,
            "pan": null,
            "contactName": "Rahul Kumar",
            "phoneNumber": "9876543210",
            "email": "alpha@test.com",
            "whatsapp": null,
            "addressLine1": "Test Address 1",
            "addressLine2": null,
            "city": "Pune",
            "state": "Maharashtra",
            "pinCode": "411001",
            "paymentTerms": null,
            "creditLimit": null,
            "createdAt": "2026-01-09T14:01:10.041Z",
            "updatedAt": "2026-01-09T14:01:10.041Z",
            "deletedAt": null,
            "storeId": "cmk6y1lbn004d14kjwvho41y0"
          },
          "assertions": [
            {
              "passed": true,
              "message": "Supplier must have ID",
              "expected": "ID present",
              "actual": "cmk6y2c9k006e14kjwdv01eoq",
              "invariant": "DATA-001"
            }
          ],
          "duration": 552
        },
        {
          "success": false,
          "assertions": [
            {
              "passed": true,
              "message": "Skipped negative test",
              "expected": true,
              "actual": true,
              "invariant": "DATA-INTEGRITY"
            }
          ],
          "duration": 83
        }
      ],
      "duration": 635
    },
    {
      "id": "billing.subscription",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk6y1lvj004f14kjkuwuyxhq",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "TRIAL",
              "trialEndsAt": "2026-01-23T14:00:35.838Z",
              "currentPeriodStart": "2026-01-09T14:00:35.838Z",
              "currentPeriodEnd": "2026-01-23T14:00:35.838Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T14:00:35.839Z",
              "updatedAt": "2026-01-09T14:00:35.839Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan is TRIAL",
              "expected": "TRIAL",
              "actual": "free_trial",
              "invariant": "SUB-001"
            }
          ],
          "duration": 503
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1lvj004f14kjkuwuyxhq",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "planId": "cmiudhheo000014skldx27kfs",
            "status": "EXPIRED",
            "trialEndsAt": "2026-01-23T14:00:35.838Z",
            "currentPeriodStart": "2026-01-09T14:00:35.838Z",
            "currentPeriodEnd": "2026-01-08T14:01:11.104Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T14:00:35.839Z",
            "updatedAt": "2026-01-09T14:01:11.106Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null,
            "plan": {
              "id": "cmiudhheo000014skldx27kfs",
              "name": "free_trial",
              "displayName": "Free Trial",
              "description": "14-day free trial with limited features",
              "price": "0",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 50,
              "prescriptionLimit": 100,
              "storageLimit": 100,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.160Z",
              "updatedAt": "2025-12-06T14:12:08.160Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "End date is in past",
              "expected": "Past Date",
              "actual": "2026-01-08T14:01:11.104Z",
              "invariant": "SUB-002"
            }
          ],
          "duration": 931
        },
        {
          "success": true,
          "data": {
            "isActive": false,
            "subscription": {
              "id": "cmk6y1lvj004f14kjkuwuyxhq",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "planId": "cmiudhheo000014skldx27kfs",
              "status": "EXPIRED",
              "trialEndsAt": "2026-01-23T14:00:35.838Z",
              "currentPeriodStart": "2026-01-09T14:00:35.838Z",
              "currentPeriodEnd": "2026-01-08T14:01:11.104Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T14:00:35.839Z",
              "updatedAt": "2026-01-09T14:01:11.106Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhheo000014skldx27kfs",
                "name": "free_trial",
                "displayName": "Free Trial",
                "description": "14-day free trial with limited features",
                "price": "0",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 50,
                "prescriptionLimit": 100,
                "storageLimit": 100,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.160Z",
                "updatedAt": "2025-12-06T14:12:08.160Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription is inactive",
              "expected": false,
              "actual": false,
              "invariant": "SUB-003"
            }
          ],
          "duration": 333
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1lvj004f14kjkuwuyxhq",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "planId": "cmiudhi1f000114sknt4k3mqx",
            "status": "ACTIVE",
            "trialEndsAt": null,
            "currentPeriodStart": "2026-01-09T14:01:12.695Z",
            "currentPeriodEnd": "2026-02-09T14:01:12.695Z",
            "autoRenew": true,
            "createdAt": "2026-01-09T14:00:35.839Z",
            "updatedAt": "2026-01-09T14:01:12.697Z",
            "activeVerticals": [],
            "billingCycle": "monthly",
            "comboBundle": null,
            "monthlyAmount": null,
            "welcomeShown": false,
            "welcomeShownAt": null,
            "plan": {
              "id": "cmiudhi1f000114sknt4k3mqx",
              "name": "basic",
              "displayName": "Basic Plan",
              "description": "Perfect for small pharmacies",
              "price": "999",
              "currency": "INR",
              "billingCycle": "monthly",
              "patientLimit": 500,
              "prescriptionLimit": null,
              "storageLimit": 1000,
              "multiStore": false,
              "createdAt": "2025-12-06T14:12:08.980Z",
              "updatedAt": "2025-12-06T14:12:08.980Z"
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Plan upgraded to Basic",
              "expected": "basic",
              "actual": "basic",
              "invariant": "SUB-004"
            }
          ],
          "duration": 1087
        },
        {
          "success": true,
          "data": {
            "isActive": true,
            "subscription": {
              "id": "cmk6y1lvj004f14kjkuwuyxhq",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "planId": "cmiudhi1f000114sknt4k3mqx",
              "status": "ACTIVE",
              "trialEndsAt": null,
              "currentPeriodStart": "2026-01-09T14:01:12.695Z",
              "currentPeriodEnd": "2026-02-09T14:01:12.695Z",
              "autoRenew": true,
              "createdAt": "2026-01-09T14:00:35.839Z",
              "updatedAt": "2026-01-09T14:01:12.697Z",
              "activeVerticals": [],
              "billingCycle": "monthly",
              "comboBundle": null,
              "monthlyAmount": null,
              "welcomeShown": false,
              "welcomeShownAt": null,
              "plan": {
                "id": "cmiudhi1f000114sknt4k3mqx",
                "name": "basic",
                "displayName": "Basic Plan",
                "description": "Perfect for small pharmacies",
                "price": "999",
                "currency": "INR",
                "billingCycle": "monthly",
                "patientLimit": 500,
                "prescriptionLimit": null,
                "storageLimit": 1000,
                "multiStore": false,
                "createdAt": "2025-12-06T14:12:08.980Z",
                "updatedAt": "2025-12-06T14:12:08.980Z"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Subscription restored to active",
              "expected": true,
              "actual": true,
              "invariant": "SUB-005"
            }
          ],
          "duration": 341
        }
      ],
      "duration": 3196
    },
    {
      "id": "clinical.dispense",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y2f5s006g14kjonellnrd",
            "refillId": "cmk6y27uu006514kjyqewig2t",
            "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
            "status": "QUEUED",
            "queuedAt": "2026-01-09T14:01:13.791Z",
            "verifyingAt": null,
            "fillingAt": null,
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6y1pit004p14kjnhm38zqo",
            "verifiedBy": null,
            "filledBy": null,
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": null,
            "cancellationReason": null,
            "createdAt": "2026-01-09T14:01:13.792Z",
            "updatedAt": "2026-01-09T14:01:13.792Z",
            "refill": {
              "id": "cmk6y27uu006514kjyqewig2t",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T14:01:02.749Z",
              "notes": null,
              "createdAt": "2026-01-09T14:01:04.327Z",
              "updatedAt": "2026-01-09T14:01:04.327Z",
              "prescription": {
                "id": "cmk6y26uf006014kjncnp6ewc",
                "storeId": "cmk6y1lbn004d14kjwvho41y0",
                "patientId": "cmk6y262p005x14kjm5kjhals",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T14:01:03.015Z",
                "updatedAt": "2026-01-09T14:01:06.376Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T14:01:03.013Z",
                "expiryDate": "2026-07-09T14:01:02.749Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6y262p005x14kjm5kjhals",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9967261831",
                  "email": "john.doe.1767967261831@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T14:01:02.017Z",
                  "updatedAt": "2026-01-09T14:01:02.017Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6y27dt006214kjntqn55iq",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6y1pit004p14kjnhm38zqo",
              "createdAt": "2026-01-09T14:01:03.714Z",
              "items": [
                {
                  "id": "cmk6y27dt006414kjie2l6h0v",
                  "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                  "drugId": "cmk6y26i7005z14kjsf0ungof",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6y26i7005z14kjsf0ungof",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767967262574",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T14:01:02.575Z",
                    "updatedAt": "2026-01-09T14:01:02.575Z",
                    "storeId": "cmk6y1lbn004d14kjwvho41y0",
                    "hsnCodeId": null
                  },
                  "batch": null
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense must be created",
              "expected": "Dispense object",
              "actual": "Created",
              "invariant": "DATA-001"
            },
            {
              "passed": true,
              "expected": "QUEUED",
              "actual": "QUEUED",
              "message": "Dispense status should be QUEUED",
              "invariant": "DISP-001"
            }
          ],
          "duration": 1177
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2f5s006g14kjonellnrd",
            "refillId": "cmk6y27uu006514kjyqewig2t",
            "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
            "status": "FILLING",
            "queuedAt": "2026-01-09T14:01:13.791Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T14:01:14.799Z",
            "checkingAt": null,
            "readyAt": null,
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6y1pit004p14kjnhm38zqo",
            "verifiedBy": null,
            "filledBy": "cmk6y1pit004p14kjnhm38zqo",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to FILLING",
            "cancellationReason": null,
            "createdAt": "2026-01-09T14:01:13.792Z",
            "updatedAt": "2026-01-09T14:01:14.800Z",
            "refill": {
              "id": "cmk6y27uu006514kjyqewig2t",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T14:01:02.749Z",
              "notes": null,
              "createdAt": "2026-01-09T14:01:04.327Z",
              "updatedAt": "2026-01-09T14:01:04.327Z",
              "prescription": {
                "id": "cmk6y26uf006014kjncnp6ewc",
                "storeId": "cmk6y1lbn004d14kjwvho41y0",
                "patientId": "cmk6y262p005x14kjm5kjhals",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T14:01:03.015Z",
                "updatedAt": "2026-01-09T14:01:06.376Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T14:01:03.013Z",
                "expiryDate": "2026-07-09T14:01:02.749Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6y262p005x14kjm5kjhals",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9967261831",
                  "email": "john.doe.1767967261831@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T14:01:02.017Z",
                  "updatedAt": "2026-01-09T14:01:02.017Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6y27dt006214kjntqn55iq",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6y1pit004p14kjnhm38zqo",
              "createdAt": "2026-01-09T14:01:03.714Z",
              "items": [
                {
                  "id": "cmk6y27dt006414kjie2l6h0v",
                  "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                  "drugId": "cmk6y26i7005z14kjsf0ungof",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6y26i7005z14kjsf0ungof",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767967262574",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T14:01:02.575Z",
                    "updatedAt": "2026-01-09T14:01:02.575Z",
                    "storeId": "cmk6y1lbn004d14kjwvho41y0",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "FILLING",
              "actual": "FILLING",
              "message": "Dispense status should be FILLING",
              "invariant": "DISP-002"
            }
          ],
          "duration": 1089
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2f5s006g14kjonellnrd",
            "refillId": "cmk6y27uu006514kjyqewig2t",
            "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
            "status": "READY",
            "queuedAt": "2026-01-09T14:01:13.791Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T14:01:14.799Z",
            "checkingAt": null,
            "readyAt": "2026-01-09T14:01:15.888Z",
            "completedAt": null,
            "cancelledAt": null,
            "queuedBy": "cmk6y1pit004p14kjnhm38zqo",
            "verifiedBy": null,
            "filledBy": "cmk6y1pit004p14kjnhm38zqo",
            "checkedBy": null,
            "dispensedBy": null,
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to READY",
            "cancellationReason": null,
            "createdAt": "2026-01-09T14:01:13.792Z",
            "updatedAt": "2026-01-09T14:01:15.890Z",
            "refill": {
              "id": "cmk6y27uu006514kjyqewig2t",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T14:01:02.749Z",
              "notes": null,
              "createdAt": "2026-01-09T14:01:04.327Z",
              "updatedAt": "2026-01-09T14:01:04.327Z",
              "prescription": {
                "id": "cmk6y26uf006014kjncnp6ewc",
                "storeId": "cmk6y1lbn004d14kjwvho41y0",
                "patientId": "cmk6y262p005x14kjm5kjhals",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T14:01:03.015Z",
                "updatedAt": "2026-01-09T14:01:06.376Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T14:01:03.013Z",
                "expiryDate": "2026-07-09T14:01:02.749Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6y262p005x14kjm5kjhals",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9967261831",
                  "email": "john.doe.1767967261831@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T14:01:02.017Z",
                  "updatedAt": "2026-01-09T14:01:02.017Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6y27dt006214kjntqn55iq",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6y1pit004p14kjnhm38zqo",
              "createdAt": "2026-01-09T14:01:03.714Z",
              "items": [
                {
                  "id": "cmk6y27dt006414kjie2l6h0v",
                  "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                  "drugId": "cmk6y26i7005z14kjsf0ungof",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6y26i7005z14kjsf0ungof",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767967262574",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T14:01:02.575Z",
                    "updatedAt": "2026-01-09T14:01:02.575Z",
                    "storeId": "cmk6y1lbn004d14kjwvho41y0",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "READY",
              "actual": "READY",
              "message": "Dispense status should be READY",
              "invariant": "DISP-003"
            }
          ],
          "duration": 1108
        },
        {
          "success": true,
          "data": [
            {
              "id": "cmk6y2f5s006g14kjonellnrd",
              "refillId": "cmk6y27uu006514kjyqewig2t",
              "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
              "status": "READY",
              "queuedAt": "2026-01-09T14:01:13.791Z",
              "verifyingAt": null,
              "fillingAt": "2026-01-09T14:01:14.799Z",
              "checkingAt": null,
              "readyAt": "2026-01-09T14:01:15.888Z",
              "completedAt": null,
              "cancelledAt": null,
              "queuedBy": "cmk6y1pit004p14kjnhm38zqo",
              "verifiedBy": null,
              "filledBy": "cmk6y1pit004p14kjnhm38zqo",
              "checkedBy": null,
              "dispensedBy": null,
              "quantityDispensed": null,
              "notes": "DPFV: Progressed to READY",
              "cancellationReason": null,
              "createdAt": "2026-01-09T14:01:13.792Z",
              "updatedAt": "2026-01-09T14:01:15.890Z",
              "refill": {
                "id": "cmk6y27uu006514kjyqewig2t",
                "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
                "refillNumber": 0,
                "authorizedQty": 30,
                "dispensedQty": 0,
                "remainingQty": 30,
                "status": "AVAILABLE",
                "expiresAt": "2026-07-09T14:01:02.749Z",
                "notes": null,
                "createdAt": "2026-01-09T14:01:04.327Z",
                "updatedAt": "2026-01-09T14:01:04.327Z",
                "prescription": {
                  "id": "cmk6y26uf006014kjncnp6ewc",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "patientId": "cmk6y262p005x14kjm5kjhals",
                  "prescriberId": null,
                  "source": "manual",
                  "priority": "Normal",
                  "createdAt": "2026-01-09T14:01:03.015Z",
                  "updatedAt": "2026-01-09T14:01:06.376Z",
                  "deletedAt": null,
                  "notes": null,
                  "controlledFlag": false,
                  "eRxId": null,
                  "eRxMetadata": null,
                  "nextRefillDue": null,
                  "ocrConfidence": null,
                  "ocrText": null,
                  "reminderSent": null,
                  "uploadedImages": [],
                  "prescriptionNumber": "RX000002",
                  "type": "REGULAR",
                  "issueDate": "2026-01-09T14:01:03.013Z",
                  "expiryDate": "2026-07-09T14:01:02.749Z",
                  "totalRefills": 3,
                  "status": "ACTIVE",
                  "patient": {
                    "id": "cmk6y262p005x14kjm5kjhals",
                    "storeId": "cmk6y1lbn004d14kjwvho41y0",
                    "firstName": "John",
                    "middleName": null,
                    "lastName": "Doe",
                    "dateOfBirth": "1990-01-15T00:00:00.000Z",
                    "gender": "MALE",
                    "photoUrl": null,
                    "phoneNumber": "9967261831",
                    "email": "john.doe.1767967261831@test.com",
                    "addressLine1": null,
                    "addressLine2": null,
                    "city": null,
                    "state": null,
                    "pinCode": null,
                    "bloodGroup": null,
                    "allergies": [],
                    "chronicConditions": [],
                    "emergencyContactName": null,
                    "emergencyContactPhone": null,
                    "createdAt": "2026-01-09T14:01:02.017Z",
                    "updatedAt": "2026-01-09T14:01:02.017Z",
                    "deletedAt": null,
                    "deletedBy": null,
                    "creditLimit": "0",
                    "currentBalance": "0"
                  }
                }
              }
            }
          ],
          "assertions": [
            {
              "passed": true,
              "message": "Dispense visible",
              "expected": "Dispense in list",
              "actual": "Found",
              "invariant": "POS-001"
            }
          ],
          "duration": 426
        }
      ],
      "duration": 3802
    },
    {
      "id": "procurement.po",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y2hyp006i14kjsrdntv93",
            "rxcui": null,
            "name": "PO Test Drug 1767967277424",
            "genericName": null,
            "strength": null,
            "form": null,
            "manufacturer": "Cipla",
            "schedule": null,
            "hsnCode": null,
            "gstRate": "12",
            "requiresPrescription": false,
            "defaultUnit": null,
            "lowStockThreshold": null,
            "description": null,
            "lastSyncedAt": null,
            "createdAt": "2026-01-09T14:01:17.425Z",
            "updatedAt": "2026-01-09T14:01:17.425Z",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "hsnCodeId": null
          },
          "assertions": [],
          "duration": 168
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2jj1006k14kjqrxe5q1d",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "supplierId": "cmk6y2c9k006e14kjwdv01eoq",
            "poNumber": "PO202601279366",
            "status": "DRAFT",
            "orderDate": "2026-01-09T14:01:19.453Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6y1pit004p14kjnhm38zqo",
            "approvedBy": null,
            "approvedAt": null,
            "createdAt": "2026-01-09T14:01:19.453Z",
            "updatedAt": "2026-01-09T14:01:19.453Z",
            "deletedAt": null,
            "notes": null,
            "items": [
              {
                "id": "cmk6y2jsh006m14kjcuogllmy",
                "poId": "cmk6y2jj1006k14kjqrxe5q1d",
                "drugId": "cmk6y2hyp006i14kjsrdntv93",
                "quantity": 100,
                "receivedQty": 0,
                "packSize": 1,
                "packUnit": "Strip",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "5600"
              }
            ]
          },
          "assertions": [
            {
              "passed": true,
              "message": "PO Total match",
              "expected": 5600,
              "actual": "5600",
              "invariant": "INV-007"
            },
            {
              "passed": true,
              "expected": "DRAFT",
              "actual": "DRAFT",
              "message": "Initial status DRAFT",
              "invariant": "STATE-001"
            }
          ],
          "duration": 2546
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2jj1006k14kjqrxe5q1d",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "supplierId": "cmk6y2c9k006e14kjwdv01eoq",
            "poNumber": "PO202601279366",
            "status": "APPROVED",
            "orderDate": "2026-01-09T14:01:19.453Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6y1pit004p14kjnhm38zqo",
            "approvedBy": "cmk6y1pit004p14kjnhm38zqo",
            "approvedAt": "2026-01-09T14:01:21.288Z",
            "createdAt": "2026-01-09T14:01:19.453Z",
            "updatedAt": "2026-01-09T14:01:21.289Z",
            "deletedAt": null,
            "notes": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "APPROVED",
              "actual": "APPROVED",
              "message": "Status -> APPROVED",
              "invariant": "STATE-002"
            }
          ],
          "duration": 1527
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2jj1006k14kjqrxe5q1d",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "supplierId": "cmk6y2c9k006e14kjwdv01eoq",
            "poNumber": "PO202601279366",
            "status": "SENT",
            "orderDate": "2026-01-09T14:01:19.453Z",
            "expectedDeliveryDate": null,
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "currency": "INR",
            "paymentTerms": null,
            "createdBy": "cmk6y1pit004p14kjnhm38zqo",
            "approvedBy": "cmk6y1pit004p14kjnhm38zqo",
            "approvedAt": "2026-01-09T14:01:21.288Z",
            "createdAt": "2026-01-09T14:01:19.453Z",
            "updatedAt": "2026-01-09T14:01:22.273Z",
            "deletedAt": null,
            "notes": null
          },
          "assertions": [
            {
              "passed": true,
              "expected": "SENT",
              "actual": "SENT",
              "message": "Status -> SENT",
              "invariant": "STATE-003"
            }
          ],
          "duration": 865
        }
      ],
      "duration": 5108
    },
    {
      "id": "pos.rx-sale",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y2qxo006y14kj4ncovjxg",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "invoiceNumber": "INV1767967288321",
            "invoiceType": "RECEIPT",
            "patientId": "cmk6y262p005x14kjm5kjhals",
            "subtotal": "3000",
            "discountAmount": "0",
            "taxAmount": "360",
            "roundOff": "0",
            "total": "3360",
            "originalSaleId": null,
            "creditReason": null,
            "soldBy": "cmk6y1pit004p14kjnhm38zqo",
            "createdAt": "2026-01-09T14:01:29.052Z",
            "updatedAt": "2026-01-09T14:01:29.052Z",
            "deletedAt": null,
            "status": "COMPLETED",
            "prescriptionId": "cmk6y2m1d006n14kjxfvba4il",
            "attachments": null,
            "balance": "0",
            "paymentStatus": "PAID",
            "dispenseForPatientId": null,
            "dispenseId": "cmk6y2o69006w14kjyxcka4zw",
            "buyerGstin": null,
            "placeOfSupply": null,
            "cessAmount": "0",
            "cgstAmount": "0",
            "gstrCategory": null,
            "igstAmount": "0",
            "isIgst": false,
            "sgstAmount": "0",
            "taxableAmount": "0",
            "items": [],
            "paymentSplits": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Sale must be created",
              "expected": "Sale object",
              "actual": "Created",
              "invariant": "SALE-001"
            },
            {
              "passed": true,
              "message": "Invoice number generated",
              "expected": "Invoice number",
              "actual": "INV1767967288321",
              "invariant": "SALE-002"
            }
          ],
          "duration": 12153
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2f5s006g14kjonellnrd",
            "refillId": "cmk6y27uu006514kjyqewig2t",
            "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
            "status": "COMPLETED",
            "queuedAt": "2026-01-09T14:01:13.791Z",
            "verifyingAt": null,
            "fillingAt": "2026-01-09T14:01:14.799Z",
            "checkingAt": null,
            "readyAt": "2026-01-09T14:01:15.888Z",
            "completedAt": "2026-01-09T14:01:34.686Z",
            "cancelledAt": null,
            "queuedBy": "cmk6y1pit004p14kjnhm38zqo",
            "verifiedBy": null,
            "filledBy": "cmk6y1pit004p14kjnhm38zqo",
            "checkedBy": null,
            "dispensedBy": "cmk6y1pit004p14kjnhm38zqo",
            "quantityDispensed": null,
            "notes": "DPFV: Progressed to COMPLETED",
            "cancellationReason": null,
            "createdAt": "2026-01-09T14:01:13.792Z",
            "updatedAt": "2026-01-09T14:01:34.687Z",
            "refill": {
              "id": "cmk6y27uu006514kjyqewig2t",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "refillNumber": 0,
              "authorizedQty": 30,
              "dispensedQty": 0,
              "remainingQty": 30,
              "status": "AVAILABLE",
              "expiresAt": "2026-07-09T14:01:02.749Z",
              "notes": null,
              "createdAt": "2026-01-09T14:01:04.327Z",
              "updatedAt": "2026-01-09T14:01:04.327Z",
              "prescription": {
                "id": "cmk6y26uf006014kjncnp6ewc",
                "storeId": "cmk6y1lbn004d14kjwvho41y0",
                "patientId": "cmk6y262p005x14kjm5kjhals",
                "prescriberId": null,
                "source": "manual",
                "priority": "Normal",
                "createdAt": "2026-01-09T14:01:03.015Z",
                "updatedAt": "2026-01-09T14:01:06.376Z",
                "deletedAt": null,
                "notes": null,
                "controlledFlag": false,
                "eRxId": null,
                "eRxMetadata": null,
                "nextRefillDue": null,
                "ocrConfidence": null,
                "ocrText": null,
                "reminderSent": null,
                "uploadedImages": [],
                "prescriptionNumber": "RX000002",
                "type": "REGULAR",
                "issueDate": "2026-01-09T14:01:03.013Z",
                "expiryDate": "2026-07-09T14:01:02.749Z",
                "totalRefills": 3,
                "status": "ACTIVE",
                "patient": {
                  "id": "cmk6y262p005x14kjm5kjhals",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "firstName": "John",
                  "middleName": null,
                  "lastName": "Doe",
                  "dateOfBirth": "1990-01-15T00:00:00.000Z",
                  "gender": "MALE",
                  "photoUrl": null,
                  "phoneNumber": "9967261831",
                  "email": "john.doe.1767967261831@test.com",
                  "addressLine1": null,
                  "addressLine2": null,
                  "city": null,
                  "state": null,
                  "pinCode": null,
                  "bloodGroup": null,
                  "allergies": [],
                  "chronicConditions": [],
                  "emergencyContactName": null,
                  "emergencyContactPhone": null,
                  "createdAt": "2026-01-09T14:01:02.017Z",
                  "updatedAt": "2026-01-09T14:01:02.017Z",
                  "deletedAt": null,
                  "deletedBy": null,
                  "creditLimit": "0",
                  "currentBalance": "0"
                },
                "prescriber": null
              }
            },
            "prescriptionVersion": {
              "id": "cmk6y27dt006214kjntqn55iq",
              "prescriptionId": "cmk6y26uf006014kjncnp6ewc",
              "versionNumber": 1,
              "instructions": "DPFV Test Prescription",
              "substitutionNotes": null,
              "attachments": null,
              "changedReason": null,
              "createdBy": "cmk6y1pit004p14kjnhm38zqo",
              "createdAt": "2026-01-09T14:01:03.714Z",
              "items": [
                {
                  "id": "cmk6y27dt006414kjie2l6h0v",
                  "prescriptionVersionId": "cmk6y27dt006214kjntqn55iq",
                  "drugId": "cmk6y26i7005z14kjsf0ungof",
                  "batchId": null,
                  "quantityPrescribed": 30,
                  "sig": "1 tablet daily",
                  "daysSupply": null,
                  "substitutionAllowed": true,
                  "isControlled": false,
                  "refillsAllowed": 0,
                  "drug": {
                    "id": "cmk6y26i7005z14kjsf0ungof",
                    "rxcui": null,
                    "name": "DPFV Test Drug 1767967262574",
                    "genericName": "Test Generic",
                    "strength": "500mg",
                    "form": "Tablet",
                    "manufacturer": "Test Pharma",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T14:01:02.575Z",
                    "updatedAt": "2026-01-09T14:01:02.575Z",
                    "storeId": "cmk6y1lbn004d14kjwvho41y0",
                    "hsnCodeId": null
                  }
                }
              ]
            }
          },
          "assertions": [
            {
              "passed": true,
              "message": "Dispense status must be COMPLETED",
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "invariant": "DISP-004"
            }
          ],
          "duration": 1111
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y1vmz005114kjsdxzw6yk",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "drugId": "cmk6y1vbg004z14kj9guvif3f",
            "batchNumber": "DPFV-1767967248286",
            "expiryDate": "2027-01-09T14:00:48.286Z",
            "quantityInStock": 60,
            "mrp": "25",
            "purchasePrice": "20",
            "supplierId": null,
            "location": null,
            "createdAt": "2026-01-09T14:00:48.491Z",
            "updatedAt": "2026-01-09T14:01:30.032Z",
            "deletedAt": null,
            "drug": {
              "id": "cmk6y1vbg004z14kj9guvif3f",
              "rxcui": null,
              "name": "Paracetamol 500mg",
              "genericName": "Paracetamol 500mg",
              "strength": null,
              "form": "Tablet",
              "manufacturer": null,
              "schedule": null,
              "hsnCode": null,
              "gstRate": "12",
              "requiresPrescription": false,
              "defaultUnit": null,
              "lowStockThreshold": null,
              "description": null,
              "lastSyncedAt": null,
              "createdAt": "2026-01-09T14:00:48.076Z",
              "updatedAt": "2026-01-09T14:00:48.076Z",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "hsnCodeId": null
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": ">= 0",
              "actual": 60,
              "message": "Stock quantity must never be negative",
              "invariant": "INV-001"
            }
          ],
          "duration": 401
        }
      ],
      "duration": 13666
    },
    {
      "id": "procurement.grn",
      "status": "PASSED",
      "steps": [
        {
          "success": true,
          "data": {
            "id": "cmk6y2yr6007c14kj7v75vz4k",
            "grnNumber": "GRN202601 298999 ",
            "poId": "cmk6y2jj1006k14kjqrxe5q1d",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "supplierId": "cmk6y2c9k006e14kjwdv01eoq",
            "status": "DRAFT",
            "supplierInvoiceNo": null,
            "supplierInvoiceDate": null,
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-09T14:01:39.186Z",
            "subtotal": "0",
            "taxAmount": "0",
            "total": "0",
            "notes": null,
            "completedAt": null,
            "createdAt": "2026-01-09T14:01:39.186Z",
            "updatedAt": "2026-01-09T14:01:39.186Z",
            "items": [
              {
                "id": "cmk6y2ywy007d14kj57rg3ig4",
                "grnId": "cmk6y2yr6007c14kj7v75vz4k",
                "poItemId": "cmk6y2jsh006m14kjcuogllmy",
                "drugId": "cmk6y2hyp006i14kjsrdntv93",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "TBD",
                "expiryDate": null,
                "mrp": "0",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "0",
                "discountType": "BEFORE_GST",
                "location": null,
                "isSplit": false,
                "parentItemId": null,
                "drug": {
                  "id": "cmk6y2hyp006i14kjsrdntv93",
                  "rxcui": null,
                  "name": "PO Test Drug 1767967277424",
                  "genericName": null,
                  "strength": null,
                  "form": null,
                  "manufacturer": "Cipla",
                  "schedule": null,
                  "hsnCode": null,
                  "gstRate": "12",
                  "requiresPrescription": false,
                  "defaultUnit": null,
                  "lowStockThreshold": null,
                  "description": null,
                  "lastSyncedAt": null,
                  "createdAt": "2026-01-09T14:01:17.425Z",
                  "updatedAt": "2026-01-09T14:01:17.425Z",
                  "storeId": "cmk6y1lbn004d14kjwvho41y0",
                  "hsnCodeId": null
                }
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk6y2jj1006k14kjqrxe5q1d",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "supplierId": "cmk6y2c9k006e14kjwdv01eoq",
              "poNumber": "PO202601279366",
              "status": "SENT",
              "orderDate": "2026-01-09T14:01:19.453Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "createdBy": "cmk6y1pit004p14kjnhm38zqo",
              "approvedBy": "cmk6y1pit004p14kjnhm38zqo",
              "approvedAt": "2026-01-09T14:01:21.288Z",
              "createdAt": "2026-01-09T14:01:19.453Z",
              "updatedAt": "2026-01-09T14:01:22.273Z",
              "deletedAt": null,
              "notes": null,
              "items": [
                {
                  "id": "cmk6y2jsh006m14kjcuogllmy",
                  "poId": "cmk6y2jj1006k14kjqrxe5q1d",
                  "drugId": "cmk6y2hyp006i14kjsrdntv93",
                  "quantity": 100,
                  "receivedQty": 0,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600",
                  "drug": {
                    "id": "cmk6y2hyp006i14kjsrdntv93",
                    "rxcui": null,
                    "name": "PO Test Drug 1767967277424",
                    "genericName": null,
                    "strength": null,
                    "form": null,
                    "manufacturer": "Cipla",
                    "schedule": null,
                    "hsnCode": null,
                    "gstRate": "12",
                    "requiresPrescription": false,
                    "defaultUnit": null,
                    "lowStockThreshold": null,
                    "description": null,
                    "lastSyncedAt": null,
                    "createdAt": "2026-01-09T14:01:17.425Z",
                    "updatedAt": "2026-01-09T14:01:17.425Z",
                    "storeId": "cmk6y1lbn004d14kjwvho41y0",
                    "hsnCodeId": null
                  }
                }
              ],
              "supplier": {
                "id": "cmk6y2c9k006e14kjwdv01eoq",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-09T14:01:10.041Z",
                "updatedAt": "2026-01-09T14:01:10.041Z",
                "deletedAt": null,
                "storeId": "cmk6y1lbn004d14kjwvho41y0"
              }
            },
            "attachments": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "GRN object created",
              "expected": "GRN ID",
              "actual": "cmk6y2yr6007c14kj7v75vz4k",
              "invariant": "DATA-001"
            }
          ],
          "duration": 4376
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2ywy007d14kj57rg3ig4",
            "grnId": "cmk6y2yr6007c14kj7v75vz4k",
            "poItemId": "cmk6y2jsh006m14kjcuogllmy",
            "drugId": "cmk6y2hyp006i14kjsrdntv93",
            "orderedQty": 100,
            "receivedQty": 100,
            "freeQty": 0,
            "rejectedQty": 0,
            "batchNumber": "BATCH-1767967300575",
            "expiryDate": "2027-01-09T14:01:40.575Z",
            "mrp": "100",
            "unitPrice": "50",
            "discountPercent": "0",
            "gstPercent": "12",
            "lineTotal": "5600",
            "discountType": "BEFORE_GST",
            "location": null,
            "isSplit": false,
            "parentItemId": null
          },
          "assertions": [
            {
              "passed": true,
              "message": "Update successful",
              "expected": true,
              "actual": true,
              "invariant": "DATA-002"
            }
          ],
          "duration": 2995
        },
        {
          "success": true,
          "data": {
            "id": "cmk6y2yr6007c14kj7v75vz4k",
            "grnNumber": "GRN202601 298999 ",
            "poId": "cmk6y2jj1006k14kjqrxe5q1d",
            "storeId": "cmk6y1lbn004d14kjwvho41y0",
            "supplierId": "cmk6y2c9k006e14kjwdv01eoq",
            "status": "COMPLETED",
            "supplierInvoiceNo": "INV-1767967303571",
            "supplierInvoiceDate": "2026-01-09T14:01:43.571Z",
            "receivedBy": "DPFV Test",
            "receivedDate": "2026-01-09T14:01:39.186Z",
            "subtotal": "5000",
            "taxAmount": "600",
            "total": "5600",
            "notes": null,
            "completedAt": "2026-01-09T14:01:50.343Z",
            "createdAt": "2026-01-09T14:01:39.186Z",
            "updatedAt": "2026-01-09T14:01:50.344Z",
            "items": [
              {
                "id": "cmk6y2ywy007d14kj57rg3ig4",
                "grnId": "cmk6y2yr6007c14kj7v75vz4k",
                "poItemId": "cmk6y2jsh006m14kjcuogllmy",
                "drugId": "cmk6y2hyp006i14kjsrdntv93",
                "orderedQty": 100,
                "receivedQty": 100,
                "freeQty": 0,
                "rejectedQty": 0,
                "batchNumber": "BATCH-1767967300575",
                "expiryDate": "2027-01-09T14:01:40.575Z",
                "mrp": "100",
                "unitPrice": "50",
                "discountPercent": "0",
                "gstPercent": "12",
                "lineTotal": "5600",
                "discountType": "BEFORE_GST",
                "location": null,
                "isSplit": false,
                "parentItemId": null
              }
            ],
            "discrepancies": [],
            "po": {
              "id": "cmk6y2jj1006k14kjqrxe5q1d",
              "storeId": "cmk6y1lbn004d14kjwvho41y0",
              "supplierId": "cmk6y2c9k006e14kjwdv01eoq",
              "poNumber": "PO202601279366",
              "status": "RECEIVED",
              "orderDate": "2026-01-09T14:01:19.453Z",
              "expectedDeliveryDate": null,
              "subtotal": "5000",
              "taxAmount": "600",
              "total": "5600",
              "currency": "INR",
              "paymentTerms": null,
              "createdBy": "cmk6y1pit004p14kjnhm38zqo",
              "approvedBy": "cmk6y1pit004p14kjnhm38zqo",
              "approvedAt": "2026-01-09T14:01:21.288Z",
              "createdAt": "2026-01-09T14:01:19.453Z",
              "updatedAt": "2026-01-09T14:01:50.136Z",
              "deletedAt": null,
              "notes": null,
              "items": [
                {
                  "id": "cmk6y2jsh006m14kjcuogllmy",
                  "poId": "cmk6y2jj1006k14kjqrxe5q1d",
                  "drugId": "cmk6y2hyp006i14kjsrdntv93",
                  "quantity": 100,
                  "receivedQty": 100,
                  "packSize": 1,
                  "packUnit": "Strip",
                  "unitPrice": "50",
                  "discountPercent": "0",
                  "gstPercent": "12",
                  "lineTotal": "5600"
                }
              ],
              "supplier": {
                "id": "cmk6y2c9k006e14kjwdv01eoq",
                "name": "Alpha Pharma Distributors",
                "category": "Distributor",
                "status": "Active",
                "gstin": "27AABCU9603R1ZN",
                "dlNumber": null,
                "pan": null,
                "contactName": "Rahul Kumar",
                "phoneNumber": "9876543210",
                "email": "alpha@test.com",
                "whatsapp": null,
                "addressLine1": "Test Address 1",
                "addressLine2": null,
                "city": "Pune",
                "state": "Maharashtra",
                "pinCode": "411001",
                "paymentTerms": null,
                "creditLimit": null,
                "createdAt": "2026-01-09T14:01:10.041Z",
                "updatedAt": "2026-01-09T14:01:10.041Z",
                "deletedAt": null,
                "storeId": "cmk6y1lbn004d14kjwvho41y0"
              }
            }
          },
          "assertions": [
            {
              "passed": true,
              "expected": "COMPLETED",
              "actual": "COMPLETED",
              "message": "Status -> COMPLETED",
              "invariant": "STATE-001"
            }
          ],
          "duration": 7682
        },
        {
          "success": true,
          "data": {
            "mismatches": []
          },
          "assertions": [
            {
              "passed": true,
              "message": "Verification step passed",
              "expected": true,
              "actual": true,
              "invariant": "INV-004"
            }
          ],
          "duration": 92
        }
      ],
      "duration": 15146
    }
  ],
  "failures": [
    {
      "scenarioId": "audit.gdpr",
      "scenarioName": "GDPR Data Export",
      "stepId": "gdpr.export-json",
      "stepName": "Export User Data (JSON)",
      "invariant": "INV-AUDIT",
      "expected": "No error",
      "actual": "Cannot read properties of null (reading 'user')",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.refund",
      "scenarioName": "Sale Refund Flow",
      "stepId": "refund.create-sale",
      "stepName": "Create Sale to Refund",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "pos.credit",
      "scenarioName": "Credit Sale Flow",
      "stepId": "credit.create-sale",
      "stepName": "Create Sale on Credit",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "documents.invoice-pdf",
      "scenarioName": "Invoice PDF Generation Flow",
      "stepId": "pdf.create-sale",
      "stepName": "Create Sale for Invoice",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "procurement.consolidated",
      "scenarioName": "Consolidated Invoice Flow",
      "stepId": "consolidated.create-grn-1",
      "stepName": "Create First GRN",
      "invariant": "UNKNOWN",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.roles",
      "scenarioName": "Roles & Permissions Flow",
      "stepId": "roles.create",
      "stepName": "Create custom role",
      "invariant": "DATA-001",
      "expected": "Role",
      "actual": "Null",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    },
    {
      "scenarioId": "admin.features",
      "scenarioName": "Feature Toggles Flow",
      "stepId": "features.update",
      "stepName": "Override feature (Disable POS)",
      "invariant": "CONF-001",
      "expected": "hidden",
      "actual": "undefined",
      "businessImpact": "UNKNOWN: Requires investigation",
      "blockedDownstream": [],
      "suggestedActions": [
        "Review the failing step implementation"
      ]
    }
  ],
  "impactAnalysis": {
    "affectedFeatures": [
      "gdpr",
      "compliance",
      "audit",
      "pos",
      "refund",
      "inventory",
      "credit",
      "ledger",
      "patient",
      "pdf",
      "documents",
      "procurement",
      "grn",
      "billing",
      "admin",
      "roles",
      "permissions",
      "features"
    ],
    "totalBlocked": 0,
    "criticalBlocked": 0
  }
}